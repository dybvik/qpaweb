  


<!DOCTYPE html>
<html>
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# githubog: http://ogp.me/ns/fb/githubog#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>fabric.js/dist/all.min.js at master Â· kangax/fabric.js</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub" />
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png" />
    <link rel="logo" type="image/svg" href="http://github-media-downloads.s3.amazonaws.com/github-logo.svg" />
    <meta name="msapplication-TileImage" content="/windows-tile.png">
    <meta name="msapplication-TileColor" content="#ffffff">

    
    
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <meta content="authenticity_token" name="csrf-param" />
<meta content="VDkeqmUmqomQv47dGjcHNC5YSaJq+xktw8S8mmqdFU0=" name="csrf-token" />

    <link href="https://a248.e.akamai.net/assets.github.com/assets/github-4af97e95c6d3eb9a566ad339560cd70651729a71.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="https://a248.e.akamai.net/assets.github.com/assets/github2-20b8ad2ab65181cb9473a741cb5501ee2231c3bf.css" media="screen" rel="stylesheet" type="text/css" />
    


      <script src="https://a248.e.akamai.net/assets.github.com/assets/frameworks-ad1b87fda705d87118448f87fb6a20bdb15bd841.js" type="text/javascript"></script>
      <script src="https://a248.e.akamai.net/assets.github.com/assets/github-b27053786ad844f1131cdcf2ce344545cfc35c61.js" type="text/javascript"></script>
      
      <meta http-equiv="x-pjax-version" content="c38adbe003ebcf811acfac11dfe77893">

        <link data-pjax-transient rel='permalink' href='/kangax/fabric.js/blob/2cfc62169d893a9aab046c3d6d8f4f3921343c62/dist/all.min.js'>
    <meta property="og:title" content="fabric.js"/>
    <meta property="og:type" content="githubog:gitrepository"/>
    <meta property="og:url" content="https://github.com/kangax/fabric.js"/>
    <meta property="og:image" content="https://secure.gravatar.com/avatar/f1fcf834ddad415f60d29c87cc10d4d4?s=420&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png"/>
    <meta property="og:site_name" content="GitHub"/>
    <meta property="og:description" content="fabric.js - Javascript Canvas Library, SVG-to-Canvas (&amp; canvas-to-SVG) Parser"/>
    <meta property="twitter:card" content="summary"/>
    <meta property="twitter:site" content="@GitHub">
    <meta property="twitter:title" content="kangax/fabric.js"/>

    <meta name="description" content="fabric.js - Javascript Canvas Library, SVG-to-Canvas (&amp; canvas-to-SVG) Parser" />

  <link href="https://github.com/kangax/fabric.js/commits/master.atom" rel="alternate" title="Recent Commits to fabric.js:master" type="application/atom+xml" />

  </head>


  <body class="logged_in page-blob windows vis-public env-production  ">
    <div id="wrapper">

      

      

      

      


        <div class="header header-logged-in true">
          <div class="container clearfix">

            <a class="header-logo-blacktocat" href="https://github.com/">
  <span class="mega-icon mega-icon-blacktocat"></span>
</a>

            <div class="divider-vertical"></div>

              <a href="/notifications" class="notification-indicator tooltipped downwards" title="You have no unread notifications">
    <span class="mail-status all-read"></span>
  </a>
  <div class="divider-vertical"></div>


              <div class="command-bar js-command-bar  ">
      <form accept-charset="UTF-8" action="/search" class="command-bar-form" id="top_search_form" method="get">
  <a href="/search/advanced" class="advanced-search-icon tooltipped downwards command-bar-search" id="advanced_search" title="Advanced search"><span class="mini-icon mini-icon-advanced-search "></span></a>

  <input type="text" name="q" id="js-command-bar-field" placeholder="Search or type a command" tabindex="1" data-username="eskildak" autocapitalize="off">

  <span class="mini-icon help tooltipped downwards" title="Show command bar help">
    <span class="mini-icon mini-icon-help"></span>
  </span>

  <input type="hidden" name="ref" value="commandbar">

  <div class="divider-vertical"></div>
</form>
  <ul class="top-nav">
      <li class="explore"><a href="https://github.com/explore">Explore</a></li>
      <li><a href="https://gist.github.com">Gist</a></li>
      <li><a href="/blog">Blog</a></li>
    <li><a href="http://help.github.com">Help</a></li>
  </ul>
</div>


            

  
    <ul id="user-links">
      <li>
        <a href="https://github.com/eskildak" class="name">
          <img height="20" src="https://secure.gravatar.com/avatar/28eccd7a5e3a055301f5b4826989774c?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="20" /> eskildak
        </a>
      </li>
      <li>
        <a href="/new" id="new_repo" class="tooltipped downwards" title="Create a new repo">
          <span class="mini-icon mini-icon-create"></span>
        </a>
      </li>
      <li>
        <a href="/settings/profile" id="account_settings"
          class="tooltipped downwards"
          title="Account settings ">
          <span class="mini-icon mini-icon-account-settings"></span>
        </a>
      </li>
      <li>
        <a href="/logout" data-method="post" id="logout" class="tooltipped downwards" title="Sign out">
          <span class="mini-icon mini-icon-logout"></span>
        </a>
      </li>
    </ul>



            
          </div>
        </div>


      

      


            <div class="site hfeed" itemscope itemtype="http://schema.org/WebPage">
      <div class="hentry">
        
        <div class="pagehead repohead instapaper_ignore readability-menu ">
          <div class="container">
            <div class="title-actions-bar">
              


<ul class="pagehead-actions">


    <li class="subscription">
      <form accept-charset="UTF-8" action="/notifications/subscribe" data-autosubmit="true" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="authenticity_token" type="hidden" value="VDkeqmUmqomQv47dGjcHNC5YSaJq+xktw8S8mmqdFU0=" /></div>  <input id="repository_id" name="repository_id" type="hidden" value="712530" />

    <div class="select-menu js-menu-container js-select-menu">
      <span class="minibutton select-menu-button js-menu-target">
        <span class="js-select-button">
          <span class="mini-icon mini-icon-watching"></span>
          Watch
        </span>
      </span>

      <div class="select-menu-modal-holder js-menu-content">
        <div class="select-menu-modal">
          <div class="select-menu-header">
            <span class="select-menu-title">Notification status</span>
            <span class="mini-icon mini-icon-remove-close js-menu-close"></span>
          </div> <!-- /.select-menu-header -->

          <div class="select-menu-list js-navigation-container js-select-menu-pane">

            <div class="select-menu-item js-navigation-item js-navigation-target selected">
              <span class="select-menu-item-icon mini-icon mini-icon-confirm"></span>
              <div class="select-menu-item-text">
                <input checked="checked" id="do_included" name="do" type="radio" value="included" />
                <h4>Not watching</h4>
                <span class="description">You only receive notifications for discussions in which you participate or are @mentioned.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="mini-icon mini-icon-watching"></span>
                  Watch
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

            <div class="select-menu-item js-navigation-item js-navigation-target ">
              <span class="select-menu-item-icon mini-icon mini-icon-confirm"></span>
              <div class="select-menu-item-text">
                <input id="do_subscribed" name="do" type="radio" value="subscribed" />
                <h4>Watching</h4>
                <span class="description">You receive notifications for all discussions in this repository.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="mini-icon mini-icon-unwatch"></span>
                  Unwatch
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

            <div class="select-menu-item js-navigation-item js-navigation-target ">
              <span class="select-menu-item-icon mini-icon mini-icon-confirm"></span>
              <div class="select-menu-item-text">
                <input id="do_ignore" name="do" type="radio" value="ignore" />
                <h4>Ignoring</h4>
                <span class="description">You do not receive any notifications for discussions in this repository.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="mini-icon mini-icon-mute"></span>
                  Stop ignoring
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

          </div> <!-- /.select-menu-list -->

        </div> <!-- /.select-menu-modal -->
      </div> <!-- /.select-menu-modal-holder -->
    </div> <!-- /.select-menu -->

</form>
    </li>

    <li class="js-toggler-container js-social-container starring-container ">
      <a href="/kangax/fabric.js/unstar" class="minibutton js-toggler-target star-button starred upwards" title="Unstar this repo" data-remote="true" data-method="post" rel="nofollow">
        <span class="mini-icon mini-icon-remove-star"></span>
        <span class="text">Unstar</span>
      </a>
      <a href="/kangax/fabric.js/star" class="minibutton js-toggler-target star-button unstarred upwards" title="Star this repo" data-remote="true" data-method="post" rel="nofollow">
        <span class="mini-icon mini-icon-star"></span>
        <span class="text">Star</span>
      </a>
      <a class="social-count js-social-count" href="/kangax/fabric.js/stargazers">1,748</a>
    </li>

        <li>
          <a href="/kangax/fabric.js/fork" class="minibutton js-toggler-target fork-button lighter upwards" title="Fork this repo" rel="nofollow" data-method="post">
            <span class="mini-icon mini-icon-branch-create"></span>
            <span class="text">Fork</span>
          </a>
          <a href="/kangax/fabric.js/network" class="social-count">233</a>
        </li>


</ul>

              <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
                <span class="repo-label"><span>public</span></span>
                <span class="mega-icon mega-icon-public-repo"></span>
                <span class="author vcard">
                  <a href="/kangax" class="url fn" itemprop="url" rel="author">
                  <span itemprop="title">kangax</span>
                  </a></span> /
                <strong><a href="/kangax/fabric.js" class="js-current-repository">fabric.js</a></strong>
              </h1>
            </div>

            
  <ul class="tabs">
    <li><a href="/kangax/fabric.js" class="selected" highlight="repo_source repo_downloads repo_commits repo_tags repo_branches">Code</a></li>
    <li><a href="/kangax/fabric.js/network" highlight="repo_network">Network</a></li>
    <li><a href="/kangax/fabric.js/pulls" highlight="repo_pulls">Pull Requests <span class='counter'>1</span></a></li>

      <li><a href="/kangax/fabric.js/issues" highlight="repo_issues">Issues <span class='counter'>43</span></a></li>

      <li><a href="/kangax/fabric.js/wiki" highlight="repo_wiki">Wiki</a></li>


    <li><a href="/kangax/fabric.js/graphs" highlight="repo_graphs repo_contributors">Graphs</a></li>


  </ul>
  
<div class="tabnav">

  <span class="tabnav-right">
    <ul class="tabnav-tabs">
          <li><a href="/kangax/fabric.js/tags" class="tabnav-tab" highlight="repo_tags">Tags <span class="counter blank">0</span></a></li>
    </ul>
    
  </span>

  <div class="tabnav-widget scope">


    <div class="select-menu js-menu-container js-select-menu js-branch-menu">
      <a class="minibutton select-menu-button js-menu-target" data-hotkey="w" data-ref="master">
        <span class="mini-icon mini-icon-branch"></span>
        <i>branch:</i>
        <span class="js-select-button">master</span>
      </a>

      <div class="select-menu-modal-holder js-menu-content js-navigation-container js-select-menu-pane">

        <div class="select-menu-modal js-select-menu-pane">
          <div class="select-menu-header">
            <span class="select-menu-title">Switch branches/tags</span>
            <span class="mini-icon mini-icon-remove-close js-menu-close"></span>
          </div> <!-- /.select-menu-header -->

          <div class="select-menu-filters">
            <div class="select-menu-text-filter">
              <input type="text" id="commitish-filter-field" class="js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
            </div>
            <div class="select-menu-tabs">
              <ul>
                <li class="select-menu-tab">
                  <a href="#" data-tab-filter="branches" class="js-select-menu-tab">Branches</a>
                </li>
                <li class="select-menu-tab">
                  <a href="#" data-tab-filter="tags" class="js-select-menu-tab">Tags</a>
                </li>
              </ul>
            </div><!-- /.select-menu-tabs -->
          </div><!-- /.select-menu-filters -->

          <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket css-truncate" data-tab-filter="branches" data-filterable-for="commitish-filter-field" data-filterable-type="substring">


              <div class="select-menu-item js-navigation-item js-navigation-target ">
                <span class="select-menu-item-icon mini-icon mini-icon-confirm"></span>
                <a href="/kangax/fabric.js/blob/feature/dynamic_origin/dist/all.min.js" class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target" data-name="feature/dynamic_origin" rel="nofollow" title="feature/dynamic_origin">feature/dynamic_origin</a>
              </div> <!-- /.select-menu-item -->
              <div class="select-menu-item js-navigation-item js-navigation-target ">
                <span class="select-menu-item-icon mini-icon mini-icon-confirm"></span>
                <a href="/kangax/fabric.js/blob/feature/patterns/dist/all.min.js" class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target" data-name="feature/patterns" rel="nofollow" title="feature/patterns">feature/patterns</a>
              </div> <!-- /.select-menu-item -->
              <div class="select-menu-item js-navigation-item js-navigation-target selected">
                <span class="select-menu-item-icon mini-icon mini-icon-confirm"></span>
                <a href="/kangax/fabric.js/blob/master/dist/all.min.js" class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target" data-name="master" rel="nofollow" title="master">master</a>
              </div> <!-- /.select-menu-item -->

              <div class="select-menu-no-results js-not-filterable">Nothing to show</div>
          </div> <!-- /.select-menu-list -->


          <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket css-truncate" data-tab-filter="tags" data-filterable-for="commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-no-results js-not-filterable">Nothing to show</div>

          </div> <!-- /.select-menu-list -->

        </div> <!-- /.select-menu-modal -->
      </div> <!-- /.select-menu-modal-holder -->
    </div> <!-- /.select-menu -->

  </div> <!-- /.scope -->

  <ul class="tabnav-tabs">
    <li><a href="/kangax/fabric.js" class="selected tabnav-tab" highlight="repo_source">Files</a></li>
    <li><a href="/kangax/fabric.js/commits/master" class="tabnav-tab" highlight="repo_commits">Commits</a></li>
    <li><a href="/kangax/fabric.js/branches" class="tabnav-tab" highlight="repo_branches" rel="nofollow">Branches <span class="counter ">3</span></a></li>
  </ul>

</div>

  
  
  


            
          </div>
        </div><!-- /.repohead -->

        <div id="js-repo-pjax-container" class="container context-loader-container" data-pjax-container>
          


<!-- blob contrib key: blob_contributors:v21:1aba7e29cd1f3569b10cbcfb8c62223f -->
<!-- blob contrib frag key: views10/v8/blob_contributors:v21:1aba7e29cd1f3569b10cbcfb8c62223f -->


<div id="slider">
    <div class="frame-meta">

      <p title="This is a placeholder element" class="js-history-link-replace hidden"></p>

        <div class="breadcrumb">
          <span class='bold'><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/kangax/fabric.js" class="js-slide-to" data-branch="master" data-direction="back" itemscope="url"><span itemprop="title">fabric.js</span></a></span></span><span class="separator"> / </span><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/kangax/fabric.js/tree/master/dist" class="js-slide-to" data-branch="master" data-direction="back" itemscope="url"><span itemprop="title">dist</span></a></span><span class="separator"> / </span><strong class="final-path">all.min.js</strong> <span class="js-zeroclipboard zeroclipboard-button" data-clipboard-text="dist/all.min.js" data-copied-hint="copied!" title="copy to clipboard"><span class="mini-icon mini-icon-clipboard"></span></span>
        </div>

      <a href="/kangax/fabric.js/find/master" class="js-slide-to" data-hotkey="t" style="display:none">Show File Finder</a>


        
  <div class="commit file-history-tease">
    <img class="main-avatar" height="24" src="https://secure.gravatar.com/avatar/f1fcf834ddad415f60d29c87cc10d4d4?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
    <span class="author"><a href="/kangax" rel="author">kangax</a></span>
    <time class="js-relative-date" datetime="2013-03-10T13:06:29-07:00" title="2013-03-10 13:06:29">March 10, 2013</time>
    <div class="commit-title">
        <a href="/kangax/fabric.js/commit/d881340120de23060c48c78f14569f55846b4317" class="message">Version 1.1.0</a>
    </div>

    <div class="participation">
      <p class="quickstat"><a href="#blob_contributors_box" rel="facebox"><strong>3</strong> contributors</a></p>
          <a class="avatar tooltipped downwards" title="kangax" href="/kangax/fabric.js/commits/master/dist/all.min.js?author=kangax"><img height="20" src="https://secure.gravatar.com/avatar/f1fcf834ddad415f60d29c87cc10d4d4?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="20" /></a>
    <a class="avatar tooltipped downwards" title="ollym" href="/kangax/fabric.js/commits/master/dist/all.min.js?author=ollym"><img height="20" src="https://secure.gravatar.com/avatar/ba489cdbb9dfdf51f44e705bbf0189df?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="20" /></a>
    <a class="avatar tooltipped downwards" title="raiden-dev" href="/kangax/fabric.js/commits/master/dist/all.min.js?author=raiden-dev"><img height="20" src="https://secure.gravatar.com/avatar/d314e32396d63edc4af486da0db05817?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="20" /></a>


    </div>
    <div id="blob_contributors_box" style="display:none">
      <h2>Users on GitHub who have contributed to this file</h2>
      <ul class="facebox-user-list">
        <li>
          <img height="24" src="https://secure.gravatar.com/avatar/f1fcf834ddad415f60d29c87cc10d4d4?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
          <a href="/kangax">kangax</a>
        </li>
        <li>
          <img height="24" src="https://secure.gravatar.com/avatar/ba489cdbb9dfdf51f44e705bbf0189df?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
          <a href="/ollym">ollym</a>
        </li>
        <li>
          <img height="24" src="https://secure.gravatar.com/avatar/d314e32396d63edc4af486da0db05817?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
          <a href="/raiden-dev">raiden-dev</a>
        </li>
      </ul>
    </div>
  </div>


    </div><!-- ./.frame-meta -->

    <div class="frames">
      <div class="frame" data-permalink-url="/kangax/fabric.js/blob/2cfc62169d893a9aab046c3d6d8f4f3921343c62/dist/all.min.js" data-title="fabric.js/dist/all.min.js at master Â· kangax/fabric.js Â· GitHub" data-type="blob">

        <div id="files" class="bubble">
          <div class="file">
            <div class="meta">
              <div class="info">
                <span class="icon"><b class="mini-icon mini-icon-text-file"></b></span>
                <span class="mode" title="File Mode">file</span>
                  <span>6 lines (6 sloc)</span>
                <span>166.087 kb</span>
              </div>
              <div class="actions">
                <div class="button-group">
                        <a class="minibutton tooltipped leftwards"
                           title="Clicking this button will automatically fork this project so you can edit the file"
                           href="/kangax/fabric.js/edit/master/dist/all.min.js"
                           data-method="post" rel="nofollow">Edit</a>
                  <a href="/kangax/fabric.js/raw/master/dist/all.min.js" class="button minibutton " id="raw-url">Raw</a>
                    <a href="/kangax/fabric.js/blame/master/dist/all.min.js" class="button minibutton ">Blame</a>
                  <a href="/kangax/fabric.js/commits/master/dist/all.min.js" class="button minibutton " rel="nofollow">History</a>
                </div><!-- /.button-group -->
              </div><!-- /.actions -->

            </div>
                <div class="data type-javascript js-blob-data">
      <table cellpadding="0" cellspacing="0" class="lines">
        <tr>
          <td>
            <pre class="line_numbers"><span id="L1" rel="#L1">1</span>
<span id="L2" rel="#L2">2</span>
<span id="L3" rel="#L3">3</span>
<span id="L4" rel="#L4">4</span>
<span id="L5" rel="#L5">5</span>
<span id="L6" rel="#L6">6</span>
</pre>
          </td>
          <td width="100%">
                <div class="highlight"><pre><div class='line' id='LC1'>/* build: `node build.js modules=ALL exclude=gestures` *//*! Fabric.js Copyright 2008-2013, Printio (Juriy Zaytsev, Maxim Chernyak) */var fabric=fabric||{version:&quot;1.1.0&quot;};typeof exports!=&quot;undefined&quot;&amp;&amp;(exports.fabric=fabric),typeof document!=&quot;undefined&quot;&amp;&amp;typeof window!=&quot;undefined&quot;?(fabric.document=document,fabric.window=window):(fabric.document=require(&quot;jsdom&quot;).jsdom(&quot;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&quot;),fabric.window=fabric.document.createWindow()),fabric.isTouchSupported=&quot;ontouchstart&quot;in fabric.document.documentElement,fabric.isLikelyNode=typeof Buffer!=&quot;undefined&quot;&amp;&amp;typeof window==&quot;undefined&quot;;var Cufon=function(){function r(e){var t=this.face=e.face;this.glyphs=e.glyphs,this.w=e.w,this.baseSize=parseInt(t[&quot;units-per-em&quot;],10),this.family=t[&quot;font-family&quot;].toLowerCase(),this.weight=t[&quot;font-weight&quot;],this.style=t[&quot;font-style&quot;]||&quot;normal&quot;,this.viewBox=function(){var e=t.bbox.split(/\s+/),n={minX:parseInt(e[0],10),minY:parseInt(e[1],10),maxX:parseInt(e[2],10),maxY:parseInt(e[3],10)};return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.toString=function(){return[this.minX,this.minY,this.width,this.height].join(&quot; &quot;)},n}(),this.ascent=-parseInt(t.ascent,10),this.descent=-parseInt(t.descent,10),this.height=-this.ascent+this.descent}function i(){var e={},t={oblique:&quot;italic&quot;,italic:&quot;oblique&quot;};this.add=function(t){(e[t.style]||(e[t.style]={}))[t.weight]=t},this.get=function(n,r){var i=e[n]||e[t[n]]||e.normal||e.italic||e.oblique;if(!i)return null;r={normal:400,bold:700}[r]||parseInt(r,10);if(i[r])return i[r];var s={1:1,99:0}[r%100],o=[],u,a;s===undefined&amp;&amp;(s=r&gt;400),r==500&amp;&amp;(r=400);for(var f in i){f=parseInt(f,10);if(!u||f&lt;u)u=f;if(!a||f&gt;a)a=f;o.push(f)}return r&lt;u&amp;&amp;(r=u),r&gt;a&amp;&amp;(r=a),o.sort(function(e,t){return(s?e&gt;r&amp;&amp;t&gt;r?e&lt;t:e&gt;t:e&lt;r&amp;&amp;t&lt;r?e&gt;t:e&lt;t)?-1:1}),i[o[0]]}}function s(){function t(e,t){return e.contains?e.contains(t):e.compareDocumentPosition(t)&amp;16}function n(e){var n=e.relatedTarget;if(!n||t(this,n))return;i(this)}function r(e){i(this)}function i(t){setTimeout(function(){e.replace(t,g.get(t).options,!0)},10)}this.attach=function(e){e.onmouseenter===undefined?(a(e,&quot;mouseover&quot;,n),a(e,&quot;mouseout&quot;,n)):(a(e,&quot;mouseenter&quot;,r),a(e,&quot;mouseleave&quot;,r))}}function o(){function n(e){return e.cufid||(e.cufid=++t)}var e={},t=0;this.get=function(t){var r=n(t);return e[r]||(e[r]={})}}function u(e){var t={},r={};this.get=function(n){return t[n]!=undefined?t[n]:e[n]},this.getSize=function(e,t){return r[e]||(r[e]=new n.Size(this.get(e),t))},this.extend=function(e){for(var n in e)t[n]=e[n];return this}}function a(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&amp;&amp;e.attachEvent(&quot;on&quot;+t,function(){return n.call(e,fabric.window.event)})}function f(e,t){var n=g.get(e);return n.options?e:(t.hover&amp;&amp;t.hoverables[e.nodeName.toLowerCase()]&amp;&amp;y.attach(e),n.options=t,e)}function l(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.apply(null,arguments)),t[n]}}function c(e,t){t||(t=n.getStyle(e));var r=n.quotedList(t.get(&quot;fontFamily&quot;).toLowerCase()),i;for(var s=0,o=r.length;s&lt;o;++s){i=r[s];if(E[i])return E[i].get(t.get(&quot;fontStyle&quot;),t.get(&quot;fontWeight&quot;))}return null}function h(e){return fabric.document.getElementsByTagName(e)}function p(){var e={},t;for(var n=0,r=arguments.length;n&lt;r;++n)for(t in arguments[n])e[t]=arguments[n][t];return e}function d(e,t,r,i,s,o){var u=i.separate;if(u==&quot;none&quot;)return w[i.engine].apply(null,arguments);var a=fabric.document.createDocumentFragment(),f,l=t.split(x[u]),c=u==&quot;words&quot;;c&amp;&amp;m&amp;&amp;(/^\s/.test(t)&amp;&amp;l.unshift(&quot;&quot;),/\s$/.test(t)&amp;&amp;l.push(&quot;&quot;));for(var h=0,p=l.length;h&lt;p;++h)f=w[i.engine](e,c?n.textAlign(l[h],r,h,p):l[h],r,i,s,o,h&lt;p-1),f&amp;&amp;a.appendChild(f);return a}function v(e,t){var r,i,s,o;for(var u=f(e,t).firstChild;u;u=s){s=u.nextSibling,o=!1;if(u.nodeType==1){if(!u.firstChild)continue;if(!/cufon/.test(u.className)){arguments.callee(u,t);continue}o=!0}i||(i=n.getStyle(e).extend(t)),r||(r=c(e,i));if(!r)continue;if(o){w[t.engine](r,null,i,t,u,e);continue}var a=u.data;typeof G_vmlCanvasManager!=&quot;undefined&quot;&amp;&amp;(a=a.replace(/\r/g,&quot;\n&quot;));if(a===&quot;&quot;)continue;var l=d(r,a,i,t,u,e);l?u.parentNode.replaceChild(l,u):u.parentNode.removeChild(u)}}var e=function(){return e.replace.apply(null,arguments)},t=e.DOM={ready:function(){var e=!1,t={loaded:1,complete:1},n=[],r=function(){if(e)return;e=!0;for(var t;t=n.shift();t());};return fabric.document.addEventListener&amp;&amp;(fabric.document.addEventListener(&quot;DOMContentLoaded&quot;,r,!1),fabric.window.addEventListener(&quot;pageshow&quot;,r,!1)),!fabric.window.opera&amp;&amp;fabric.document.readyState&amp;&amp;function(){t[fabric.document.readyState]?r():setTimeout(arguments.callee,10)}(),fabric.document.readyState&amp;&amp;fabric.document.createStyleSheet&amp;&amp;function(){try{fabric.document.body.doScroll(&quot;left&quot;),r()}catch(e){setTimeout(arguments.callee,1)}}(),a(fabric.window,&quot;load&quot;,r),function(t){arguments.length?e?t():n.push(t):r()}}()},n=e.CSS={Size:function(e,t){this.value=parseFloat(e),this.unit=String(e).match(/[a-z%]*$/)[0]||&quot;px&quot;,this.convert=function(e){return e/t*this.value},this.convertFrom=function(e){return e/this.value*t},this.toString=function(){return this.value+this.unit}},getStyle:function(e){return new u(e.style)},quotedList:l(function(e){var t=[],n=/\s*(([&quot;&#39;])([\s\S]*?[^\\])\2|[^,]+)\s*/g,r;while(r=n.exec(e))t.push(r[3]||r[1]);return t}),ready:function(){var e=!1,n=[],r=function(){e=!0;for(var t;t=n.shift();t());},i=Object.prototype.propertyIsEnumerable?h(&quot;style&quot;):{length:0},s=h(&quot;link&quot;);return t.ready(function(){var e=0,t;for(var n=0,o=s.length;t=s[n],n&lt;o;++n)!t.disabled&amp;&amp;t.rel.toLowerCase()==&quot;stylesheet&quot;&amp;&amp;++e;fabric.document.styleSheets.length&gt;=i.length+e?r():setTimeout(arguments.callee,10)}),function(t){e?t():n.push(t)}}(),supports:function(e,t){var n=fabric.document.createElement(&quot;span&quot;).style;return n[e]===undefined?!1:(n[e]=t,n[e]===t)},textAlign:function(e,t,n,r){return t.get(&quot;textAlign&quot;)==&quot;right&quot;?n&gt;0&amp;&amp;(e=&quot; &quot;+e):n&lt;r-1&amp;&amp;(e+=&quot; &quot;),e},textDecoration:function(e,t){t||(t=this.getStyle(e));var n={underline:null,overline:null,&quot;line-through&quot;:null};for(var r=e;r.parentNode&amp;&amp;r.parentNode.nodeType==1;){var i=!0;for(var s in n){if(n[s])continue;t.get(&quot;textDecoration&quot;).indexOf(s)!=-1&amp;&amp;(n[s]=t.get(&quot;color&quot;)),i=!1}if(i)break;t=this.getStyle(r=r.parentNode)}return n},textShadow:l(function(e){if(e==&quot;none&quot;)return null;var t=[],n={},r,i=0,s=/(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)|(-?[\d.]+[a-z%]*)|,/ig;while(r=s.exec(e))r[0]==&quot;,&quot;?(t.push(n),n={},i=0):r[1]?n.color=r[1]:n[[&quot;offX&quot;,&quot;offY&quot;,&quot;blur&quot;][i++]]=r[2];return t.push(n),t}),color:l(function(e){var t={};return t.color=e.replace(/^rgba\((.*?),\s*([\d.]+)\)/,function(e,n,r){return t.opacity=parseFloat(r),&quot;rgb(&quot;+n+&quot;)&quot;}),t}),textTransform:function(e,t){return e[{uppercase:&quot;toUpperCase&quot;,lowercase:&quot;toLowerCase&quot;}[t.get(&quot;textTransform&quot;)]||&quot;toString&quot;]()}},m=&quot; &quot;.split(/\s+/).length==0,g=new o,y=new s,b=[],w={},E={},S={engine:null,hover:!1,hoverables:{a:!0},printable:!0,selector:fabric.window.Sizzle||fabric.window.jQuery&amp;&amp;function(e){return jQuery(e)}||fabric.window.dojo&amp;&amp;dojo.query||fabric.window.$$&amp;&amp;function(e){return $$(e)}||fabric.window.$&amp;&amp;function(e){return $(e)}||fabric.document.querySelectorAll&amp;&amp;function(e){return fabric.document.querySelectorAll(e)}||h,separate:&quot;words&quot;,textShadow:&quot;none&quot;},x={words:/\s+/,characters:&quot;&quot;};return e.now=function(){return t.ready(),e},e.refresh=function(){var t=b.splice(0,b.length);for(var n=0,r=t.length;n&lt;r;++n)e.replace.apply(null,t[n]);return e},e.registerEngine=function(t,n){return n?(w[t]=n,e.set(&quot;engine&quot;,t)):e},e.registerFont=function(t){var n=new r(t),s=n.family;return E[s]||(E[s]=new i),E[s].add(n),e.set(&quot;fontFamily&quot;,&#39;&quot;&#39;+s+&#39;&quot;&#39;)},e.replace=function(t,r,i){r=p(S,r);if(!r.engine)return e;typeof r.textShadow==&quot;string&quot;&amp;&amp;r.textShadow&amp;&amp;(r.textShadow=n.textShadow(r.textShadow)),i||b.push(arguments);if(t.nodeType||typeof t==&quot;string&quot;)t=[t];return n.ready(function(){for(var n=0,i=t.length;n&lt;i;++n){var s=t[n];typeof s==&quot;string&quot;?e.replace(r.selector(s),r,!0):v(s,r)}}),e},e.replaceElement=function(e,t){return t=p(S,t),typeof t.textShadow==&quot;string&quot;&amp;&amp;t.textShadow&amp;&amp;(t.textShadow=n.textShadow(t.textShadow)),v(e,t)},e.engines=w,e.fonts=E,e.getOptions=function(){return p(S)},e.set=function(t,n){return S[t]=n,e},e}();Cufon.registerEngine(&quot;canvas&quot;,function(){function s(e,t){var n=0,r=0,i=[],s=/([mrvxe])([^a-z]*)/g,o;e:for(var u=0;o=s.exec(e);++u){var a=o[2].split(&quot;,&quot;);switch(o[1]){case&quot;v&quot;:i[u]={m:&quot;bezierCurveTo&quot;,a:[n+~~a[0],r+~~a[1],n+~~a[2],r+~~a[3],n+=~~a[4],r+=~~a[5]]};break;case&quot;r&quot;:i[u]={m:&quot;lineTo&quot;,a:[n+=~~a[0],r+=~~a[1]]};break;case&quot;m&quot;:i[u]={m:&quot;moveTo&quot;,a:[n=~~a[0],r=~~a[1]]};break;case&quot;x&quot;:i[u]={m:&quot;closePath&quot;,a:[]};break;case&quot;e&quot;:break e}t[i[u].m].apply(t,i[u].a)}return i}function o(e,t){for(var n=0,r=e.length;n&lt;r;++n){var i=e[n];t[i.m].apply(t,i.a)}}var e=Cufon.CSS.supports(&quot;display&quot;,&quot;inline-block&quot;),t=!e&amp;&amp;(fabric.document.compatMode==&quot;BackCompat&quot;||/frameset|transitional/i.test(fabric.document.doctype.publicId)),n=fabric.document.createElement(&quot;style&quot;);n.type=&quot;text/css&quot;;var r=fabric.document.createTextNode(&quot;.cufon-canvas{text-indent:0}@media screen,projection{.cufon-canvas{display:inline;display:inline-block;position:relative;vertical-align:middle&quot;+(t?&quot;&quot;:&quot;;font-size:1px;line-height:1px&quot;)+&quot;}.cufon-canvas .cufon-alt{display:-moz-inline-box;display:inline-block;width:0;height:0;overflow:hidden}&quot;+(e?&quot;.cufon-canvas canvas{position:relative}&quot;:&quot;.cufon-canvas canvas{position:absolute}&quot;)+&quot;}&quot;+&quot;@media print{&quot;+&quot;.cufon-canvas{padding:0 !important}&quot;+&quot;.cufon-canvas canvas{display:none}&quot;+&quot;.cufon-canvas .cufon-alt{display:inline}&quot;+&quot;}&quot;);try{n.appendChild(r)}catch(i){n.setAttribute(&quot;type&quot;,&quot;text/css&quot;),n.styleSheet.cssText=r.data}return fabric.document.getElementsByTagName(&quot;head&quot;)[0].appendChild(n),function(t,n,r,i,u,a){function $(e,t){W.strokeStyle=t,W.beginPath(),W.moveTo(0,e),W.lineTo(N,e),W.stroke()}function Q(){W.save();var e=0,n=0,r=[{left:0}];i.backgroundColor&amp;&amp;(W.save(),W.fillStyle=i.backgroundColor,W.translate(0,t.ascent),W.fillRect(0,0,N+10,(-t.ascent+t.descent)*L),W.restore()),i.textAlign===&quot;right&quot;?(W.translate(M[n],0),r[0].left=M[n]*X):i.textAlign===&quot;center&quot;&amp;&amp;(W.translate(M[n]/2,0),r[0].left=M[n]/2*X);for(var s=0,o=T.length;s&lt;o;++s){if(T[s]===&quot;\n&quot;){n++;var u=-t.ascent-t.ascent/5*i.lineHeight,a=r[r.length-1],f={left:0};a.width=e*X,a.height=(-t.ascent+t.descent)*X,i.textAlign===&quot;right&quot;?(W.translate(-N,u),W.translate(M[n],0),f.left=M[n]*X):i.textAlign===&quot;center&quot;?(W.translate(-e-M[n-1]/2,u),W.translate(M[n]/2,0),f.left=M[n]/2*X):W.translate(-e,u),r.push(f),e=0;continue}var l=t.glyphs[T[s]]||t.missingGlyph;if(!l)continue;var c=Number(l.w||t.w)+h;i.textBackgroundColor&amp;&amp;(W.save(),W.fillStyle=i.textBackgroundColor,W.translate(0,t.ascent),W.fillRect(0,0,c+10,-t.ascent+t.descent),W.restore()),W.translate(c,0),e+=c,s==o-1&amp;&amp;(r[r.length-1].width=e*X,r[r.length-1].height=(-t.ascent+t.descent)*X)}W.restore(),Cufon.textOptions.boundaries=r}function G(e){W.fillStyle=e||Cufon.textOptions.color||r.get(&quot;color&quot;);var n=0,u=0;i.textAlign===&quot;right&quot;?W.translate(M[u],0):i.textAlign===&quot;center&quot;&amp;&amp;W.translate(M[u]/2,0);for(var a=0,f=T.length;a&lt;f;++a){if(T[a]===&quot;\n&quot;){u++;var l=-t.ascent-t.ascent/5*i.lineHeight;i.textAlign===&quot;right&quot;?(W.translate(-N,l),W.translate(M[u],0)):i.textAlign===&quot;center&quot;?(W.translate(-n-M[u-1]/2,l),W.translate(M[u]/2,0)):W.translate(-n,l),n=0;continue}var c=t.glyphs[T[a]]||t.missingGlyph;if(!c)continue;var p=Number(c.w||t.w)+h;J&amp;&amp;(W.save(),W.strokeStyle=W.fillStyle,W.lineWidth+=W.lineWidth,W.beginPath(),J.underline&amp;&amp;(W.moveTo(0,-t.face[&quot;underline-position&quot;]+.5),W.lineTo(p,-t.face[&quot;underline-position&quot;]+.5)),J.overline&amp;&amp;(W.moveTo(0,t.ascent+.5),W.lineTo(p,t.ascent+.5)),J[&quot;line-through&quot;]&amp;&amp;(W.moveTo(0,-t.descent+.5),W.lineTo(p,-t.descent+.5)),W.stroke(),W.restore()),K&amp;&amp;(W.save(),W.transform(1,0,-0.25,1,0,0)),W.beginPath(),c.d&amp;&amp;(c.code?o(c.code,W):c.code=s(&quot;m&quot;+c.d,W)),W.fill(),i.strokeStyle&amp;&amp;(W.closePath(),W.save(),W.lineWidth=i.strokeWidth,W.strokeStyle=i.strokeStyle,W.stroke(),W.restore()),K&amp;&amp;W.restore(),W.translate(p,0),n+=p}}var f=n===null,l=t.viewBox,c=r.getSize(&quot;fontSize&quot;,t.baseSize),h=r.get(&quot;letterSpacing&quot;);h=h==&quot;normal&quot;?0:c.convertFrom(parseInt(h,10));var p=0,d=0,v=0,m=0,g=i.textShadow,y=[];Cufon.textOptions.shadowOffsets=[],Cufon.textOptions.shadows=null;if(g){Cufon.textOptions.shadows=g;for(var b=0,w=g.length;b&lt;w;++b){var E=g[b],S=c.convertFrom(parseFloat(E.offX)),x=c.convertFrom(parseFloat(E.offY));y[b]=[S,x]}}var T=Cufon.CSS.textTransform(f?u.alt:n,r).split(&quot;&quot;),N=0,C=null,k=0,L=1,A=[];for(var b=0,w=T.length;b&lt;w;++b){if(T[b]===&quot;\n&quot;){L++,N&gt;k&amp;&amp;(k=N),A.push(N),N=0;continue}var O=t.glyphs[T[b]]||t.missingGlyph;if(!O)continue;N+=C=Number(O.w||t.w)+h}A.push(N),N=Math.max(k,N);var M=[];for(var b=A.length;b--;)M[b]=N-A[b];if(C===null)return null;d+=l.width-C,m+=l.minX;var _,D;if(f)_=u,D=u.firstChild;else{_=fabric.document.createElement(&quot;span&quot;),_.className=&quot;cufon cufon-canvas&quot;,_.alt=n,D=fabric.document.createElement(&quot;canvas&quot;),_.appendChild(D);if(i.printable){var P=fabric.document.createElement(&quot;span&quot;);P.className=&quot;cufon-alt&quot;,P.appendChild(fabric.document.createTextNode(n)),_.appendChild(P)}}var H=_.style,B=D.style||{},j=c.convert(l.height-p+v),F=Math.ceil(j),I=F/j;D.width=Math.ceil(c.convert(N+d-m)*I),D.height=F,p+=l.minY,B.top=Math.round(c.convert(p-t.ascent))+&quot;px&quot;,B.left=Math.round(c.convert(m))+&quot;px&quot;;var q=Math.ceil(c.convert(N*I)),R=q+&quot;px&quot;,U=c.convert(t.height),z=(i.lineHeight-1)*c.convert(-t.ascent/5)*(L-1);Cufon.textOptions.width=q,Cufon.textOptions.height=U*L+z,Cufon.textOptions.lines=L,Cufon.textOptions.totalLineHeight=z,e?(H.width=R,H.height=U+&quot;px&quot;):(H.paddingLeft=R,H.paddingBottom=U-1+&quot;px&quot;);var W=Cufon.textOptions.context||D.getContext(&quot;2d&quot;),X=F/l.height;Cufon.textOptions.fontAscent=t.ascent*X,Cufon.textOptions.boundaries=null;for(var V=Cufon.textOptions.shadowOffsets,b=y.length;b--;)V[b]=[y[b][0]*X,y[b][1]*X];W.save(),W.scale(X,X),W.translate(-m-1/X*D.width/2+(Cufon.fonts[t.family].offsetLeft||0),-p-Cufon.textOptions.height/X/2+(Cufon.fonts[t.family].offsetTop||0)),W.lineWidth=t.face[&quot;underline-thickness&quot;],W.save();var J=Cufon.getTextDecoration(i),K=i.fontStyle===&quot;italic&quot;;W.save(),Q();if(g)for(var b=0,w=g.length;b&lt;w;++b){var E=g[b];W.save(),W.translate.apply(W,y[b]),G(E.color),W.restore()}return G(),W.restore(),W.restore(),W.restore(),_}}()),Cufon.registerEngine(&quot;vml&quot;,function(){function n(e,t){return r(e,/(?:em|ex|%)$/i.test(t)?&quot;1em&quot;:t)}function r(e,t){if(/px$/i.test(t))return parseFloat(t);var n=e.style.left,r=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,e.style.left=t;var i=e.style.pixelLeft;return e.style.left=n,e.runtimeStyle.left=r,i}if(!fabric.document.namespaces)return;var e=fabric.document.createElement(&quot;canvas&quot;);if(e&amp;&amp;e.getContext&amp;&amp;e.getContext.apply)return;fabric.document.namespaces.cvml==null&amp;&amp;fabric.document.namespaces.add(&quot;cvml&quot;,&quot;urn:schemas-microsoft-com:vml&quot;);var t=fabric.document.createElement(&quot;cvml:shape&quot;);t.style.behavior=&quot;url(#default#VML)&quot;;if(!t.coordsize)return;return t=null,fabric.document.write(&#39;&lt;style type=&quot;text/css&quot;&gt;.cufon-vml-canvas{text-indent:0}@media screen{cvml\\:shape,cvml\\:shadow{behavior:url(#default#VML);display:block;antialias:true;position:absolute}.cufon-vml-canvas{position:absolute;text-align:left}.cufon-vml{display:inline-block;position:relative;vertical-align:middle}.cufon-vml .cufon-alt{position:absolute;left:-10000in;font-size:1px}a .cufon-vml{cursor:pointer}}@media print{.cufon-vml *{display:none}.cufon-vml .cufon-alt{display:inline}}&lt;/style&gt;&#39;),function(e,t,i,s,o,u,a){var f=t===null;f&amp;&amp;(t=o.alt);var l=e.viewBox,c=i.computedFontSize||(i.computedFontSize=new Cufon.CSS.Size(n(u,i.get(&quot;fontSize&quot;))+&quot;px&quot;,e.baseSize)),h=i.computedLSpacing;h==undefined&amp;&amp;(h=i.get(&quot;letterSpacing&quot;),i.computedLSpacing=h=h==&quot;normal&quot;?0:~~c.convertFrom(r(u,h)));var p,d;if(f)p=o,d=o.firstChild;else{p=fabric.document.createElement(&quot;span&quot;),p.className=&quot;cufon cufon-vml&quot;,p.alt=t,d=fabric.document.createElement(&quot;span&quot;),d.className=&quot;cufon-vml-canvas&quot;,p.appendChild(d);if(s.printable){var v=fabric.document.createElement(&quot;span&quot;);v.className=&quot;cufon-alt&quot;,v.appendChild(fabric.document.createTextNode(t)),p.appendChild(v)}a||p.appendChild(fabric.document.createElement(&quot;cvml:shape&quot;))}var m=p.style,g=d.style,y=c.convert(l.height),b=Math.ceil(y),w=b/y,E=l.minX,S=l.minY;g.height=b,g.top=Math.round(c.convert(S-e.ascent)),g.left=Math.round(c.convert(E)),m.height=c.convert(e.height)+&quot;px&quot;;var x=Cufon.getTextDecoration(s),T=i.get(&quot;color&quot;),N=Cufon.CSS.textTransform(t,i).split(&quot;&quot;),C=0,k=0,L=null,A,O,M=s.textShadow;for(var _=0,D=0,P=N.length;_&lt;P;++_)A=e.glyphs[N[_]]||e.missingGlyph,A&amp;&amp;(C+=L=~~(A.w||e.w)+h);if(L===null)return null;var H=-E+C+(l.width-L),B=c.convert(H*w),j=Math.round(B),F=H+&quot;,&quot;+l.height,I,q=&quot;r&quot;+F+&quot;nsnf&quot;;for(_=0;_&lt;P;++_){A=e.glyphs[N[_]]||e.missingGlyph;if(!A)continue;f?(O=d.childNodes[D],O.firstChild&amp;&amp;O.removeChild(O.firstChild)):(O=fabric.document.createElement(&quot;cvml:shape&quot;),d.appendChild(O)),O.stroked=&quot;f&quot;,O.coordsize=F,O.coordorigin=I=E-k+&quot;,&quot;+S,O.path=(A.d?&quot;m&quot;+A.d+&quot;xe&quot;:&quot;&quot;)+&quot;m&quot;+I+q,O.fillcolor=T;var R=O.style;R.width=j,R.height=b;if(M){var U=M[0],z=M[1],W=Cufon.CSS.color(U.color),X,V=fabric.document.createElement(&quot;cvml:shadow&quot;);V.on=&quot;t&quot;,V.color=W.color,V.offset=U.offX+&quot;,&quot;+U.offY,z&amp;&amp;(X=Cufon.CSS.color(z.color),V.type=&quot;double&quot;,V.color2=X.color,V.offset2=z.offX+&quot;,&quot;+z.offY),V.opacity=W.opacity||X&amp;&amp;X.opacity||1,O.appendChild(V)}k+=~~(A.w||e.w)+h,++D}return m.width=Math.max(Math.ceil(c.convert(C*w)),0),p}}()),Cufon.getTextDecoration=function(e){return{underline:e.textDecoration===&quot;underline&quot;,overline:e.textDecoration===&quot;overline&quot;,&quot;line-through&quot;:e.textDecoration===&quot;line-through&quot;}},typeof exports!=&quot;undefined&quot;&amp;&amp;(exports.Cufon=Cufon);var JSON;JSON||(JSON={}),function(){&quot;use strict&quot;;function f(e){return e&lt;10?&quot;0&quot;+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?&#39;&quot;&#39;+e.replace(escapable,function(e){var t=meta[e];return typeof t==&quot;string&quot;?t:&quot;\\u&quot;+(&quot;0000&quot;+e.charCodeAt(0).toString(16)).slice(-4)})+&#39;&quot;&#39;:&#39;&quot;&#39;+e+&#39;&quot;&#39;}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&amp;&amp;typeof a==&quot;object&quot;&amp;&amp;typeof a.toJSON==&quot;function&quot;&amp;&amp;(a=a.toJSON(e)),typeof rep==&quot;function&quot;&amp;&amp;(a=rep.call(t,e,a));switch(typeof a){case&quot;string&quot;:return quote(a);case&quot;number&quot;:return isFinite(a)?String(a):&quot;null&quot;;case&quot;boolean&quot;:case&quot;null&quot;:return String(a);case&quot;object&quot;:if(!a)return&quot;null&quot;;gap+=indent,u=[];if(Object.prototype.toString.apply(a)===&quot;[object Array]&quot;){s=a.length;for(n=0;n&lt;s;n+=1)u[n]=str(n,a)||&quot;null&quot;;return i=u.length===0?&quot;[]&quot;:gap?&quot;[\n&quot;+gap+u.join(&quot;,\n&quot;+gap)+&quot;\n&quot;+o+&quot;]&quot;:&quot;[&quot;+u.join(&quot;,&quot;)+&quot;]&quot;,gap=o,i}if(rep&amp;&amp;typeof rep==&quot;object&quot;){s=rep.length;for(n=0;n&lt;s;n+=1)typeof rep[n]==&quot;string&quot;&amp;&amp;(r=rep[n],i=str(r,a),i&amp;&amp;u.push(quote(r)+(gap?&quot;: &quot;:&quot;:&quot;)+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&amp;&amp;(i=str(r,a),i&amp;&amp;u.push(quote(r)+(gap?&quot;: &quot;:&quot;:&quot;)+i));return i=u.length===0?&quot;{}&quot;:gap?&quot;{\n&quot;+gap+u.join(&quot;,\n&quot;+gap)+&quot;\n&quot;+o+&quot;}&quot;:&quot;{&quot;+u.join(&quot;,&quot;)+&quot;}&quot;,gap=o,i}}typeof Date.prototype.toJSON!=&quot;function&quot;&amp;&amp;(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+&quot;-&quot;+f(this.getUTCMonth()+1)+&quot;-&quot;+f(this.getUTCDate())+&quot;T&quot;+f(this.getUTCHours())+&quot;:&quot;+f(this.getUTCMinutes())+&quot;:&quot;+f(this.getUTCSeconds())+&quot;Z&quot;:null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\&quot;\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={&quot;\b&quot;:&quot;\\b&quot;,&quot;	&quot;:&quot;\\t&quot;,&quot;\n&quot;:&quot;\\n&quot;,&quot;\f&quot;:&quot;\\f&quot;,&quot;\r&quot;:&quot;\\r&quot;,&#39;&quot;&#39;:&#39;\\&quot;&#39;,&quot;\\&quot;:&quot;\\\\&quot;},rep;typeof JSON.stringify!=&quot;function&quot;&amp;&amp;(JSON.stringify=function(e,t,n){var r;gap=&quot;&quot;,indent=&quot;&quot;;if(typeof n==&quot;number&quot;)for(r=0;r&lt;n;r+=1)indent+=&quot; &quot;;else typeof n==&quot;string&quot;&amp;&amp;(indent=n);rep=t;if(!t||typeof t==&quot;function&quot;||typeof t==&quot;object&quot;&amp;&amp;typeof t.length==&quot;number&quot;)return str(&quot;&quot;,{&quot;&quot;:e});throw new Error(&quot;JSON.stringify&quot;)}),typeof JSON.parse!=&quot;function&quot;&amp;&amp;(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&amp;&amp;typeof i==&quot;object&quot;)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&amp;&amp;(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&amp;&amp;(text=text.replace(cx,function(e){return&quot;\\u&quot;+(&quot;0000&quot;+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:[&quot;\\\/bfnrt]|u[0-9a-fA-F]{4})/g,&quot;@&quot;).replace(/&quot;[^&quot;\\\n\r]*&quot;|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,&quot;]&quot;).replace(/(?:^|:|,)(?:\s*\[)+/g,&quot;&quot;)))return j=eval(&quot;(&quot;+text+&quot;)&quot;),typeof reviver==&quot;function&quot;?walk({&quot;&quot;:j},&quot;&quot;):j;throw new SyntaxError(&quot;JSON.parse&quot;)})}(),fabric.log=function(){},fabric.warn=function(){},typeof console!=&quot;undefined&quot;&amp;&amp;(typeof console.log!=&quot;undefined&quot;&amp;&amp;console.log.apply&amp;&amp;(fabric.log=function(){return console.log.apply(console,arguments)}),typeof console.warn!=&quot;undefined&quot;&amp;&amp;console.warn.apply&amp;&amp;(fabric.warn=function(){return console.warn.apply(console,arguments)})),fabric.Observable={observe:function(e,t){this.__eventListeners||(this.__eventListeners={});if(arguments.length===1)for(var n in e)this.on(n,e[n]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(t)},stopObserving:function(e,t){this.__eventListeners||(this.__eventListeners={}),this.__eventListeners[e]&amp;&amp;(t?fabric.util.removeFromArray(this.__eventListeners[e],t):this.__eventListeners[e].length=0)},fire:function(e,t){this.__eventListeners||(this.__eventListeners={});var n=this.__eventListeners[e];if(!n)return;for(var r=0,i=n.length;r&lt;i;r++)n[r](t||{})}},fabric.Observable.on=fabric.Observable.observe,fabric.Observable.off=fabric.Observable.stopObserving,fabric.Observable.trigger=fabric.Observable.fire,function(){function n(e,t){var n=e.indexOf(t);return n!==-1&amp;&amp;e.splice(n,1),e}function r(e,t){return Math.floor(Math.random()*(t-e+1))+e}function s(e){return e*i}function o(e){return e/i}function u(e,t,n){var r=Math.sin(n),i=Math.cos(n);e.subtractEquals(t);var s=e.x*i-e.y*r,o=e.x*r+e.y*i;return(new fabric.Point(s,o)).addEquals(t)}function a(e,t){return parseFloat(Number(e).toFixed(t))}function f(){return!1}function l(e){e||(e={});var t=+(new Date),n=e.duration||500,r=t+n,i,s=e.onChange||function(){},o=e.abort||function(){return!1},u=e.easing||function(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t},a=&quot;startValue&quot;in e?e.startValue:0,f=&quot;endValue&quot;in e?e.endValue:100,l=e.byValue||f-a;e.onStart&amp;&amp;e.onStart(),function c(){i=+(new Date);var f=i&gt;r?n:i-t;s(u(f,a,l,n));if(i&gt;r||o()){e.onComplete&amp;&amp;e.onComplete();return}h(c)}()}function p(e,t,n){if(e){var r=new Image;r.onload=function(){t&amp;&amp;t.call(n,r),r=r.onload=null},r.src=e}else t&amp;&amp;t.call(n,e)}function d(e,t){function n(e){return fabric[fabric.util.string.camelize(fabric.util.string.capitalize(e))]}function r(){++s===o&amp;&amp;t&amp;&amp;t(i)}var i=[],s=0,o=e.length;e.forEach(function(e,t){if(!e.type)return;var s=n(e.type);s.async?s.fromObject(e,function(e,n){n||(i[t]=e),r()}):(i[t]=s.fromObject(e),r())})}function v(e,t,n){var r;if(e.length&gt;1){var i=e.some(function(e){return e.type===&quot;text&quot;});i?(r=new fabric.Group([],t),e.reverse().forEach(function(e){e.cx&amp;&amp;(e.left=e.cx),e.cy&amp;&amp;(e.top=e.cy),r.addWithUpdate(e)})):r=new fabric.PathGroup(e,t)}else r=e[0];return typeof n!=&quot;undefined&quot;&amp;&amp;r.setSourcePath(n),r}function m(e,t,n){if(n&amp;&amp;Object.prototype.toString.call(n)===&quot;[object Array]&quot;)for(var r=0,i=n.length;r&lt;i;r++)t[n[r]]=e[n[r]]}function g(n,r,i,s,o,u){var a=s-r,f=o-i,l=e(a*a+f*f),c=t(f,a),h=u.length,p=0,d=!0;n.save(),n.translate(r,i),n.moveTo(0,0),n.rotate(c),r=0;while(l&gt;r)r+=u[p++%h],r&gt;l&amp;&amp;(r=l),n[d?&quot;lineTo&quot;:&quot;moveTo&quot;](r,0),d=!d;n.restore()}function y(e){return e||(e=fabric.document.createElement(&quot;canvas&quot;)),!e.getContext&amp;&amp;typeof G_vmlCanvasManager!=&quot;undefined&quot;&amp;&amp;G_vmlCanvasManager.initElement(e),e}function b(e){var t=e.prototype;for(var n=t.stateProperties.length;n--;){var r=t.stateProperties[n],i=r.charAt(0).toUpperCase()+r.slice(1),s=&quot;set&quot;+i,o=&quot;get&quot;+i;t[o]||(t[o]=function(e){return new Function(&#39;return this.get(&quot;&#39;+e+&#39;&quot;)&#39;)}(r)),t[s]||(t[s]=function(e){return new Function(&quot;value&quot;,&#39;return this.set(&quot;&#39;+e+&#39;&quot;, value)&#39;)}(r))}}function w(e,t){t.save(),t.beginPath(),e.clipTo(t),t.clip()}var e=Math.sqrt,t=Math.atan2;fabric.util={};var i=Math.PI/180,c=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(e){fabric.window.setTimeout(e,1e3/60)},h=function(){return c.apply(fabric.window,arguments)};fabric.util.removeFromArray=n,fabric.util.degreesToRadians=s,fabric.util.radiansToDegrees=o,fabric.util.rotatePoint=u,fabric.util.toFixed=a,fabric.util.getRandomInt=r,fabric.util.falseFunction=f,fabric.util.animate=l,fabric.util.requestAnimFrame=h,fabric.util.loadImage=p,fabric.util.enlivenObjects=d,fabric.util.groupSVGElements=v,fabric.util.populateWithProperties=m,fabric.util.drawDashedLine=g,fabric.util.createCanvasElement=y,fabric.util.createAccessors=b,fabric.util.clipContext=w}(),function(){function t(t,n){var r=e.call(arguments,2),i=[];for(var s=0,o=t.length;s&lt;o;s++)i[s]=r.length?t[s][n].apply(t[s],r):t[s][n].call(t[s]);return i}function n(e,t){if(!e||e.length===0)return undefined;var n=e.length-1,r=t?e[n][t]:e[n];if(t)while(n--)e[n][t]&gt;=r&amp;&amp;(r=e[n][t]);else while(n--)e[n]&gt;=r&amp;&amp;(r=e[n]);return r}function r(e,t){if(!e||e.length===0)return undefined;var n=e.length-1,r=t?e[n][t]:e[n];if(t)while(n--)e[n][t]&lt;r&amp;&amp;(r=e[n][t]);else while(n--)e[n]&lt;r&amp;&amp;(r=e[n]);return r}var e=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(this===void 0||this===null)throw new TypeError;var t=Object(this),n=t.length&gt;&gt;&gt;0;if(n===0)return-1;var r=0;arguments.length&gt;0&amp;&amp;(r=Number(arguments[1]),r!==r?r=0:r!==0&amp;&amp;r!==Number.POSITIVE_INFINITY&amp;&amp;r!==Number.NEGATIVE_INFINITY&amp;&amp;(r=(r&gt;0||-1)*Math.floor(Math.abs(r))));if(r&gt;=n)return-1;var i=r&gt;=0?r:Math.max(n-Math.abs(r),0);for(;i&lt;n;i++)if(i in t&amp;&amp;t[i]===e)return i;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=0,r=this.length&gt;&gt;&gt;0;n&lt;r;n++)n in this&amp;&amp;e.call(t,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(e,t){var n=[];for(var r=0,i=this.length&gt;&gt;&gt;0;r&lt;i;r++)r in this&amp;&amp;(n[r]=e.call(t,this[r],r,this));return n}),Array.prototype.every||(Array.prototype.every=function(e,t){for(var n=0,r=this.length&gt;&gt;&gt;0;n&lt;r;n++)if(n in this&amp;&amp;!e.call(t,this[n],n,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e,t){for(var n=0,r=this.length&gt;&gt;&gt;0;n&lt;r;n++)if(n in this&amp;&amp;e.call(t,this[n],n,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(e,t){var n=[],r;for(var i=0,s=this.length&gt;&gt;&gt;0;i&lt;s;i++)i in this&amp;&amp;(r=this[i],e.call(t,r,i,this)&amp;&amp;n.push(r));return n}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=this.length&gt;&gt;&gt;0,n=0,r;if(arguments.length&gt;1)r=arguments[1];else do{if(n in this){r=this[n++];break}if(++n&gt;=t)throw new TypeError}while(!0);for(;n&lt;t;n++)n in this&amp;&amp;(r=e.call(null,r,this[n],n,this));return r}),fabric.util.array={invoke:t,min:r,max:n}}(),function(){function e(e,t){for(var n in t)e[n]=t[n];return e}function t(t){return e({},t)}fabric.util.object={extend:e,clone:t}}(),function(){function e(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():&quot;&quot;})}function t(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function n(e){return e.replace(/&amp;/g,&quot;&amp;amp;&quot;).replace(/&quot;/g,&quot;&amp;quot;&quot;).replace(/&#39;/g,&quot;&amp;apos;&quot;).replace(/&lt;/g,&quot;&amp;lt;&quot;).replace(/&gt;/g,&quot;&amp;gt;&quot;)}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,&quot;&quot;).replace(/[\s\xA0]+$/,&quot;&quot;)}),fabric.util.string={camelize:e,capitalize:t,escapeXml:n}}(),function(){var e=Array.prototype.slice,t=Function.prototype.apply,n=function(){};Function.prototype.bind||(Function.prototype.bind=function(r){var i=this,s=e.call(arguments,1),o;return s.length?o=function(){return t.call(i,this instanceof n?this:r,s.concat(e.call(arguments)))}:o=function(){return t.call(i,this instanceof n?this:r,arguments)},n.prototype=this.prototype,o.prototype=new n,o})}(),function(){function i(){}function s(t){var n=this.constructor.superclass.prototype[t];return arguments.length&gt;1?n.apply(this,e.call(arguments,1)):n.call(this)}function o(){function u(){this.initialize.apply(this,arguments)}var n=null,o=e.call(arguments,0);typeof o[0]==&quot;function&quot;&amp;&amp;(n=o.shift()),u.superclass=n,u.subclasses=[],n&amp;&amp;(i.prototype=n.prototype,u.prototype=new i,n.subclasses.push(u));for(var a=0,f=o.length;a&lt;f;a++)r(u,o[a],n);return u.prototype.initialize||(u.prototype.initialize=t),u.prototype.constructor=u,u.prototype.callSuper=s,u}var e=Array.prototype.slice,t=function(){},n=function(){for(var e in{toString:1})if(e===&quot;toString&quot;)return!1;return!0}(),r=function(e,t,r){for(var i in t)i in e.prototype&amp;&amp;typeof e.prototype[i]==&quot;function&quot;&amp;&amp;(t[i]+&quot;&quot;).indexOf(&quot;callSuper&quot;)&gt;-1?e.prototype[i]=function(e){return function(){var n=this.constructor.superclass;this.constructor.superclass=r;var i=t[e].apply(this,arguments);this.constructor.superclass=n;if(e!==&quot;initialize&quot;)return i}}(i):e.prototype[i]=t[i],n&amp;&amp;(t.toString!==Object.prototype.toString&amp;&amp;(e.prototype.toString=t.toString),t.valueOf!==Object.prototype.valueOf&amp;&amp;(e.prototype.valueOf=t.valueOf))};fabric.util.createClass=o}(),function(){function e(e){var t=Array.prototype.slice.call(arguments,1),n,r,i=t.length;for(r=0;r&lt;i;r++){n=typeof e[t[r]];if(!/^(?:function|object|unknown)$/.test(n))return!1}return!0}function i(e,t){return{handler:t,wrappedHandler:s(e,t)}}function s(e,t){return function(r){t.call(n(e),r||fabric.window.event)}}function o(e,t){return function(n){if(l[e]&amp;&amp;l[e][t]){var r=l[e][t];for(var i=0,s=r.length;i&lt;s;i++)r[i].call(this,n||fabric.window.event)}}}function p(e,t){e||(e=fabric.window.event);var n=e.target||(typeof e.srcElement!=&quot;unknown&quot;?e.srcElement:null),r=fabric.document.body||{scrollLeft:0,scrollTop:0},i=fabric.document.documentElement,s=n,o=0,u=0,a;while(n&amp;&amp;n.parentNode&amp;&amp;!a)n=n.parentNode,n!==fabric.document&amp;&amp;fabric.util.getElementPosition(n)===&quot;fixed&quot;&amp;&amp;(a=n),n!==fabric.document&amp;&amp;s!==t&amp;&amp;fabric.util.getElementPosition(n)===&quot;absolute&quot;?(o=0,u=0):n===fabric.document&amp;&amp;s!==t?(o=r.scrollLeft||i.scrollLeft||0,u=r.scrollTop||i.scrollTop||0):(o+=n.scrollLeft||0,u+=n.scrollTop||0);return{x:d(e)+o,y:v(e)+u}}var t=function(){var e=0;return function(t){return t.__uniqueID||(t.__uniqueID=&quot;uniqueID__&quot;+e++)}}(),n,r;(function(){var e={};n=function(t){return e[t]},r=function(t,n){e[t]=n}})();var u=e(fabric.document.documentElement,&quot;addEventListener&quot;,&quot;removeEventListener&quot;)&amp;&amp;e(fabric.window,&quot;addEventListener&quot;,&quot;removeEventListener&quot;),a=e(fabric.document.documentElement,&quot;attachEvent&quot;,&quot;detachEvent&quot;)&amp;&amp;e(fabric.window,&quot;attachEvent&quot;,&quot;detachEvent&quot;),f={},l={},c,h;u?(c=function(e,t,n){e.addEventListener(t,n,!1)},h=function(e,t,n){e.removeEventListener(t,n,!1)}):a?(c=function(e,n,s){var o=t(e);r(o,e),f[o]||(f[o]={}),f[o][n]||(f[o][n]=[]);var u=i(o,s);f[o][n].push(u),e.attachEvent(&quot;on&quot;+n,u.wrappedHandler)},h=function(e,n,r){var i=t(e),s;if(f[i]&amp;&amp;f[i][n])for(var o=0,u=f[i][n].length;o&lt;u;o++)s=f[i][n][o],s&amp;&amp;s.handler===r&amp;&amp;(e.detachEvent(&quot;on&quot;+n,s.wrappedHandler),f[i][n][o]=null)}):(c=function(e,n,r){var i=t(e);l[i]||(l[i]={});if(!l[i][n]){l[i][n]=[];var s=e[&quot;on&quot;+n];s&amp;&amp;l[i][n].push(s),e[&quot;on&quot;+n]=o(i,n)}l[i][n].push(r)},h=function(e,n,r){var i=t(e);if(l[i]&amp;&amp;l[i][n]){var s=l[i][n];for(var o=0,u=s.length;o&lt;u;o++)s[o]===r&amp;&amp;s.splice(o,1)}}),fabric.util.addListener=c,fabric.util.removeListener=h;var d=function(e){return typeof e.clientX!=&quot;unknown&quot;?e.clientX:0},v=function(e){return typeof e.clientY!=&quot;unknown&quot;?e.clientY:0};fabric.isTouchSupported&amp;&amp;(d=function(e){return e.type!==&quot;touchend&quot;?e.touches&amp;&amp;e.touches[0]?e.touches[0].pageX-(e.touches[0].pageX-e.touches[0].clientX)||e.clientX:e.clientX:e.changedTouches&amp;&amp;e.changedTouches[0]?e.changedTouches[0].pageX-(e.changedTouches[0].pageX-e.changedTouches[0].clientX)||e.clientX:e.clientX},v=function(e){return e.type!==&quot;touchend&quot;?e.touches&amp;&amp;e.touches[0]?e.touches[0].pageY-(e.touches[0].pageY-e.touches[0].clientY)||e.clientY:e.clientY:e.changedTouches&amp;&amp;e.changedTouches[0]?e.changedTouches[0].pageY-(e.changedTouches[0].pageY-e.changedTouches[0].clientY)||e.clientY:e.clientY}),fabric.util.getPointer=p,fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function e(e,t){var n=e.style;if(!n)return e;if(typeof t==&quot;string&quot;)return e.style.cssText+=&quot;;&quot;+t,t.indexOf(&quot;opacity&quot;)&gt;-1?s(e,t.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var r in t)if(r===&quot;opacity&quot;)s(e,t[r]);else{var i=r===&quot;float&quot;||r===&quot;cssFloat&quot;?typeof n.styleFloat==&quot;undefined&quot;?&quot;cssFloat&quot;:&quot;styleFloat&quot;:r;n[i]=t[r]}return e}var t=fabric.document.createElement(&quot;div&quot;),n=typeof t.style.opacity==&quot;string&quot;,r=typeof t.style.filter==&quot;string&quot;,i=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(e){return e};n?s=function(e,t){return e.style.opacity=t,e}:r&amp;&amp;(s=function(e,t){var n=e.style;return e.currentStyle&amp;&amp;!e.currentStyle.hasLayout&amp;&amp;</div><div class='line' id='LC2'>(n.zoom=1),i.test(n.filter)?(t=t&gt;=.9999?&quot;&quot;:&quot;alpha(opacity=&quot;+t*100+&quot;)&quot;,n.filter=n.filter.replace(i,t)):n.filter+=&quot; alpha(opacity=&quot;+t*100+&quot;)&quot;,e}),fabric.util.setStyle=e}(),function(){function t(e){return typeof e==&quot;string&quot;?fabric.document.getElementById(e):e}function s(e,t){var n=fabric.document.createElement(e);for(var r in t)r===&quot;class&quot;?n.className=t[r]:r===&quot;for&quot;?n.htmlFor=t[r]:n.setAttribute(r,t[r]);return n}function o(e,t){(&quot; &quot;+e.className+&quot; &quot;).indexOf(&quot; &quot;+t+&quot; &quot;)===-1&amp;&amp;(e.className+=(e.className?&quot; &quot;:&quot;&quot;)+t)}function u(e,t,n){return typeof t==&quot;string&quot;&amp;&amp;(t=s(t,n)),e.parentNode&amp;&amp;e.parentNode.replaceChild(t,e),t.appendChild(e),t}function a(e){var t=0,n=0;do t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent;while(e);return{left:n,top:t}}var e=Array.prototype.slice,n=function(t){return e.call(t,0)},r;try{r=n(fabric.document.childNodes)instanceof Array}catch(i){}r||(n=function(e){var t=new Array(e.length),n=e.length;while(n--)t[n]=e[n];return t});var f;fabric.document.defaultView&amp;&amp;fabric.document.defaultView.getComputedStyle?f=function(e){return fabric.document.defaultView.getComputedStyle(e,null).position}:f=function(e){var t=e.style.position;return!t&amp;&amp;e.currentStyle&amp;&amp;(t=e.currentStyle.position),t},function(){function n(e){return typeof e.onselectstart!=&quot;undefined&quot;&amp;&amp;(e.onselectstart=fabric.util.falseFunction),t?e.style[t]=&quot;none&quot;:typeof e.unselectable==&quot;string&quot;&amp;&amp;(e.unselectable=&quot;on&quot;),e}function r(e){return typeof e.onselectstart!=&quot;undefined&quot;&amp;&amp;(e.onselectstart=null),t?e.style[t]=&quot;&quot;:typeof e.unselectable==&quot;string&quot;&amp;&amp;(e.unselectable=&quot;&quot;),e}var e=fabric.document.documentElement.style,t=&quot;userSelect&quot;in e?&quot;userSelect&quot;:&quot;MozUserSelect&quot;in e?&quot;MozUserSelect&quot;:&quot;WebkitUserSelect&quot;in e?&quot;WebkitUserSelect&quot;:&quot;KhtmlUserSelect&quot;in e?&quot;KhtmlUserSelect&quot;:&quot;&quot;;fabric.util.makeElementUnselectable=n,fabric.util.makeElementSelectable=r}(),function(){function e(e,t){var n=fabric.document.getElementsByTagName(&quot;head&quot;)[0],r=fabric.document.createElement(&quot;script&quot;),i=!0;r.type=&quot;text/javascript&quot;,r.setAttribute(&quot;runat&quot;,&quot;server&quot;),r.onload=r.onreadystatechange=function(e){if(i){if(typeof this.readyState==&quot;string&quot;&amp;&amp;this.readyState!==&quot;loaded&quot;&amp;&amp;this.readyState!==&quot;complete&quot;)return;i=!1,t(e||fabric.window.event),r=r.onload=r.onreadystatechange=null}},r.src=e,n.appendChild(r)}fabric.util.getScript=e}(),fabric.util.getById=t,fabric.util.toArray=n,fabric.util.makeElement=s,fabric.util.addClass=o,fabric.util.wrapElement=u,fabric.util.getElementOffset=a,fabric.util.getElementPosition=f}(),function(){function e(e,t){return e+(/\?/.test(e)?&quot;&amp;&quot;:&quot;?&quot;)+t}function n(){}function r(r,i){i||(i={});var s=i.method?i.method.toUpperCase():&quot;GET&quot;,o=i.onComplete||function(){},u=t(),a;return u.onreadystatechange=function(){u.readyState===4&amp;&amp;(o(u),u.onreadystatechange=n)},s===&quot;GET&quot;&amp;&amp;(a=null,typeof i.parameters==&quot;string&quot;&amp;&amp;(r=e(r,i.parameters))),u.open(s,r,!0),(s===&quot;POST&quot;||s===&quot;PUT&quot;)&amp;&amp;u.setRequestHeader(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded&quot;),u.send(a),u}var t=function(){var e=[function(){return new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;)},function(){return new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;)},function(){return new ActiveXObject(&quot;Msxml2.XMLHTTP.3.0&quot;)},function(){return new XMLHttpRequest}];for(var t=e.length;t--;)try{var n=e[t]();if(n)return e[t]}catch(r){}}();fabric.util.request=r}(),function(){function e(e,t,n,r){return n*(e/=r)*e+t}function t(e,t,n,r){return-n*(e/=r)*(e-2)+t}function n(e,t,n,r){return e/=r/2,e&lt;1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}function r(e,t,n,r){return n*(e/=r)*e*e+t}function i(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}function s(e,t,n,r){return e/=r/2,e&lt;1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t}function o(e,t,n,r){return n*(e/=r)*e*e*e+t}function u(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t}function a(e,t,n,r){return e/=r/2,e&lt;1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t}function f(e,t,n,r){return n*(e/=r)*e*e*e*e+t}function l(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t}function c(e,t,n,r){return e/=r/2,e&lt;1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t}function h(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t}function p(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t}function d(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t}function v(e,t,n,r){return e===0?t:n*Math.pow(2,10*(e/r-1))+t}function m(e,t,n,r){return e===r?t+n:n*(-Math.pow(2,-10*e/r)+1)+t}function g(e,t,n,r){return e===0?t:e===r?t+n:(e/=r/2,e&lt;1?n/2*Math.pow(2,10*(e-1))+t:n/2*(-Math.pow(2,-10*--e)+2)+t)}function y(e,t,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+t}function b(e,t,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+t}function w(e,t,n,r){return e/=r/2,e&lt;1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t}function E(e,t,n,r){var i=1.70158,s=0,o=n;return e===0?t:(e/=r,e===1?t+n:(s||(s=r*.3),o&lt;Math.abs(n)?(o=n,i=s/4):i=s/(2*Math.PI)*Math.asin(n/o),-(o*Math.pow(2,10*(e-=1))*Math.sin((e*r-i)*2*Math.PI/s))+t))}function S(e,t,n,r){var i=1.70158,s=0,o=n;return e===0?t:(e/=r,e===1?t+n:(s||(s=r*.3),o&lt;Math.abs(n)?(o=n,i=s/4):i=s/(2*Math.PI)*Math.asin(n/o),o*Math.pow(2,-10*e)*Math.sin((e*r-i)*2*Math.PI/s)+n+t))}function x(e,t,n,r){var i=1.70158,s=0,o=n;return e===0?t:(e/=r/2,e===2?t+n:(s||(s=r*.3*1.5),o&lt;Math.abs(n)?(o=n,i=s/4):i=s/(2*Math.PI)*Math.asin(n/o),e&lt;1?-0.5*o*Math.pow(2,10*(e-=1))*Math.sin((e*r-i)*2*Math.PI/s)+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*r-i)*2*Math.PI/s)*.5+n+t))}function T(e,t,n,r,i){return i===undefined&amp;&amp;(i=1.70158),n*(e/=r)*e*((i+1)*e-i)+t}function N(e,t,n,r,i){return i===undefined&amp;&amp;(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t}function C(e,t,n,r,i){return i===undefined&amp;&amp;(i=1.70158),e/=r/2,e&lt;1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t}function k(e,t,n,r){return n-L(r-e,0,n,r)+t}function L(e,t,n,r){return(e/=r)&lt;1/2.75?n*7.5625*e*e+t:e&lt;2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e&lt;2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t}function A(e,t,n,r){return e&lt;r/2?k(e*2,0,n,r)*.5+t:L(e*2-r,0,n,r)*.5+n*.5+t}fabric.util.ease={easeInQuad:e,easeOutQuad:t,easeInOutQuad:n,easeInCubic:r,easeOutCubic:i,easeInOutCubic:s,easeInQuart:o,easeOutQuart:u,easeInOutQuart:a,easeInQuint:f,easeOutQuint:l,easeInOutQuint:c,easeInSine:h,easeOutSine:p,easeInOutSine:d,easeInExpo:v,easeOutExpo:m,easeInOutExpo:g,easeInCirc:y,easeOutCirc:b,easeInOutCirc:w,easeInElastic:E,easeOutElastic:S,easeInOutElastic:x,easeInBack:T,easeOutBack:N,easeInOutBack:C,easeInBounce:k,easeOutBounce:L,easeInOutBounce:A}}(),function(e){&quot;use strict&quot;;function o(e){return e in s?s[e]:e}function u(e,r){if(!e)return;var i,s,u={};e.parentNode&amp;&amp;/^g$/i.test(e.parentNode.nodeName)&amp;&amp;(u=t.parseAttributes(e.parentNode,r));var a=r.reduce(function(n,r){return i=e.getAttribute(r),s=parseFloat(i),i&amp;&amp;((r===&quot;fill&quot;||r===&quot;stroke&quot;)&amp;&amp;i===&quot;none&quot;&amp;&amp;(i=&quot;&quot;),r===&quot;fill-rule&quot;&amp;&amp;(i=i===&quot;evenodd&quot;?&quot;destination-over&quot;:i),r===&quot;transform&quot;&amp;&amp;(i=t.parseTransformAttribute(i)),r=o(r),n[r]=isNaN(s)?i:s),n},{});return a=n(a,n(p(e),t.parseStyleAttribute(e))),n(u,a)}function a(e){if(!e)return null;e=e.trim();var t=e.indexOf(&quot;,&quot;)&gt;-1;e=e.split(/\s+/);var n=[],r,i;if(t){r=0,i=e.length;for(;r&lt;i;r++){var s=e[r].split(&quot;,&quot;);n.push({x:parseFloat(s[0]),y:parseFloat(s[1])})}}else{r=0,i=e.length;for(;r&lt;i;r+=2)n.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])})}return n.length%2!==0,n}function f(e){var t={},n=e.getAttribute(&quot;style&quot;);if(!n)return t;if(typeof n==&quot;string&quot;)n=n.replace(/;$/,&quot;&quot;).split(&quot;;&quot;).forEach(function(e){var n=e.split(&quot;:&quot;),r=n[1].trim(),i=parseFloat(r);t[o(n[0].trim().toLowerCase())]=isNaN(i)?r:i});else for(var r in n){if(typeof n[r]==&quot;undefined&quot;)continue;var i=parseFloat(n[r]);t[o(r.toLowerCase())]=isNaN(i)?n[r]:i}return t}function l(e){for(var n=e.length;n--;){var r=e[n].get(&quot;fill&quot;);if(/^url\(/.test(r)){var i=r.slice(5,r.length-1);t.gradientDefs[i]&amp;&amp;e[n].set(&quot;fill&quot;,t.Gradient.fromElement(t.gradientDefs[i],e[n]))}}}function c(e,n,i,s){function a(){--u===0&amp;&amp;(o=o.filter(function(e){return e!=null}),l(o),n(o))}var o=new Array(e.length),u=e.length;for(var f=0,c,h=e.length;f&lt;h;f++){c=e[f];var p=t[r(c.tagName)];if(p&amp;&amp;p.fromElement)try{if(p.async)p.fromElement(c,function(e,t){return function(n){s&amp;&amp;s(t,n),o.splice(e,0,n),a()}}(f),i);else{var d=p.fromElement(c,i);s&amp;&amp;s(c,d),o.splice(f,0,d),a()}}catch(v){t.log(v)}else a()}}function h(e){var t=e.getElementsByTagName(&quot;style&quot;),n={},r;for(var i=0,s=t.length;i&lt;s;i++){var o=t[0].textContent;o=o.replace(/\/\*[\s\S]*?\*\//g,&quot;&quot;),r=o.match(/[^{]*\{[\s\S]*?\}/g),r=r.map(function(e){return e.trim()}),r.forEach(function(e){var t=e.match(/([\s\S]*?)\s*\{([^}]*)\}/);e=t[1];var r=t[2].trim(),i=r.replace(/;$/,&quot;&quot;).split(/\s*;\s*/);n[e]||(n[e]={});for(var s=0,o=i.length;s&lt;o;s++){var u=i[s].split(/\s*:\s*/),a=u[0],f=u[1];n[e][a]=f}})}return n}function p(e){var n=e.nodeName,r=e.getAttribute(&quot;class&quot;),i=e.getAttribute(&quot;id&quot;),s={};for(var o in t.cssRules){var u=r&amp;&amp;(new RegExp(&quot;^\\.&quot;+r)).test(o)||i&amp;&amp;(new RegExp(&quot;^#&quot;+i)).test(o)||(new RegExp(&quot;^&quot;+n)).test(o);if(u)for(var a in t.cssRules[o])s[a]=t.cssRules[o][a]}return s}function v(e,n,r){function i(i){var s=i.responseXML;!s.documentElement&amp;&amp;t.window.ActiveXObject&amp;&amp;i.responseText&amp;&amp;(s=new ActiveXObject(&quot;Microsoft.XMLDOM&quot;),s.async=&quot;false&quot;,s.loadXML(i.responseText.replace(/&lt;!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?&gt;/i,&quot;&quot;)));if(!s.documentElement)return;t.parseSVGDocument(s.documentElement,function(r,i){d.set(e,{objects:t.util.array.invoke(r,&quot;toObject&quot;),options:i}),n(r,i)},r)}e=e.replace(/^\n\s*/,&quot;&quot;).trim(),d.has(e,function(r){r?d.get(e,function(e){var t=m(e);n(t.objects,t.options)}):new t.util.request(e,{method:&quot;get&quot;,onComplete:i})})}function m(e){var n=e.objects,i=e.options;return n=n.map(function(e){return t[r(e.type)].fromObject(e)}),{objects:n,options:i}}function g(e,n,r){e=e.trim();var i;if(typeof DOMParser!=&quot;undefined&quot;){var s=new DOMParser;s&amp;&amp;s.parseFromString&amp;&amp;(i=s.parseFromString(e,&quot;text/xml&quot;))}else t.window.ActiveXObject&amp;&amp;(i=new ActiveXObject(&quot;Microsoft.XMLDOM&quot;),i.async=&quot;false&quot;,i.loadXML(e.replace(/&lt;!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?&gt;/i,&quot;&quot;)));t.parseSVGDocument(i.documentElement,function(e,t){n(e,t)},r)}function y(e){var t=&quot;&quot;;for(var n=0,r=e.length;n&lt;r;n++){if(e[n].type!==&quot;text&quot;||!e[n].path)continue;t+=[&quot;@font-face {&quot;,&quot;font-family: &quot;,e[n].fontFamily,&quot;; &quot;,&quot;src: url(&#39;&quot;,e[n].path,&quot;&#39;)&quot;,&quot;}&quot;].join(&quot;&quot;)}return t&amp;&amp;(t=[&#39;&lt;style type=&quot;text/css&quot;&gt;&#39;,&quot;&lt;![CDATA[&quot;,t,&quot;]]&gt;&quot;,&quot;&lt;/style&gt;&quot;].join(&quot;&quot;)),t}function b(e){var t=&quot;&quot;;return e.backgroundColor&amp;&amp;e.backgroundColor.source&amp;&amp;(t=[&#39;&lt;pattern x=&quot;0&quot; y=&quot;0&quot; id=&quot;backgroundColorPattern&quot; &#39;,&#39;width=&quot;&#39;,e.backgroundColor.source.width,&#39;&quot; height=&quot;&#39;,e.backgroundColor.source.height,&#39;&quot; patternUnits=&quot;userSpaceOnUse&quot;&gt;&#39;,&#39;&lt;image x=&quot;0&quot; y=&quot;0&quot; &#39;,&#39;width=&quot;&#39;,e.backgroundColor.source.width,&#39;&quot; height=&quot;&#39;,e.backgroundColor.source.height,&#39;&quot; xlink:href=&quot;&#39;,e.backgroundColor.source.src,&#39;&quot;&gt;&lt;/image&gt;&lt;/pattern&gt;&#39;].join(&quot;&quot;)),t}var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.string.capitalize,i=t.util.object.clone,s={cx:&quot;left&quot;,x:&quot;left&quot;,cy:&quot;top&quot;,y:&quot;top&quot;,r:&quot;radius&quot;,&quot;fill-opacity&quot;:&quot;opacity&quot;,&quot;fill-rule&quot;:&quot;fillRule&quot;,&quot;stroke-width&quot;:&quot;strokeWidth&quot;,transform:&quot;transformMatrix&quot;,&quot;text-decoration&quot;:&quot;textDecoration&quot;,&quot;font-size&quot;:&quot;fontSize&quot;,&quot;font-weight&quot;:&quot;fontWeight&quot;,&quot;font-style&quot;:&quot;fontStyle&quot;,&quot;font-family&quot;:&quot;fontFamily&quot;};t.parseTransformAttribute=function(){function e(e,t){var n=t[0];e[0]=Math.cos(n),e[1]=Math.sin(n),e[2]=-Math.sin(n),e[3]=Math.cos(n)}function t(e,t){var n=t[0],r=t.length===2?t[1]:t[0];e[0]=n,e[3]=r}function n(e,t){e[2]=t[0]}function r(e,t){e[1]=t[0]}function i(e,t){e[4]=t[0],t.length===2&amp;&amp;(e[5]=t[1])}var s=[1,0,0,1,0,0],o=&quot;(?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)&quot;,u=&quot;(?:\\s+,?\\s*|,\\s*)&quot;,a=&quot;(?:(skewX)\\s*\\(\\s*(&quot;+o+&quot;)\\s*\\))&quot;,f=&quot;(?:(skewY)\\s*\\(\\s*(&quot;+o+&quot;)\\s*\\))&quot;,l=&quot;(?:(rotate)\\s*\\(\\s*(&quot;+o+&quot;)(?:&quot;+u+&quot;(&quot;+o+&quot;)&quot;+u+&quot;(&quot;+o+&quot;))?\\s*\\))&quot;,c=&quot;(?:(scale)\\s*\\(\\s*(&quot;+o+&quot;)(?:&quot;+u+&quot;(&quot;+o+&quot;))?\\s*\\))&quot;,h=&quot;(?:(translate)\\s*\\(\\s*(&quot;+o+&quot;)(?:&quot;+u+&quot;(&quot;+o+&quot;))?\\s*\\))&quot;,p=&quot;(?:(matrix)\\s*\\(\\s*(&quot;+o+&quot;)&quot;+u+&quot;(&quot;+o+&quot;)&quot;+u+&quot;(&quot;+o+&quot;)&quot;+u+&quot;(&quot;+o+&quot;)&quot;+u+&quot;(&quot;+o+&quot;)&quot;+u+&quot;(&quot;+o+&quot;)&quot;+&quot;\\s*\\))&quot;,d=&quot;(?:&quot;+p+&quot;|&quot;+h+&quot;|&quot;+c+&quot;|&quot;+l+&quot;|&quot;+a+&quot;|&quot;+f+&quot;)&quot;,v=&quot;(?:&quot;+d+&quot;(?:&quot;+u+d+&quot;)*&quot;+&quot;)&quot;,m=&quot;^\\s*(?:&quot;+v+&quot;?)\\s*$&quot;,g=new RegExp(m),y=new RegExp(d);return function(o){var u=s.concat();return!o||o&amp;&amp;!g.test(o)?u:(o.replace(y,function(s){var o=(new RegExp(d)).exec(s).filter(function(e){return e!==&quot;&quot;&amp;&amp;e!=null}),a=o[1],f=o.slice(2).map(parseFloat);switch(a){case&quot;translate&quot;:i(u,f);break;case&quot;rotate&quot;:e(u,f);break;case&quot;scale&quot;:t(u,f);break;case&quot;skewX&quot;:n(u,f);break;case&quot;skewY&quot;:r(u,f);break;case&quot;matrix&quot;:u=f}}),u)}}(),t.parseSVGDocument=function(){function s(e,t){while(e&amp;&amp;(e=e.parentNode))if(t.test(e.nodeName))return!0;return!1}var e=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/,n=&quot;(?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)&quot;,r=new RegExp(&quot;^\\s*(&quot;+n+&quot;+)\\s*,?&quot;+&quot;\\s*(&quot;+n+&quot;+)\\s*,?&quot;+&quot;\\s*(&quot;+n+&quot;+)\\s*,?&quot;+&quot;\\s*(&quot;+n+&quot;+)\\s*&quot;+&quot;$&quot;);return function(n,o,u){if(!n)return;var a=new Date,f=t.util.toArray(n.getElementsByTagName(&quot;*&quot;));if(f.length===0){f=n.selectNodes(&quot;//*[name(.)!=&#39;svg&#39;]&quot;);var l=[];for(var c=0,p=f.length;c&lt;p;c++)l[c]=f[c];f=l}var d=f.filter(function(t){return e.test(t.tagName)&amp;&amp;!s(t,/^(?:pattern|defs)$/)});if(!d||d&amp;&amp;!d.length)return;var v=n.getAttribute(&quot;viewBox&quot;),m=n.getAttribute(&quot;width&quot;),g=n.getAttribute(&quot;height&quot;),y=null,b=null,w,E;v&amp;&amp;(v=v.match(r))&amp;&amp;(w=parseInt(v[1],10),E=parseInt(v[2],10),y=parseInt(v[3],10),b=parseInt(v[4],10)),y=m?parseFloat(m):y,b=g?parseFloat(g):b;var S={width:y,height:b};t.gradientDefs=t.getGradientDefs(n),t.cssRules=h(n),t.parseElements(d,function(e){t.documentParsingTime=new Date-a,o&amp;&amp;o(e,S)},i(S),u)}}();var d={has:function(e,t){t(!1)},get:function(){},set:function(){}};n(t,{parseAttributes:u,parseElements:c,parseStyleAttribute:f,parsePointsAttribute:a,getCSSRules:h,loadSVGFromURL:v,loadSVGFromString:g,createSVGFontFacesMarkup:y,createSVGRefElementsMarkup:b})}(typeof exports!=&quot;undefined&quot;?exports:this),function(){function e(e){var t=e.getAttribute(&quot;style&quot;),n=e.getAttribute(&quot;offset&quot;),r,i;n=parseFloat(n)/(/%$/.test(n)?100:1);if(t){var s=t.split(/\s*;\s*/);s[s.length-1]===&quot;&quot;&amp;&amp;s.pop();for(var o=s.length;o--;){var u=s[o].split(/\s*:\s*/),a=u[0].trim(),f=u[1].trim();a===&quot;stop-color&quot;?r=f:a===&quot;stop-opacity&quot;&amp;&amp;(i=f)}}return r||(r=e.getAttribute(&quot;stop-color&quot;)),i||(i=e.getAttribute(&quot;stop-opacity&quot;)),r=(new fabric.Color(r)).toRgb(),{offset:n,color:r,opacity:i}}function t(e,t){for(var n in t){if(typeof t[n]==&quot;string&quot;&amp;&amp;/^\d+%$/.test(t[n])){var r=parseFloat(t[n],10);if(n===&quot;x1&quot;||n===&quot;x2&quot;||n===&quot;r2&quot;)t[n]=fabric.util.toFixed(e.width*r/100,2);else if(n===&quot;y1&quot;||n===&quot;y2&quot;)t[n]=fabric.util.toFixed(e.height*r/100,2)}if(n===&quot;x1&quot;||n===&quot;x2&quot;)t[n]-=fabric.util.toFixed(e.width/2,2);else if(n===&quot;y1&quot;||n===&quot;y2&quot;)t[n]-=fabric.util.toFixed(e.height/2,2)}}function n(e,t){for(var n in t){if(n===&quot;x1&quot;||n===&quot;x2&quot;)t[n]+=fabric.util.toFixed(e.width/2,2);else if(n===&quot;y1&quot;||n===&quot;y2&quot;)t[n]+=fabric.util.toFixed(e.height/2,2);if(n===&quot;x1&quot;||n===&quot;x2&quot;||n===&quot;r2&quot;)t[n]=fabric.util.toFixed(t[n]/e.width*100,2)+&quot;%&quot;;else if(n===&quot;y1&quot;||n===&quot;y2&quot;)t[n]=fabric.util.toFixed(t[n]/e.height*100,2)+&quot;%&quot;}}function r(e){var t=e.getElementsByTagName(&quot;linearGradient&quot;),n=e.getElementsByTagName(&quot;radialGradient&quot;),r,i,s={};i=t.length;for(;i--;)r=t[i],s[r.getAttribute(&quot;id&quot;)]=r;i=n.length;for(;i--;)r=n[i],s[r.getAttribute(&quot;id&quot;)]=r;return s}fabric.Gradient=fabric.util.createClass({initialize:function(e){e||(e={});var t={};this.id=fabric.Object.__uid++,this.type=e.type||&quot;linear&quot;,t={x1:e.coords?e.coords.x1:0,y1:e.coords?e.coords.y1:0,x2:e.coords?e.coords.x2:0,y2:e.coords?e.coords.y2:0},this.type===&quot;radial&quot;&amp;&amp;(t.r1=e.coords.r1||0,t.r2=e.coords.r2||0),this.coords=t,this.gradientUnits=e.gradientUnits||&quot;objectBoundingBox&quot;,this.colorStops=fabric.util.object.clone(e.colorStops)},addColorStop:function(e){for(var t in e){var n=new fabric.Color(e[t]);this.colorStops.push({offset:t,color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(){return{type:this.type,coords:this.coords,gradientUnits:this.gradientUnits,colorStops:this.colorStops}},toLive:function(e){var t;if(!this.type)return;this.type===&quot;linear&quot;?t=e.createLinearGradient(this.coords.x1,this.coords.y1,this.coords.x2||e.canvas.width,this.coords.y2):this.type===&quot;radial&quot;&amp;&amp;(t=e.createRadialGradient(this.coords.x1,this.coords.y1,this.coords.r1,this.coords.x2,this.coords.y2,this.coords.r2));for(var n=0;n&lt;this.colorStops.length;n++){var r=this.colorStops[n].color,i=this.colorStops[n].opacity,s=this.colorStops[n].offset;i&amp;&amp;(r=(new fabric.Color(r)).setAlpha(i).toRgba()),t.addColorStop(parseFloat(s),r)}return t},toSVG:function(e,t){var r=fabric.util.object.clone(this.coords),i;this.colorStops.sort(function(e,t){return e.offset-t.offset}),t&amp;&amp;this.gradientUnits===&quot;userSpaceOnUse&quot;?(r.x1+=e.width/2,r.y1+=e.height/2,r.x2+=e.width/2,r.y2+=e.height/2):this.gradientUnits===&quot;objectBoundingBox&quot;&amp;&amp;n(e,r),this.type===&quot;linear&quot;?i=[&quot;&lt;linearGradient &quot;,&#39;id=&quot;SVGID_&#39;,this.id,&#39;&quot; gradientUnits=&quot;&#39;,this.gradientUnits,&#39;&quot; x1=&quot;&#39;,r.x1,&#39;&quot; y1=&quot;&#39;,r.y1,&#39;&quot; x2=&quot;&#39;,r.x2,&#39;&quot; y2=&quot;&#39;,r.y2,&#39;&quot;&gt;&#39;]:this.type===&quot;radial&quot;&amp;&amp;(i=[&quot;&lt;radialGradient &quot;,&#39;id=&quot;SVGID_&#39;,this.id,&#39;&quot; gradientUnits=&quot;&#39;,this.gradientUnits,&#39;&quot; cx=&quot;&#39;,r.x2,&#39;&quot; cy=&quot;&#39;,r.y2,&#39;&quot; r=&quot;&#39;,r.r2,&#39;&quot; fx=&quot;&#39;,r.x1,&#39;&quot; fy=&quot;&#39;,r.y1,&#39;&quot;&gt;&#39;]);for(var s=0;s&lt;this.colorStops.length;s++)i.push(&quot;&lt;stop &quot;,&#39;offset=&quot;&#39;,this.colorStops[s].offset*100+&quot;%&quot;,&#39;&quot; style=&quot;stop-color:&#39;,this.colorStops[s].color,this.colorStops[s].opacity?&quot;;stop-opacity: &quot;+this.colorStops[s].opacity:&quot;;&quot;,&#39;&quot;/&gt;&#39;);return i.push(this.type===&quot;linear&quot;?&quot;&lt;/linearGradient&gt;&quot;:&quot;&lt;/radialGradient&gt;&quot;),i.join(&quot;&quot;)}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(n,r){var i=n.getElementsByTagName(&quot;stop&quot;),s=n.nodeName===&quot;linearGradient&quot;?&quot;linear&quot;:&quot;radial&quot;,o=n.getAttribute(&quot;gradientUnits&quot;)||&quot;objectBoundingBox&quot;,u=[],a={};s===&quot;linear&quot;?a={x1:n.getAttribute(&quot;x1&quot;)||0,y1:n.getAttribute(&quot;y1&quot;)||0,x2:n.getAttribute(&quot;x2&quot;)||&quot;100%&quot;,y2:n.getAttribute(&quot;y2&quot;)||0}:s===&quot;radial&quot;&amp;&amp;(a={x1:n.getAttribute(&quot;fx&quot;)||n.getAttribute(&quot;cx&quot;)||&quot;50%&quot;,y1:n.getAttribute(&quot;fy&quot;)||n.getAttribute(&quot;cy&quot;)||&quot;50%&quot;,r1:0,x2:n.getAttribute(&quot;cx&quot;)||&quot;50%&quot;,y2:n.getAttribute(&quot;cy&quot;)||&quot;50%&quot;,r2:n.getAttribute(&quot;r&quot;)||&quot;50%&quot;});for(var f=i.length;f--;)u.push(e(i[f]));return t(r,a),new fabric.Gradient({type:s,coords:a,gradientUnits:o,colorStops:u})},forObject:function(e,n){return n||(n={}),t(e,n),new fabric.Gradient(n)}}),fabric.getGradientDefs=r}(),fabric.Pattern=fabric.util.createClass({repeat:&quot;repeat&quot;,initialize:function(e){e||(e={}),e.source&amp;&amp;(this.source=typeof e.source==&quot;string&quot;?new Function(e.source):e.source),e.repeat&amp;&amp;(this.repeat=e.repeat)},toObject:function(){var e;return typeof this.source==&quot;function&quot;?e=String(this.source).match(/function\s+\w*\s*\(.*\)\s+\{([\s\S]*)\}/)[1]:typeof this.source.src==&quot;string&quot;&amp;&amp;(e=this.source.src),{source:e,repeat:this.repeat}},toLive:function(e){var t=typeof this.source==&quot;function&quot;?this.source():this.source;return e.createPattern(t,this.repeat)}}),fabric.Shadow=fabric.util.createClass({color:&quot;rgb(0,0,0)&quot;,blur:0,offsetX:0,offsetY:0,initialize:function(e){for(var t in e)this[t]=e[t]},toObject:function(){return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(){}}),function(e){&quot;use strict&quot;;function n(e,t){arguments.length&gt;0&amp;&amp;this.init(e,t)}var t=e.fabric||(e.fabric={});if(t.Point){t.warn(&quot;fabric.Point is already defined&quot;);return}t.Point=n,n.prototype={constructor:n,init:function(e,t){this.x=e,this.y=t},add:function(e){return new n(this.x+e.x,this.y+e.y)},addEquals:function(e){return this.x+=e.x,this.y+=e.y,this},scalarAdd:function(e){return new n(this.x+e,this.y+e)},scalarAddEquals:function(e){return this.x+=e,this.y+=e,this},subtract:function(e){return new n(this.x-e.x,this.y-e.y)},subtractEquals:function(e){return this.x-=e.x,this.y-=e.y,this},scalarSubtract:function(e){return new n(this.x-e,this.y-e)},scalarSubtractEquals:function(e){return this.x-=e,this.y-=e,this},multiply:function(e){return new n(this.x*e,this.y*e)},multiplyEquals:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return new n(this.x/e,this.y/e)},divideEquals:function(e){return this.x/=e,this.y/=e,this},eq:function(e){return this.x===e.x&amp;&amp;this.y===e.y},lt:function(e){return this.x&lt;e.x&amp;&amp;this.y&lt;e.y},lte:function(e){return this.x&lt;=e.x&amp;&amp;this.y&lt;=e.y},gt:function(e){return this.x&gt;e.x&amp;&amp;this.y&gt;e.y},gte:function(e){return this.x&gt;=e.x&amp;&amp;this.y&gt;=e.y},lerp:function(e,t){return new n(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)},distanceFrom:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},midPointFrom:function(e){return new n(this.x+(e.x-this.x)/2,this.y+(e.y-this.y)/2)},min:function(e){return new n(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new n(Math.max(this.x,e.x),Math.max(this.y,e.y))},toString:function(){return this.x+&quot;,&quot;+this.y},setXY:function(e,t){this.x=e,this.y=t},setFromPoint:function(e){this.x=e.x,this.y=e.y},swap:function(e){var t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n}}}(typeof exports!=&quot;undefined&quot;?exports:this),function(e){&quot;use strict&quot;;function n(e){arguments.length&gt;0&amp;&amp;this.init(e)}var t=e.fabric||(e.fabric={});if(t.Intersection){t.warn(&quot;fabric.Intersection is already defined&quot;);return}t.Intersection=n,t.Intersection.prototype={init:function(e){this.status=e,this.points=[]},appendPoint:function(e){this.points.push(e)},appendPoints:function(e){this.points=this.points.concat(e)}},t.Intersection.intersectLineLine=function(e,r,i,s){var o,u=(s.x-i.x)*(e.y-i.y)-(s.y-i.y)*(e.x-i.x),a=(r.x-e.x)*(e.y-i.y)-(r.y-e.y)*(e.x-i.x),f=(s.y-i.y)*(r.x-e.x)-(s.x-i.x)*(r.y-e.y);if(f!==0){var l=u/f,c=a/f;0&lt;=l&amp;&amp;l&lt;=1&amp;&amp;0&lt;=c&amp;&amp;c&lt;=1?(o=new n(&quot;Intersection&quot;),o.points.push(new t.Point(e.x+l*(r.x-e.x),e.y+l*(r.y-e.y)))):o=new n(&quot;No Intersection&quot;)}else u===0||a===0?o=new n(&quot;Coincident&quot;):o=new n(&quot;Parallel&quot;);return o},t.Intersection.intersectLinePolygon=function(e,t,r){var i=new n(&quot;No Intersection&quot;),s=r.length;for(var o=0;o&lt;s;o++){var u=r[o],a=r[(o+1)%s],f=n.intersectLineLine(e,t,u,a);i.appendPoints(f.points)}return i.points.length&gt;0&amp;&amp;(i.status=&quot;Intersection&quot;),i},t.Intersection.intersectPolygonPolygon=function(e,t){var r=new n(&quot;No Intersection&quot;),i=e.length;for(var s=0;s&lt;i;s++){var o=e[s],u=e[(s+1)%i],a=n.intersectLinePolygon(o,u,t);r.appendPoints(a.points)}return r.points.length&gt;0&amp;&amp;(r.status=&quot;Intersection&quot;),r},t.Intersection.intersectPolygonRectangle=function(e,r,i){var s=r.min(i),o=r.max(i),u=new t.Point(o.x,s.y),a=new t.Point(s.x,o.y),f=n.intersectLinePolygon(s,u,e),l=n.intersectLinePolygon(u,o,e),c=n.intersectLinePolygon(o,a,e),h=n.intersectLinePolygon(a,s,e),p=new n(&quot;No Intersection&quot;);return p.appendPoints(f.points),p.appendPoints(l.points),p.appendPoints(c.points),p.appendPoints(h.points),p.points.length&gt;0&amp;&amp;(p.status=&quot;Intersection&quot;),p}}(typeof exports!=&quot;undefined&quot;?exports:this),function(e){&quot;use strict&quot;;function n(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}var t=e.fabric||(e.fabric={});if(t.Color){t.warn(&quot;fabric.Color is already defined.&quot;);return}t.Color=n,t.Color.prototype={_tryParsingColor:function(e){var t;e in n.colorNameMap&amp;&amp;(e=n.colorNameMap[e]),t=n.sourceFromHex(e),t||(t=n.sourceFromRgb(e)),t&amp;&amp;this.setSource(t)},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return&quot;rgb(&quot;+e[0]+&quot;,&quot;+e[1]+&quot;,&quot;+e[2]+&quot;)&quot;},toRgba:function(){var e=this.getSource();return&quot;rgba(&quot;+e[0]+&quot;,&quot;+e[1]+&quot;,&quot;+e[2]+&quot;,&quot;+e[3]+&quot;)&quot;},toHex:function(){var e=this.getSource(),t=e[0].toString(16);t=t.length===1?&quot;0&quot;+t:t;var n=e[1].toString(16);n=n.length===1?&quot;0&quot;+n:n;var r=e[2].toString(16);return r=r.length===1?&quot;0&quot;+r:r,t.toUpperCase()+n.toUpperCase()+r.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var t=this.getSource();return t[3]=e,this.setSource(t),this},toGrayscale:function(){var e=this.getSource(),t=parseInt((e[0]*.3+e[1]*.59+e[2]*.11).toFixed(0),10),n=e[3];return this.setSource([t,t,t,n]),this},toBlackWhite:function(e){var t=this.getSource(),n=(t[0]*.3+t[1]*.59+t[2]*.11).toFixed(0),r=t[3];return e=e||127,n=Number(n)&lt;Number(e)?0:255,this.setSource([n,n,n,r]),this},overlayWith:function(e){e instanceof n||(e=new n(e));var t=[],r=this.getAlpha(),i=.5,s=this.getSource(),o=e.getSource();for(var u=0;u&lt;3;u++)t.push(Math.round(s[u]*(1-i)+o[u]*i));return t[3]=r,this.setSource(t),this}},t.Color.reRGBa=/^rgba?\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})(?:\s*,\s*(\d+(?:\.\d+)?))?\)$/,t.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i,t.Color.colorNameMap={aqua:&quot;#00FFFF&quot;,black:&quot;#000000&quot;,blue:&quot;#0000FF&quot;,fuchsia:&quot;#FF00FF&quot;,gray:&quot;#808080&quot;,green:&quot;#008000&quot;,lime:&quot;#00FF00&quot;,maroon:&quot;#800000&quot;,navy:&quot;#000080&quot;,olive:&quot;#808000&quot;,purple:&quot;#800080&quot;,red:&quot;#FF0000&quot;,silver:&quot;#C0C0C0&quot;,teal:&quot;#008080&quot;,white:&quot;#FFFFFF&quot;,yellow:&quot;#FFFF00&quot;},t.Color.fromRgb=function(e){return n.fromSource(n.sourceFromRgb(e))},t.Color.sourceFromRgb=function(e){var t=e.match(n.reRGBa);if(t)return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),t[4]?parseFloat(t[4]):1]},t.Color.fromRgba=n.fromRgb,t.Color.fromHex=function(e){return n.fromSource(n.sourceFromHex(e))},t.Color.sourceFromHex=function(e){if(e.match(n.reHex)){var t=e.slice(e.indexOf(&quot;#&quot;)+1),r=t.length===3,i=r?t.charAt(0)+t.charAt(0):t.substring(0,2),s=r?t.charAt(1)+t.charAt(1):t.substring(2,4),o=r?t.charAt(2)+t.charAt(2):t.substring(4,6);return[parseInt(i,16),parseInt(s,16),parseInt(o,16),1]}},t.Color.fromSource=function(e){var t=new n;return t.setSource(e),t}}(typeof exports!=&quot;undefined&quot;?exports:this),function(){&quot;use strict&quot;;if(fabric.StaticCanvas){fabric.warn(&quot;fabric.StaticCanvas is already defined.&quot;);return}var e=fabric.util.object.extend,t=fabric.util.getElementOffset,n=fabric.util.removeFromArray,r=fabric.util.removeListener,i=new Error(&quot;Could not initialize `canvas` element&quot;);fabric.StaticCanvas=function(e,t){t||(t={}),this._initStatic(e,t),fabric.StaticCanvas.activeInstance=this},e(fabric.StaticCanvas.prototype,fabric.Observable),e(fabric.StaticCanvas.prototype,{backgroundColor:&quot;&quot;,backgroundImage:&quot;&quot;,backgroundImageOpacity:1,backgroundImageStretch:!0,overlayImage:&quot;&quot;,overlayImageLeft:0,overlayImageTop:0,includeDefaultValues:!0,stateful:!0,renderOnAddition:!0,clipTo:null,controlsAboveOverlay:!1,onBeforeScaleRotate:function(){},_initStatic:function(e,t){this._objects=[],this._createLowerCanvas(e),this._initOptions(t),t.overlayImage&amp;&amp;this.setOverlayImage(t.overlayImage,this.renderAll.bind(this)),t.backgroundImage&amp;&amp;this.setBackgroundImage(t.backgroundImage,this.renderAll.bind(this)),t.backgroundColor&amp;&amp;this.setBackgroundColor(t.backgroundColor,this.renderAll.bind(this)),this.calcOffset()},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(e,t,n){return fabric.util.loadImage(e,function(e){this.overlayImage=e,n&amp;&amp;&quot;overlayImageLeft&quot;in n&amp;&amp;(this.overlayImageLeft=n.overlayImageLeft),n&amp;&amp;&quot;overlayImageTop&quot;in n&amp;&amp;(this.overlayImageTop=n.overlayImageTop),t&amp;&amp;t()},this),this},setBackgroundImage:function(e,t,n){return fabric.util.loadImage(e,function(e){this.backgroundImage=e,n&amp;&amp;&quot;backgroundImageOpacity&quot;in n&amp;&amp;(this.backgroundImageOpacity=n.backgroundImageOpacity),n&amp;&amp;&quot;backgroundImageStretch&quot;in n&amp;&amp;(this.backgroundImageStretch=n.backgroundImageStretch),t&amp;&amp;t()},this),this},setBackgroundColor:function(e,t){if(e.source){var n=this;fabric.util.loadImage(e.source,function(r){n.backgroundColor=new fabric.Pattern({source:r,repeat:e.repeat}),t&amp;&amp;t()})}else this.backgroundColor=e,t&amp;&amp;t();return this},_createCanvasElement:function(){var e=fabric.document.createElement(&quot;canvas&quot;);e.style||(e.style={});if(!e)throw i;return this._initCanvasElement(e),e},_initCanvasElement:function(e){fabric.util.createCanvasElement(e);if(typeof e.getContext==&quot;undefined&quot;)throw i},_initOptions:function(e){for(var t in e)this[t]=e[t];this.width=parseInt(this.lowerCanvasEl.width,10)||0,this.height=parseInt(this.lowerCanvasEl.height,10)||0;if(!this.lowerCanvasEl.style)return;this.lowerCanvasEl.style.width=this.width+&quot;px&quot;,this.lowerCanvasEl.style.height=this.height+&quot;px&quot;},_createLowerCanvas:function(e){this.lowerCanvasEl=fabric.util.getById(e)||this._createCanvasElement(),this._initCanvasElement(this.lowerCanvasEl),fabric.util.addClass(this.lowerCanvasEl,&quot;lower-canvas&quot;),this.interactive&amp;&amp;this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext(&quot;2d&quot;)},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e){return this._setDimension(&quot;width&quot;,e)},setHeight:function(e){return this._setDimension(&quot;height&quot;,e)},setDimensions:function(e){for(var t in e)this._setDimension(t,e[t]);return this},_setDimension:function(e,t){return this.lowerCanvasEl[e]=t,this.lowerCanvasEl.style[e]=t+&quot;px&quot;,this.upperCanvasEl&amp;&amp;(this.upperCanvasEl[e]=t,this.upperCanvasEl.style[e]=t+&quot;px&quot;),this.cacheCanvasEl&amp;&amp;(this.cacheCanvasEl[e]=t),this.wrapperEl&amp;&amp;(this.wrapperEl.style[e]=t+&quot;px&quot;),this[e]=t,this.calcOffset(),this.renderAll(),this},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_draw:function(e,t){if(!t)return;if(this.controlsAboveOverlay){var n=t.hasBorders,r=t.hasControls;t.hasBorders=t.hasControls=!1,t.render(e),t.hasBorders=n,t.hasControls=r}else t.render(e)},add:function(){this._objects.push.apply(this._objects,arguments);for(var e=arguments.length;e--;)this._initObject(arguments[e]);return this.renderOnAddition&amp;&amp;this.renderAll(),this},_initObject:function(e){this.stateful&amp;&amp;e.setupState(),e.setCoords(),e.canvas=this,this.fire(&quot;object:added&quot;,{target:e}),e.fire(&quot;added&quot;)},insertAt:function(e,t,n){return n?this._objects[t]=e:this._objects.splice(t,0,e),this._initObject(e),this.renderOnAddition&amp;&amp;this.renderAll(),this},getObjects:function(){return this._objects},clearContext:function(e){return e.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.discardActiveGroup&amp;&amp;this.discardActiveGroup(),this.clearContext(this.contextContainer),this.contextTop&amp;&amp;this.clearContext(this.contextTop),this.fire(&quot;canvas:cleared&quot;),this.renderAll(),this},renderAll:function(e){var t=this[e===!0&amp;&amp;this.interactive?&quot;contextTop&quot;:&quot;contextContainer&quot;];this.contextTop&amp;&amp;this.selection&amp;&amp;this.clearContext(this.contextTop),e||this.clearContext(t),this.fire(&quot;before:render&quot;),this.clipTo&amp;&amp;fabric.util.clipCanvas(this,t),this.backgroundColor&amp;&amp;(t.fillStyle=this.backgroundColor.toLive?this.backgroundColor.toLive(t):this.backgroundColor,t.fillRect(0,0,this.width,this.height)),typeof this.backgroundImage==&quot;object&quot;&amp;&amp;this._drawBackroundImage(t);var n=this.getActiveGroup();for(var r=0,i=this._objects.length;r&lt;i;++r)(!n||n&amp;&amp;this._objects[r]&amp;&amp;!n.contains(this._objects[r]))&amp;&amp;this._draw(t,this._objects[r]);if(n){var s=[];this.forEachObject(function(e){n.contains(e)&amp;&amp;s.push(e)}),n._set(&quot;objects&quot;,s),this._draw(t,n)}return this.clipTo&amp;&amp;t.restore(),this.overlayImage&amp;&amp;t.drawImage(this.overlayImage,this.overlayImageLeft,this.overlayImageTop),this.controlsAboveOverlay&amp;&amp;this.drawControls(t),this.fire(&quot;after:render&quot;),this},_drawBackroundImage:function(e){e.save(),e.globalAlpha=this.backgroundImageOpacity,this.backgroundImageStretch?e.drawImage(this.backgroundImage,0,0,this.width,this.height):e.drawImage(this.backgroundImage,0,0),e.restore()},renderTop:function(){var e=this.contextTop||this.contextContainer;this.clearContext(e),this.selection&amp;&amp;this._groupSelector&amp;&amp;this._drawSelection();var t=this.getActiveGroup();return t&amp;&amp;t.render(e),this.overlayImage&amp;&amp;e.drawImage(this.overlayImage,this.overlayImageLeft,this.overlayImageTop),this.fire(&quot;after:render&quot;),this},drawControls:function(e){var t=this.getActiveGroup();if(t)e.save(),fabric.Group.prototype.transform.call(t,e),t.drawBorders(e).drawControls(e),e.restore();else for(var n=0,r=this._objects.length;n&lt;r;++n){if(!this._objects[n]||!this._objects[n].active)continue;e.save(),fabric.Object.prototype.transform.call(this._objects[n],e),this._objects[n].drawBorders(e).drawControls(e),e.restore(),this.lastRenderedObjectWithControlsAboveOverlay=this._objects[n]}},toDataURL:function(e){e||(e={});var t=e.format||&quot;png&quot;,n=e.quality||1,r=e.multiplier||1;return r!==1?this.__toDataURLWithMultiplier(t,n,r):this.__toDataURL(t,n)},__toDataURL:function(e,t){this.renderAll(!0);var n=this.upperCanvasEl||this.lowerCanvasEl,r=fabric.StaticCanvas.supports(&quot;toDataURLWithQuality&quot;)?n.toDataURL(&quot;image/&quot;+e,t):n.toDataURL(&quot;image/&quot;+e);return this.contextTop&amp;&amp;this.clearContext(this.contextTop),this.renderAll(),r},__toDataURLWithMultiplier:function(e,t,n){var r=this.getWidth(),i=this.getHeight(),s=r*n,o=i*n,u=this.getActiveObject(),a=this.getActiveGroup(),f=this.contextTop||this.contextContainer;this.setWidth(s).setHeight(o),f.scale(n,n),a?this._tempRemoveBordersControlsFromGroup(a):u&amp;&amp;this.deactivateAll&amp;&amp;this.deactivateAll(),this.width=r,this.height=i,this.renderAll(!0);var l=this.toDataURL(e,t);return f.scale(1/n,1/n),this.setWidth(r).setHeight(i),a?this._restoreBordersControlsOnGroup(a):u&amp;&amp;this.setActiveObject&amp;&amp;this.setActiveObject(u),this.contextTop&amp;&amp;this.clearContext(this.contextTop),this.renderAll(),l},toDataURLWithMultiplier:function(e,t,n){return this.toDataURL({format:e,multiplier</div><div class='line' id='LC3'>:t,quality:n})},_tempRemoveBordersControlsFromGroup:function(e){e.origHasControls=e.hasControls,e.origBorderColor=e.borderColor,e.hasControls=!0,e.borderColor=&quot;rgba(0,0,0,0)&quot;,e.forEachObject(function(e){e.origBorderColor=e.borderColor,e.borderColor=&quot;rgba(0,0,0,0)&quot;})},_restoreBordersControlsOnGroup:function(e){e.hideControls=e.origHideControls,e.borderColor=e.origBorderColor,e.forEachObject(function(e){e.borderColor=e.origBorderColor,delete e.origBorderColor})},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(e){return e.set(&quot;left&quot;,this.getCenter().left),this.renderAll(),this},centerObjectV:function(e){return e.set(&quot;top&quot;,this.getCenter().top),this.renderAll(),this},centerObject:function(e){return this.centerObjectH(e).centerObjectV(e)},toDatalessJSON:function(e){return this.toDatalessObject(e)},toObject:function(e){return this._toObjectMethod(&quot;toObject&quot;,e)},toDatalessObject:function(e){return this._toObjectMethod(&quot;toDatalessObject&quot;,e)},_toObjectMethod:function(e,t){var n={objects:this._objects.map(function(n){var r;this.includeDefaultValues||(r=n.includeDefaultValues,n.includeDefaultValues=!1);var i=n[e](t);return this.includeDefaultValues||(n.includeDefaultValues=r),i},this),background:this.backgroundColor&amp;&amp;this.backgroundColor.toObject?this.backgroundColor.toObject():this.backgroundColor};return this.backgroundImage&amp;&amp;(n.backgroundImage=this.backgroundImage.src,n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch),this.overlayImage&amp;&amp;(n.overlayImage=this.overlayImage.src,n.overlayImageLeft=this.overlayImageLeft,n.overlayImageTop=this.overlayImageTop),fabric.util.populateWithProperties(this,n,t),n},toSVG:function(e){e||(e={});var t=[];e.suppressPreamble||t.push(&#39;&lt;?xml version=&quot;1.0&quot; standalone=&quot;no&quot; ?&gt;&#39;,&#39;&lt;!DOCTYPE svg PUBLIC &quot;-//W3C//DTD SVG 1.1//EN&quot; &#39;,&#39;&quot;http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd&quot;&gt;&#39;),t.push(&quot;&lt;svg &quot;,&#39;xmlns=&quot;http://www.w3.org/2000/svg&quot; &#39;,&#39;xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; &#39;,&#39;version=&quot;1.1&quot; &#39;,&#39;width=&quot;&#39;,this.width,&#39;&quot; &#39;,&#39;height=&quot;&#39;,this.height,&#39;&quot; &#39;,this.backgroundColor&amp;&amp;!this.backgroundColor.source?&#39;style=&quot;background-color: &#39;+this.backgroundColor+&#39;&quot; &#39;:null,&#39;xml:space=&quot;preserve&quot;&gt;&#39;,&quot;&lt;desc&gt;Created with Fabric.js &quot;,fabric.version,&quot;&lt;/desc&gt;&quot;,&quot;&lt;defs&gt;&quot;,fabric.createSVGFontFacesMarkup(this.getObjects()),fabric.createSVGRefElementsMarkup(this),&quot;&lt;/defs&gt;&quot;),this.backgroundColor&amp;&amp;this.backgroundColor.source&amp;&amp;t.push(&#39;&lt;rect x=&quot;0&quot; y=&quot;0&quot; &#39;,&#39;width=&quot;&#39;,this.backgroundColor.repeat===&quot;repeat-y&quot;||this.backgroundColor.repeat===&quot;no-repeat&quot;?this.backgroundColor.source.width:this.width,&#39;&quot; height=&quot;&#39;,this.backgroundColor.repeat===&quot;repeat-x&quot;||this.backgroundColor.repeat===&quot;no-repeat&quot;?this.backgroundColor.source.height:this.height,&#39;&quot; fill=&quot;url(#backgroundColorPattern)&quot;&#39;,&quot;&gt;&lt;/rect&gt;&quot;),this.backgroundImage&amp;&amp;t.push(&#39;&lt;image x=&quot;0&quot; y=&quot;0&quot; &#39;,&#39;width=&quot;&#39;,this.backgroundImageStretch?this.width:this.backgroundImage.width,&#39;&quot; height=&quot;&#39;,this.backgroundImageStretch?this.height:this.backgroundImage.height,&#39;&quot; preserveAspectRatio=&quot;&#39;,this.backgroundImageStretch?&quot;none&quot;:&quot;defer&quot;,&#39;&quot; xlink:href=&quot;&#39;,this.backgroundImage.src,&#39;&quot; style=&quot;opacity:&#39;,this.backgroundImageOpacity,&#39;&quot;&gt;&lt;/image&gt;&#39;),this.overlayImage&amp;&amp;t.push(&#39;&lt;image x=&quot;&#39;,this.overlayImageLeft,&#39;&quot; y=&quot;&#39;,this.overlayImageTop,&#39;&quot; width=&quot;&#39;,this.overlayImage.width,&#39;&quot; height=&quot;&#39;,this.overlayImage.height,&#39;&quot; xlink:href=&quot;&#39;,this.overlayImage.src,&#39;&quot;&gt;&lt;/image&gt;&#39;);for(var n=0,r=this.getObjects(),i=r.length;n&lt;i;n++)t.push(r[n].toSVG());return t.push(&quot;&lt;/svg&gt;&quot;),t.join(&quot;&quot;)},isEmpty:function(){return this._objects.length===0},remove:function(e){this.getActiveObject()===e&amp;&amp;(this.fire(&quot;before:selection:cleared&quot;,{target:e}),this.discardActiveObject(),this.fire(&quot;selection:cleared&quot;));var t=this._objects,n=t.indexOf(e);return n!==-1&amp;&amp;(t.splice(n,1),this.fire(&quot;object:removed&quot;,{target:e})),this.renderAll(),e},sendToBack:function(e){return n(this._objects,e),this._objects.unshift(e),this.renderAll()},bringToFront:function(e){return n(this._objects,e),this._objects.push(e),this.renderAll()},sendBackwards:function(e){var t=this._objects.indexOf(e),r=t;if(t!==0){for(var i=t-1;i&gt;=0;--i){var s=e.intersectsWithObject(this._objects[i])||e.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(e);if(s){r=i;break}}n(this._objects,e),this._objects.splice(r,0,e)}return this.renderAll()},bringForward:function(e){var t=this.getObjects(),r=t.indexOf(e),i=r;if(r!==t.length-1){for(var s=r+1,o=this._objects.length;s&lt;o;++s){var u=e.intersectsWithObject(t[s])||e.isContainedWithinObject(this._objects[s])||this._objects[s].isContainedWithinObject(e);if(u){i=s;break}}n(t,e),t.splice(i,0,e)}this.renderAll()},item:function(e){return this.getObjects()[e]},complexity:function(){return this.getObjects().reduce(function(e,t){return e+=t.complexity?t.complexity():0,e},0)},forEachObject:function(e,t){var n=this.getObjects(),r=n.length;while(r--)e.call(t,n[r],r,n);return this},dispose:function(){return this.clear(),this.interactive&amp;&amp;(r(this.upperCanvasEl,&quot;mousedown&quot;,this._onMouseDown),r(this.upperCanvasEl,&quot;mousemove&quot;,this._onMouseMove),r(fabric.window,&quot;resize&quot;,this._onResize)),this},_resizeImageToFit:function(e){var t=e.width||e.offsetWidth,n=this.getWidth()/t;t&amp;&amp;(e.width=t*n)}}),fabric.StaticCanvas.prototype.toString=function(){return&quot;#&lt;fabric.Canvas (&quot;+this.complexity()+&quot;): &quot;+&quot;{ objects: &quot;+this.getObjects().length+&quot; }&gt;&quot;},e(fabric.StaticCanvas,{EMPTY_JSON:&#39;{&quot;objects&quot;: [], &quot;background&quot;: &quot;white&quot;}&#39;,toGrayscale:function(e){var t=e.getContext(&quot;2d&quot;),n=t.getImageData(0,0,e.width,e.height),r=n.data,i=n.width,s=n.height,o,u,a,f;for(a=0;a&lt;i;a++)for(f=0;f&lt;s;f++)o=a*4*s+f*4,u=(r[o]+r[o+1]+r[o+2])/3,r[o]=u,r[o+1]=u,r[o+2]=u;t.putImageData(n,0,0)},supports:function(e){var t=fabric.util.createCanvasElement();if(!t||!t.getContext)return null;var n=t.getContext(&quot;2d&quot;);if(!n)return null;switch(e){case&quot;getImageData&quot;:return typeof n.getImageData!=&quot;undefined&quot;;case&quot;toDataURL&quot;:return typeof t.toDataURL!=&quot;undefined&quot;;case&quot;toDataURLWithQuality&quot;:try{return t.toDataURL(&quot;image/jpeg&quot;,0),!0}catch(r){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}(),function(e){&quot;use strict&quot;;var t=e.fabric||(e.fabric={}),n=t.util.array.min,r=t.util.array.max;if(t.FreeDrawing){t.warn(&quot;fabric.FreeDrawing is already defined&quot;);return}t.FreeDrawing=t.util.createClass({initialize:function(e){this.canvas=e,this._points=[]},_addPoint:function(e){this._points.push(e)},_reset:function(){this._points.length=0;var e=this.canvas.contextTop;e.strokeStyle=this.canvas.freeDrawingColor,e.lineWidth=this.canvas.freeDrawingLineWidth,e.lineCap=e.lineJoin=&quot;round&quot;},_prepareForDrawing:function(e){this.canvas._isCurrentlyDrawing=!0,this.canvas.discardActiveObject().renderAll();var n=new t.Point(e.x,e.y);this._reset(),this._addPoint(n),this.canvas.contextTop.moveTo(n.x,n.y)},_captureDrawingPath:function(e){var n=new t.Point(e.x,e.y);this._addPoint(n)},_render:function(){var e=this.canvas.contextTop;e.beginPath();var t=this._points[0],n=this._points[1];e.moveTo(t.x,t.y);for(var r=1,i=this._points.length;r&lt;i;r++){var s=t.midPointFrom(n);e.quadraticCurveTo(t.x,t.y,s.x,s.y),t=this._points[r],n=this._points[r+1]}e.lineTo(t.x,t.y),e.stroke()},_getSVGPathData:function(){return this.box=this.getPathBoundingBox(this._points),this.convertPointsToSVGPath(this._points,this.box.minx,this.box.maxx,this.box.miny,this.box.maxy)},getPathBoundingBox:function(e){var t=[],i=[],s=e[0],o=e[1],u=s;for(var a=1,f=e.length;a&lt;f;a++){var l=s.midPointFrom(o);t.push(u.x),t.push(l.x),i.push(u.y),i.push(l.y),s=e[a],o=e[a+1],u=l}return t.push(s.x),i.push(s.y),{minx:n(t),miny:n(i),maxx:r(t),maxy:r(i)}},convertPointsToSVGPath:function(e,n,r,i){var s=[],o=new t.Point(e[0].x-n,e[0].y-i),u=new t.Point(e[1].x-n,e[1].y-i);s.push(&quot;M &quot;,e[0].x-n,&quot; &quot;,e[0].y-i,&quot; &quot;);for(var a=1,f=e.length;a&lt;f;a++){var l=o.midPointFrom(u);s.push(&quot;Q &quot;,o.x,&quot; &quot;,o.y,&quot; &quot;,l.x,&quot; &quot;,l.y,&quot; &quot;),o=new t.Point(e[a].x-n,e[a].y-i),a+1&lt;e.length&amp;&amp;(u=new t.Point(e[a+1].x-n,e[a+1].y-i))}return s.push(&quot;L &quot;,o.x,&quot; &quot;,o.y,&quot; &quot;),s},createPath:function(e){var n=new t.Path(e);return n.fill=null,n.stroke=this.canvas.freeDrawingColor,n.strokeWidth=this.canvas.freeDrawingLineWidth,n},_finalizeAndAddPath:function(){this.canvas._isCurrentlyDrawing=!1;var e=this.canvas.contextTop;e.closePath();var t=this._getSVGPathData().join(&quot;&quot;);if(t===&quot;M 0 0 Q 0 0 0 0 L 0 0&quot;){this.canvas.renderAll();return}var n=this.box.minx+(this.box.maxx-this.box.minx)/2,r=this.box.miny+(this.box.maxy-this.box.miny)/2;this.canvas.contextTop.arc(n,r,3,0,Math.PI*2,!1);var i=this.createPath(t);i.set({left:n,top:r}),this.canvas.add(i),i.setCoords(),this.canvas.contextTop&amp;&amp;this.canvas.clearContext(this.canvas.contextTop),this.canvas.renderAll(),this.canvas.fire(&quot;path:created&quot;,{path:i})}})}(typeof exports!=&quot;undefined&quot;?exports:this),function(){function f(){}var e=fabric.util.object.extend,t=fabric.util.getPointer,n=fabric.util.degreesToRadians,r=fabric.util.radiansToDegrees,i=Math.atan2,s=Math.abs,o=Math.min,u=Math.max,a=.5;fabric.Canvas=function(e,t){t||(t={}),this._initStatic(e,t),this._initInteractive(),this._createCacheCanvas(),fabric.Canvas.activeInstance=this},f.prototype=fabric.StaticCanvas.prototype,fabric.Canvas.prototype=new f;var l={uniScaleTransform:!1,centerTransform:!1,interactive:!0,selection:!0,selectionColor:&quot;rgba(100, 100, 255, 0.3)&quot;,selectionDashArray:[],selectionBorderColor:&quot;rgba(255, 255, 255, 0.3)&quot;,selectionLineWidth:1,freeDrawingColor:&quot;rgb(0, 0, 0)&quot;,freeDrawingLineWidth:1,hoverCursor:&quot;move&quot;,moveCursor:&quot;move&quot;,defaultCursor:&quot;default&quot;,freeDrawingCursor:&quot;crosshair&quot;,rotationCursor:&quot;crosshair&quot;,containerClass:&quot;canvas-container&quot;,perPixelTargetFind:!1,targetFindTolerance:0,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this.freeDrawing=fabric.FreeDrawing&amp;&amp;new fabric.FreeDrawing(this),this._initWrapperElement(),this._createUpperCanvas(),this._initEvents(),this.calcOffset()},_resetCurrentTransform:function(e){var t=this._currentTransform;t.target.set(&quot;scaleX&quot;,t.original.scaleX),t.target.set(&quot;scaleY&quot;,t.original.scaleY),t.target.set(&quot;left&quot;,t.original.left),t.target.set(&quot;top&quot;,t.original.top),e.altKey||this.centerTransform?(t.originX!==&quot;center&quot;&amp;&amp;(t.originX===&quot;right&quot;?t.mouseXSign=-1:t.mouseXSign=1),t.originY!==&quot;center&quot;&amp;&amp;(t.originY===&quot;bottom&quot;?t.mouseYSign=-1:t.mouseYSign=1),t.originX=&quot;center&quot;,t.originY=&quot;center&quot;):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(e,t){var n=this.getPointer(e),r=this._normalizePointer(t,n),i=r.x,s=r.y,o=t._getImageLines(t.oCoords),u=t._findCrossPoints(i,s,o);return u&amp;&amp;u%2===1||t._findTargetCorner(e,this._offset)?!0:!1},_normalizePointer:function(e,t){var n=this.getActiveGroup(),r=t.x,i=t.y,s=n&amp;&amp;e.type!==&quot;group&quot;&amp;&amp;n.contains(e);return s&amp;&amp;(r-=n.left,i-=n.top),{x:r,y:i}},_isTargetTransparent:function(e,t,n){var r=this.contextCache,i=e.hasBorders,s=e.transparentCorners;e.hasBorders=e.transparentCorners=!1,this._draw(r,e),e.hasBorders=i,e.transparentCorners=s,this.targetFindTolerance&gt;0&amp;&amp;(t&gt;this.targetFindTolerance?t-=this.targetFindTolerance:t=0,n&gt;this.targetFindTolerance?n-=this.targetFindTolerance:n=0);var o=!0,u=r.getImageData(t,n,this.targetFindTolerance*2||1,this.targetFindTolerance*2||1);for(var a=3;a&lt;u.data.length;a+=4){var f=u.data[a];o=f&lt;=0;if(o===!1)break}return u=null,this.clearContext(r),o},_shouldClearSelection:function(e){var t=this.findTarget(e),n=this.getActiveGroup();return!t||t&amp;&amp;n&amp;&amp;!n.contains(t)&amp;&amp;n!==t&amp;&amp;!e.shiftKey},_setupCurrentTransform:function(e,r){var i=&quot;drag&quot;,s,o=t(e,r.canvas.upperCanvasEl);s=r._findTargetCorner(e,this._offset),s&amp;&amp;(i=s===&quot;ml&quot;||s===&quot;mr&quot;?&quot;scaleX&quot;:s===&quot;mt&quot;||s===&quot;mb&quot;?&quot;scaleY&quot;:s===&quot;mtr&quot;?&quot;rotate&quot;:&quot;scale&quot;);var u=&quot;center&quot;,a=&quot;center&quot;;if(s===&quot;ml&quot;||s===&quot;tl&quot;||s===&quot;bl&quot;)u=&quot;right&quot;;else if(s===&quot;mr&quot;||s===&quot;tr&quot;||s===&quot;br&quot;)u=&quot;left&quot;;if(s===&quot;tl&quot;||s===&quot;mt&quot;||s===&quot;tr&quot;)a=&quot;bottom&quot;;else if(s===&quot;bl&quot;||s===&quot;mb&quot;||s===&quot;br&quot;)a=&quot;top&quot;;s===&quot;mtr&quot;&amp;&amp;(u=&quot;center&quot;,a=&quot;center&quot;),this._currentTransform={target:r,action:i,scaleX:r.scaleX,scaleY:r.scaleY,offsetX:o.x-r.left,offsetY:o.y-r.top,originX:u,originY:a,ex:o.x,ey:o.y,left:r.left,top:r.top,theta:n(r.angle),width:r.width*r.scaleX,mouseXSign:1,mouseYSign:1},this._currentTransform.original={left:r.left,top:r.top,scaleX:r.scaleX,scaleY:r.scaleY,originX:u,originY:a},this._resetCurrentTransform(e)},_shouldHandleGroupLogic:function(e,t){var n=this.getActiveObject();return e.shiftKey&amp;&amp;(this.getActiveGroup()||n&amp;&amp;n!==t)&amp;&amp;this.selection},_handleGroupLogic:function(e,t){if(t===this.getActiveGroup()){t=this.findTarget(e,!0);if(!t||t.isType(&quot;group&quot;))return}var n=this.getActiveGroup();if(n)n.contains(t)?(n.removeWithUpdate(t),this._resetObjectTransform(n),t.setActive(!1),n.size()===1&amp;&amp;this.discardActiveGroup()):(n.addWithUpdate(t),this._resetObjectTransform(n)),this.fire(&quot;selection:created&quot;,{target:n,e:e}),n.setActive(!0);else{if(this._activeObject&amp;&amp;t!==this._activeObject){var r=new fabric.Group([this._activeObject,t]);this.setActiveGroup(r),n=this.getActiveGroup()}t.setActive(!0)}n&amp;&amp;n.saveCoords()},_translateObject:function(e,t){var n=this._currentTransform.target;n.get(&quot;lockMovementX&quot;)||n.set(&quot;left&quot;,e-this._currentTransform.offsetX),n.get(&quot;lockMovementY&quot;)||n.set(&quot;top&quot;,t-this._currentTransform.offsetY)},_scaleObject:function(e,t,n){var r=this._currentTransform,i=this._offset,s=r.target,o=s.get(&quot;lockScalingX&quot;),u=s.get(&quot;lockScalingY&quot;);if(o&amp;&amp;u)return;var a=s.translateToOriginPoint(s.getCenterPoint(),r.originX,r.originY),f=s.toLocalPoint(new fabric.Point(e-i.left,t-i.top),r.originX,r.originY);r.originX===&quot;right&quot;?f.x*=-1:r.originX===&quot;center&quot;&amp;&amp;(f.x*=r.mouseXSign*2,f.x&lt;0&amp;&amp;(r.mouseXSign=-r.mouseXSign)),r.originY===&quot;bottom&quot;?f.y*=-1:r.originY===&quot;center&quot;&amp;&amp;(f.y*=r.mouseYSign*2,f.y&lt;0&amp;&amp;(r.mouseYSign=-r.mouseYSign));var l=s.scaleX,c=s.scaleY;if(n===&quot;equally&quot;&amp;&amp;!o&amp;&amp;!u){var h=f.y+f.x,p=s.height*r.original.scaleY+s.width*r.original.scaleX+s.padding*2-s.strokeWidth*2+1;l=r.original.scaleX*h/p,c=r.original.scaleY*h/p,s.set(&quot;scaleX&quot;,l),s.set(&quot;scaleY&quot;,c)}else n?n===&quot;x&quot;&amp;&amp;!s.get(&quot;lockUniScaling&quot;)?(l=f.x/(s.width+s.padding),o||s.set(&quot;scaleX&quot;,l)):n===&quot;y&quot;&amp;&amp;!s.get(&quot;lockUniScaling&quot;)&amp;&amp;(c=f.y/(s.height+s.padding),u||s.set(&quot;scaleY&quot;,c)):(l=f.x/(s.width+s.padding),c=f.y/(s.height+s.padding),o||s.set(&quot;scaleX&quot;,l),u||s.set(&quot;scaleY&quot;,c));l&lt;0&amp;&amp;(r.originX===&quot;left&quot;?r.originX=&quot;right&quot;:r.originX===&quot;right&quot;&amp;&amp;(r.originX=&quot;left&quot;)),c&lt;0&amp;&amp;(r.originY===&quot;top&quot;?r.originY=&quot;bottom&quot;:r.originY===&quot;bottom&quot;&amp;&amp;(r.originY=&quot;top&quot;)),s.setPositionByOrigin(a,r.originX,r.originY)},_rotateObject:function(e,t){var n=this._currentTransform,s=this._offset;if(n.target.get(&quot;lockRotation&quot;))return;var o=i(n.ey-n.top-s.top,n.ex-n.left-s.left),u=i(t-n.top-s.top,e-n.left-s.left);n.target.angle=r(u-o+n.theta)},_setCursor:function(e){this.upperCanvasEl.style.cursor=e},_resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.setAngle(0)},_drawSelection:function(){var e=this.contextTop,t=this._groupSelector,n=t.left,r=t.top,i=s(n),o=s(r);e.fillStyle=this.selectionColor,e.fillRect(t.ex-(n&gt;0?0:-n),t.ey-(r&gt;0?0:-r),i,o),e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor;if(this.selectionDashArray.length&gt;1){var u=t.ex+a-(n&gt;0?0:i),f=t.ey+a-(r&gt;0?0:o);e.beginPath(),fabric.util.drawDashedLine(e,u,f,u+i,f,this.selectionDashArray),fabric.util.drawDashedLine(e,u,f+o-1,u+i,f+o-1,this.selectionDashArray),fabric.util.drawDashedLine(e,u,f,u,f+o,this.selectionDashArray),fabric.util.drawDashedLine(e,u+i-1,f,u+i-1,f+o,this.selectionDashArray),e.closePath(),e.stroke()}else e.strokeRect(t.ex+a-(n&gt;0?0:i),t.ey+a-(r&gt;0?0:o),i,o)},_findSelectedObjects:function(e){var t=[],n=this._groupSelector.ex,r=this._groupSelector.ey,i=n+this._groupSelector.left,s=r+this._groupSelector.top,a,f=new fabric.Point(o(n,i),o(r,s)),l=new fabric.Point(u(n,i),u(r,s));for(var c=0,h=this._objects.length;c&lt;h;++c){a=this._objects[c];if(!a)continue;(a.intersectsWithRect(f,l)||a.isContainedWithinRect(f,l))&amp;&amp;this.selection&amp;&amp;a.selectable&amp;&amp;(a.setActive(!0),t.push(a))}t.length===1?this.setActiveObject(t[0],e):t.length&gt;1&amp;&amp;(t=new fabric.Group(t),this.setActiveGroup(t),t.saveCoords(),this.fire(&quot;selection:created&quot;,{target:t})),this.renderAll()},findTarget:function(e,t){var n,r=this.getPointer(e);if(this.controlsAboveOverlay&amp;&amp;this.lastRenderedObjectWithControlsAboveOverlay&amp;&amp;this.containsPoint(e,this.lastRenderedObjectWithControlsAboveOverlay)&amp;&amp;this.lastRenderedObjectWithControlsAboveOverlay._findTargetCorner(e,this._offset))return n=this.lastRenderedObjectWithControlsAboveOverlay,n;var i=this.getActiveGroup();if(i&amp;&amp;!t&amp;&amp;this.containsPoint(e,i))return n=i,n;var s=[];for(var o=this._objects.length;o--;)if(this._objects[o]&amp;&amp;this.containsPoint(e,this._objects[o])){if(!this.perPixelTargetFind&amp;&amp;!this._objects[o].perPixelTargetFind){n=this._objects[o],this.relatedTarget=n;break}s[s.length]=this._objects[o]}for(var u=0,a=s.length;u&lt;a;u++){r=this.getPointer(e);var f=this._isTargetTransparent(s[u],r.x,r.y);if(!f){n=s[u],this.relatedTarget=n;break}}if(n&amp;&amp;n.selectable)return n},getPointer:function(e){var n=t(e,this.upperCanvasEl);return{x:n.x-this._offset.left,y:n.y-this._offset.top}},_createUpperCanvas:function(){this.upperCanvasEl=this._createCanvasElement(),this.upperCanvasEl.className=&quot;upper-canvas&quot;,this.wrapperEl.appendChild(this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext(&quot;2d&quot;)},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute(&quot;width&quot;,this.width),this.cacheCanvasEl.setAttribute(&quot;height&quot;,this.height),this.contextCache=this.cacheCanvasEl.getContext(&quot;2d&quot;)},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,&quot;div&quot;,{&quot;class&quot;:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+&quot;px&quot;,height:this.getHeight()+&quot;px&quot;,position:&quot;relative&quot;}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var t=this.getWidth()||e.width,n=this.getHeight()||e.height;fabric.util.setStyle(e,{position:&quot;absolute&quot;,width:t+&quot;px&quot;,height:n+&quot;px&quot;,left:0,top:0}),e.width=t,e.height=n,fabric.util.makeElementUnselectable(e)},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},setActiveObject:function(e,t){return this._activeObject&amp;&amp;this._activeObject.setActive(!1),this._activeObject=e,e.setActive(!0),this.renderAll(),this.fire(&quot;object:selected&quot;,{target:e,e:t}),e.fire(&quot;selected&quot;,{e:t}),this},getActiveObject:function(){return this._activeObject},discardActiveObject:function(){return this._activeObject&amp;&amp;this._activeObject.setActive(!1),this._activeObject=null,this},setActiveGroup:function(e){return this._activeGroup=e,e&amp;&amp;(e.canvas=this,e.setActive(!0)),this},getActiveGroup:function(){return this._activeGroup},discardActiveGroup:function(){var e=this.getActiveGroup();return e&amp;&amp;e.destroy(),this.setActiveGroup(null)},deactivateAll:function(){var e=this.getObjects(),t=0,n=e.length;for(;t&lt;n;t++)e[t].setActive(!1);return this.discardActiveGroup(),this.discardActiveObject(),this},deactivateAllWithDispatch:function(){var e=this.getActiveGroup()||this.getActiveObject();return e&amp;&amp;this.fire(&quot;before:selection:cleared&quot;,{target:e}),this.deactivateAll(),e&amp;&amp;this.fire(&quot;selection:cleared&quot;),this}};fabric.Canvas.prototype.toString=fabric.StaticCanvas.prototype.toString,e(fabric.Canvas.prototype,l);for(var c in fabric.StaticCanvas)c!==&quot;prototype&quot;&amp;&amp;(fabric.Canvas[c]=fabric.StaticCanvas[c]);fabric.isTouchSupported&amp;&amp;(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var e={tr:&quot;ne-resize&quot;,br:&quot;se-resize&quot;,bl:&quot;sw-resize&quot;,tl:&quot;nw-resize&quot;,ml:&quot;w-resize&quot;,mt:&quot;n-resize&quot;,mr:&quot;e-resize&quot;,mb:&quot;s-resize&quot;},t=fabric.util.addListener,n=fabric.util.removeListener,r=fabric.util.getPointer;fabric.util.object.extend(fabric.Canvas.prototype,{_initEvents:function(){var e=this;this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),t(fabric.window,&quot;resize&quot;,this._onResize),fabric.isTouchSupported?(t(this.upperCanvasEl,&quot;touchstart&quot;,this._onMouseDown),t(this.upperCanvasEl,&quot;touchmove&quot;,this._onMouseMove),typeof Event!=&quot;undefined&quot;&amp;&amp;&quot;add&quot;in Event&amp;&amp;Event.add(this.upperCanvasEl,&quot;gesture&quot;,function(t,n){e.__onTransformGesture(t,n)})):(t(this.upperCanvasEl,&quot;mousedown&quot;,this._onMouseDown),t(this.upperCanvasEl,&quot;mousemove&quot;,this._onMouseMove))},_onMouseDown:function(e){this.__onMouseDown(e),!fabric.isTouchSupported&amp;&amp;t(fabric.document,&quot;mouseup&quot;,this._onMouseUp),fabric.isTouchSupported&amp;&amp;t(fabric.document,&quot;touchend&quot;,this._onMouseUp),!fabric.isTouchSupported&amp;&amp;t(fabric.document,&quot;mousemove&quot;,this._onMouseMove),fabric.isTouchSupported&amp;&amp;t(fabric.document,&quot;touchmove&quot;,this._onMouseMove),!fabric.isTouchSupported&amp;&amp;n(this.upperCanvasEl,&quot;mousemove&quot;,this._onMouseMove),fabric.isTouchSupported&amp;&amp;n(this.upperCanvasEl,&quot;touchmove&quot;,this._onMouseMove)},_onMouseUp:function(e){this.__onMouseUp(e),!fabric.isTouchSupported&amp;&amp;n(fabric.document,&quot;mouseup&quot;,this._onMouseUp),fabric.isTouchSupported&amp;&amp;n(fabric.document,&quot;touchend&quot;,this._onMouseUp),!fabric.isTouchSupported&amp;&amp;n(fabric.document,&quot;mousemove&quot;,this._onMouseMove),fabric.isTouchSupported&amp;&amp;n(fabric.document,&quot;touchmove&quot;,this._onMouseMove),!fabric.isTouchSupported&amp;&amp;t(this.upperCanvasEl,&quot;mousemove&quot;,this._onMouseMove),fabric.isTouchSupported&amp;&amp;t(this.upperCanvasEl,&quot;touchmove&quot;,this._onMouseMove)},_onMouseMove:function(e){e.preventDefault&amp;&amp;e.preventDefault(),this.__onMouseMove(e)},_onResize:function(){this.calcOffset()},__onMouseUp:function(e){var t;if(this.isDrawingMode&amp;&amp;this._isCurrentlyDrawing){this.freeDrawing._finalizeAndAddPath(),this.fire(&quot;mouse:up&quot;,{e:e});return}if(this._currentTransform){var n=this._currentTransform;t=n.target,t._scaling&amp;&amp;(t._scaling=!1);var r=this._objects.length;while(r--)this._objects[r].setCoords();t.isMoving=!1,this.stateful&amp;&amp;t.hasStateChanged()&amp;&amp;(this.fire(&quot;object:modified&quot;,{target:t}),t.fire(&quot;modified&quot;)),this._previousOriginX&amp;&amp;(this._currentTransform.target.adjustPosition(this._previousOriginX),this._previousOriginX=null)}this._currentTransform=null,this._groupSelector&amp;&amp;this._findSelectedObjects(e);var i=this.getActiveGroup();i&amp;&amp;(i.setObjectsCoords(),i.set(&quot;isMoving&quot;,!1),this._setCursor(this.defaultCursor)),this._groupSelector=null,this.renderAll(),this._setCursorFromEvent(e,t),this._setCursor(&quot;&quot;);var s=this;setTimeout(function(){s._setCursorFromEvent(e,t)},50),this.fire(&quot;mouse:up&quot;,{target:t,e:e}),t&amp;&amp;t.fire(&quot;mouseup&quot;,{e:e})},__onMouseDown:function(e){var t,n=&quot;which&quot;in e?e.which===1:e.button===1;if(!n&amp;&amp;!fabric.isTouchSupported)return;if(this.isDrawingMode){t=this.getPointer(e),this.freeDrawing._prepareForDrawing(t),this.freeDrawing._captureDrawingPath(t),this.fire(&quot;mouse:down&quot;,{e:e});return}if(this._currentTransform)return;var r=this.findTarget(e),i;t=this.getPointer(e),this._shouldClearSelection(e)?(this._groupSelector={ex:t.x,ey:t.y,top:0,left:0},this.deactivateAllWithDispatch()):(this.stateful&amp;&amp;r.saveState(),(i=r._findTargetCorner(e,this._offset))&amp;&amp;this.onBeforeScaleRotate(r),this._shouldHandleGroupLogic(e,r)?(this._handleGroupLogic(e,r),r=this.getActiveGroup()):(r!==this.getActiveGroup()&amp;&amp;this.deactivateAll(),this.setActiveObject(r,e)),this._setupCurrentTransform(e,r)),this.renderAll(),this.fire(&quot;mouse:down&quot;,{target:r,e:e}),r&amp;&amp;r.fire(&quot;mousedown&quot;,{e:e}),i===&quot;mtr&quot;&amp;&amp;(this._previousOriginX=this._currentTransform.target.originX,this._currentTransform.target.adjustPosition(&quot;center&quot;),this._currentTransform.left=this._currentTransform.target.left,this._currentTransform.top=this._currentTransform.target.top)},__onMouseMove:function(e){var t,n;if(this.isDrawingMode){this._isCurrentlyDrawing&amp;&amp;(n=this.getPointer(e),this.freeDrawing._captureDrawingPath(n),this.clearContext(this.contextTop),this.freeDrawing._render(this.contextTop)),this.upperCanvasEl.style.cursor=this.freeDrawingCursor,this.fire(&quot;mouse:move&quot;,{e:e});return}var i=this._groupSelector;if(i!==null)n=r(e,this.upperCanvasEl),i.left=n.x-this._offset.left-i.ex,i.top=n.y-this._offset.top-i.ey,this.renderTop();else if(!this._currentTransform){var s=this.upperCanvasEl.style;t=this.findTarget(e);if(!t){for(var o=this._objects.length;o--;)this._objects[o]&amp;&amp;!this._objects[o].active&amp;&amp;this._objects[o].setActive(!1);s.cursor=this.defaultCursor}else this._setCursorFromEvent(e,t)}else{n=r(e,this.upperCanvasEl);var u=n.x,a=n.y;this._currentTransform.target.isMoving=!0;var f=this._currentTransform,l=!1;(f.action===&quot;scale&quot;||f.action===&quot;scaleX&quot;||f.action===&quot;scaleY&quot;)&amp;&amp;(e.altKey&amp;&amp;(f.originX!==&quot;center&quot;||f.originY!==&quot;center&quot;)||!e.altKey&amp;&amp;f.originX===&quot;center&quot;&amp;&amp;f.originY===&quot;center&quot;)&amp;&amp;(this._resetCurrentTransform(e),l=!0),this._currentTransform.action===&quot;rotate&quot;?(this._rotateObject(u,a),this.fire(&quot;object:rotating&quot;,{target:this._currentTransform.target,e:e}),this._currentTransform.target.fire(&quot;rotating&quot;)):this._currentTransform.action===&quot;scale&quot;?(e.shiftKey||this.uniScaleTransform?(this._currentTransform.currentAction=&quot;scale&quot;,this._scaleObject(u,a)):(!l&amp;&amp;f.currentAction===&quot;scale&quot;&amp;&amp;this._resetCurrentTransform(e),this._currentTransform.currentAction=&quot;scaleEqually&quot;,this._scaleObject(u,a,&quot;equally&quot;)),this.fire(&quot;object:scaling&quot;,{target:this._currentTransform.target,e:e})):this._currentTransform.action===&quot;scaleX&quot;?(this._scaleObject(u,a,&quot;x&quot;),this.fire(&quot;object:scaling&quot;,{target:this._currentTransform.target,e:e}),this._currentTransform.target.fire(&quot;scaling&quot;,{e:e})):this._currentTransform.action===&quot;scaleY&quot;?(this._scaleObject(u,a,&quot;y&quot;),this.fire(&quot;object:scaling&quot;,{target:this._currentTransform.target,e:e}),this._currentTransform.target.fire(&quot;scaling&quot;,{e:e})):(this._translateObject(u,a),this.fire(&quot;object:moving&quot;,{target:this._currentTransform.target,e:e}),this._setCursor(this.moveCursor),this._currentTransform.target.fire(&quot;moving&quot;,{e:e})),this.renderAll()}this.fire(&quot;mouse:move&quot;,{target:t,e:e}),t&amp;&amp;t.fire(&quot;mousemove&quot;,{e:e})},_setCursorFromEvent:function(t,n){var r=this.upperCanvasEl.style;if(!n)return r.cursor=this.defaultCursor,!1;var i=this.getActiveGroup(),s=n._findTargetCorner&amp;&amp;(!i||!i.contains(n))&amp;&amp;n._findTargetCorner(t,this._offset);if(!s)r.cursor=this.hoverCursor;else if(s in e)r.cursor=e[s];else{if(s!==&quot;mtr&quot;||!n.hasRotatingPoint)return r.cursor=this.defaultCursor,!1;r.cursor=this.rotationCursor}return!0}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){t=t||{};var n=function(){},r=t.onComplete||n,i=t.onChange||n,s=this;return fabric.util.animate({startValue:e.get(&quot;left&quot;),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(t){e.set(&quot;left&quot;,t),s.renderAll(),i()},onComplete:function(){e.setCoords(),r()}}),this},fxCenterObjectV:function(e,t){t=t||{};var n=function(){},r=t.onComplete||n,i=t.onChange||n,s=this;return fabric.util.animate({startValue:e.get(&quot;top&quot;),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(t){e.set(&quot;top&quot;,t),s.renderAll(),i()},onComplete:function(){e.setCoords(),r()}}),this},fxRemove:function(e,t){t=t||{};var n=function(){},r=t.onComplete||n,i=t.onChange||n,s=this;return fabric.util.animate({startValue:e.get(&quot;opacity&quot;),endValue:0,duration:this.FX_DURATION,onStart:function(){e.setActive(!1)},onChange:function(t){e.set(&quot;opacity&quot;,t),s.renderAll(),i()},onComplete:function(){s.remove(e),r()}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(e,t){if(!e)return;var n=typeof e==&quot;string&quot;?JSON.parse(e):e;if(!n||n&amp;&amp;!n.objects)return;this.clear();var r=this;this._enlivenDatalessObjects(n.objects,function(){r._setBgOverlayImages(n,t)})},_enlivenDatalessObjects:function(e,t){function s(e,s){n.insertAt(e,s,!0),e.setCoords(),++r===i&amp;&amp;t&amp;&amp;t()}function o(e,t){var n=e.paths?&quot;paths&quot;:&quot;path&quot;,r=e[n];delete e[n];if(typeof r!=&quot;string&quot;)if(e.type===&quot;image&quot;||e.type===&quot;group&quot;)fabric[fabric.util.string.capitalize(e.type)].fromObject(e,function(e){s(e,t)});else{var i=fabric[fabric.util.string.camelize(fabric.util.string.capitalize(e.type))];if(!i||!i.fromObject)return;r&amp;&amp;(e[n]=r),s(i.fromObject(e),t)}else if(e.type===&quot;image&quot;)fabric.util.loadImage(r,function(n){var i=new fabric.Image(n);i.setSourcePath(r),fabric.util.object.extend(i,e),i.setAngle(e.angle),s(i,t)});else if(e.type===&quot;text&quot;)if(e.useNative)s(fabric.Text.fromObject(e),t);else{e.path=r;var o=fabric.Text.fromObject(e),u=function(){Object.prototype.toString.call(fabric.window.opera)===&quot;[object Opera]&quot;?setTimeout(function(){s(o,t)},500):s(o,t)};fabric.util.getScript(r,u)}else fabric.loadSVGFromURL(r,function(n){var i=fabric.util.groupSVGElements(n,e,r);i instanceof fabric.PathGroup||(fabric.util.object.extend(i,e),typeof e.angle!=&quot;undefined&quot;&amp;&amp;i.setAngle(e.angle)),s(i,t)})}var n=this,r=0,i=e.length;i===0&amp;&amp;t&amp;&amp;t();try{e.forEach(o,this)}catch(u){fabric.log(u)}},loadFromJSON:function(e,t){if(!e)return;var n=typeof e==&quot;string&quot;?JSON.parse(e):e,r=this;return this._enlivenObjects(n.objects,function(){r._setBgOverlayImages(n,t)}),this},_setBgOverlayImages:function(e,t){var n=this,r,i,s;e.backgroundImage?this.setBackgroundImage(e.backgroundImage,function(){n.backgroundImageOpacity=e.backgroundImageOpacity,n.backgroundImageStretch=e.backgroundImageStretch,n.renderAll(),i=!0,t&amp;&amp;s&amp;&amp;r&amp;&amp;t()}):i=!0,e.overlayImage?this.setOverlayImage(e.overlayImage,function(){n.overlayImageLeft=e.overlayImageLeft||0,n.overlayImageTop=e.overlayImageTop||0,n.renderAll(),s=!0,t&amp;&amp;i&amp;&amp;r&amp;&amp;t()}):s=!0,e.background?this.setBackgroundColor(e.background,function(){n.renderAll(),r=!0,t&amp;&amp;s&amp;&amp;i&amp;&amp;t()}):r=!0,!e.backgroundImage&amp;&amp;!e.overlayImage&amp;&amp;!e.background&amp;&amp;t&amp;&amp;t()},_enlivenObjects:function(e,t){var n=this;fabric.util.enlivenObjects(e,function(e){e.forEach(function(e,t){n.insertAt(e,t,!0)}),t&amp;&amp;t()})},_toDataURL:function(e,t){this.clone(function(n){t(n.toDataURL(e))})},_toDataURLWithMultiplier:function(e,t,n){this.clone(function(r){n(r.toDataURLWithMultiplier(e,t))})},clone:function(e){var t=JSON.stringify(this);this.cloneWithoutData(function(n){n.loadFromJSON(t,function(){e&amp;&amp;e(n)})})},cloneWithoutData:function(e){var t=fabric.document.createElement(&quot;canvas&quot;);t.width=this.getWidth(),t.height=this.getHeight();var n=new fabric.Canvas(t);n.clipTo=this.clipTo,this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,function(){n.renderAll(),e&amp;&amp;e(n)}),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):e&amp;&amp;e(n)}}),function(e){&quot;use strict&quot;;var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.toFixed,i=t.util.string.capitalize,s=t.util.degreesToRadians;if(t.Object)return;var o=e.Image;try{var u=typeof require!=&quot;undefined&quot;&amp;&amp;require(&quot;canvas&quot;).Image;u&amp;&amp;(o=u)}catch(a){t.log(a)}t.Object=t.util.createClass({type:&quot;object&quot;,originX:&quot;center&quot;,originY:&quot;center&quot;,top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,cornerSize:12,transparentCorners:!0,padding:0,borderColor:&quot;rgba(102,153,255,0.75)&quot;,cornerColor:&quot;rgba(102,153,255,0.5)&quot;,fill:&quot;rgb(0,0,0)&quot;,fillRule:&quot;source-over&quot;,overlayFill:null,stroke:null,strokeWidth:1,strokeDashArray:null,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,stateProperties:&quot;top left width height scaleX scaleY flipX flipY angle opacity cornerSize fill overlayFill originX originY stroke strokeWidth strokeDashArray fillRule borderScaleFactor transformMatrix selectable shadow visible&quot;.split(&quot; &quot;),initialize:function(e){e&amp;&amp;this.setOptions(e)},_initGradient:function(e){e.fill&amp;&amp;e.fill.colorStops&amp;&amp;!(e.fill instanceof t.Gradient)&amp;&amp;this.set(&quot;fill&quot;,new t.Gradient(e.fill))},_initPattern:function(e){e.fill&amp;&amp;e.fill.source&amp;&amp;!(e.fill instanceof t.Pattern)&amp;&amp;this.set(&quot;fill&quot;,new t.Pattern(e.fill)),e.stroke&amp;&amp;e.stroke.source&amp;&amp;!(e.stroke instanceof t.Pattern)&amp;&amp;this.set(&quot;stroke&quot;,new t.Pattern(e.stroke))},_initShadow:function(e){e.shadow&amp;&amp;!(e.shadow instanceof t.Shadow)&amp;&amp;this.setShadow(e.shadow)},setOptions:function(e){for(var t in e)this.set(t,e[t]);this._initGradient(e),this._initPattern(e),this._initShadow(e)},transform:function(e){e.globalAlpha=this.opacity;var t=this.getCenterPoint();e.translate(t.x,t.y),e.rotate(s(this.angle)),e.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1))},toObject:function(e){var n=t.Object.NUM_FRACTION_DIGITS,i={type:this.type,originX:this.originX,originY:this.originY,left:r(this.left,n),top:r(this.top,n),width:r(this.width,n),height:r(this.height,n),fill:this.fill&amp;&amp;this.fill.toObject?this.fill.toObject():this.fill,overlayFill:this.overlayFill,stroke:this.stroke&amp;&amp;this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:this.strokeWidth,strokeDashArray:this.strokeDashArray,scaleX:r(this.scaleX,n),scaleY:r(this.scaleY,n),angle:r(this.getAngle</div><div class='line' id='LC4'>(),n),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,n),selectable:this.selectable,hasControls:this.hasControls,hasBorders:this.hasBorders,hasRotatingPoint:this.hasRotatingPoint,transparentCorners:this.transparentCorners,perPixelTargetFind:this.perPixelTargetFind,shadow:this.shadow&amp;&amp;this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible};return this.includeDefaultValues||(i=this._removeDefaultValues(i)),t.util.populateWithProperties(this,i,e),i},toDatalessObject:function(e){return this.toObject(e)},getSvgStyles:function(){return[&quot;stroke: &quot;,this.stroke?this.stroke:&quot;none&quot;,&quot;; &quot;,&quot;stroke-width: &quot;,this.strokeWidth?this.strokeWidth:&quot;0&quot;,&quot;; &quot;,&quot;stroke-dasharray: &quot;,this.strokeDashArray?this.strokeDashArray.join(&quot; &quot;):&quot;; &quot;,&quot;fill: &quot;,this.fill?this.fill&amp;&amp;this.fill.toLive?&quot;url(#SVGID_&quot;+this.fill.id+&quot;)&quot;:this.fill:&quot;none&quot;,&quot;; &quot;,&quot;opacity: &quot;,this.opacity?this.opacity:&quot;1&quot;,&quot;;&quot;,this.visible?&quot;&quot;:&quot; visibility: hidden;&quot;].join(&quot;&quot;)},getSvgTransform:function(){var e=this.getAngle(),n=this.getCenterPoint(),i=t.Object.NUM_FRACTION_DIGITS,s=&quot;translate(&quot;+r(n.x,i)+&quot; &quot;+r(n.y,i)+&quot;)&quot;,o=e!==0?&quot; rotate(&quot;+r(e,i)+&quot;)&quot;:&quot;&quot;,u=this.scaleX===1&amp;&amp;this.scaleY===1?&quot;&quot;:&quot; scale(&quot;+r(this.scaleX,i)+&quot; &quot;+r(this.scaleY,i)+&quot;)&quot;,a=this.flipX?&quot;matrix(-1 0 0 1 0 0) &quot;:&quot;&quot;,f=this.flipY?&quot;matrix(1 0 0 -1 0 0)&quot;:&quot;&quot;;return[s,o,u,a,f].join(&quot;&quot;)},_removeDefaultValues:function(e){var n=t.Object.prototype.options;return n&amp;&amp;this.stateProperties.forEach(function(t){e[t]===n[t]&amp;&amp;delete e[t]}),e},isActive:function(){return!!this.active},setActive:function(e){return this.active=!!e,this},toString:function(){return&quot;#&lt;fabric.&quot;+i(this.type)+&quot;&gt;&quot;},get:function(e){return this[e]},set:function(e,t){if(typeof e==&quot;object&quot;)for(var n in e)this._set(n,e[n]);else typeof t==&quot;function&quot;?this._set(e,t(this.get(e))):this._set(e,t);return this},_set:function(e,t){var n=e===&quot;scaleX&quot;||e===&quot;scaleY&quot;;n&amp;&amp;(t=this._constrainScale(t));if(e===&quot;scaleX&quot;&amp;&amp;t&lt;0)this.flipX=!this.flipX,t*=-1;else if(e===&quot;scaleY&quot;&amp;&amp;t&lt;0)this.flipY=!this.flipY,t*=-1;else if(e===&quot;width&quot;||e===&quot;height&quot;)this.minScaleLimit=r(Math.min(.1,1/Math.max(this.width,this.height)),2);return this[e]=t,this},toggle:function(e){var t=this.get(e);return typeof t==&quot;boolean&quot;&amp;&amp;this.set(e,!t),this},setSourcePath:function(e){return this.sourcePath=e,this},render:function(e,n){if(this.width===0||this.height===0||!this.visible)return;e.save();var r=this.transformMatrix;r&amp;&amp;!this.group&amp;&amp;e.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]),n||this.transform(e);if(this.stroke||this.strokeDashArray)e.lineWidth=this.strokeWidth,this.stroke&amp;&amp;this.stroke.toLive?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=this.stroke;this.overlayFill?e.fillStyle=this.overlayFill:this.fill&amp;&amp;(e.fillStyle=this.fill.toLive?this.fill.toLive(e):this.fill),r&amp;&amp;this.group&amp;&amp;(e.translate(-this.group.width/2,-this.group.height/2),e.transform(r[0],r[1],r[2],r[3],r[4],r[5])),this._setShadow(e),this.clipTo&amp;&amp;t.util.clipContext(this,e),this._render(e,n),this.clipTo&amp;&amp;e.restore(),this._removeShadow(e),this.active&amp;&amp;!n&amp;&amp;(this.drawBorders(e),this.drawControls(e)),e.restore()},_setShadow:function(e){if(!this.shadow)return;e.shadowColor=this.shadow.color,e.shadowBlur=this.shadow.blur,e.shadowOffsetX=this.shadow.offsetX,e.shadowOffsetY=this.shadow.offsetY},_removeShadow:function(e){e.shadowColor=&quot;&quot;,e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0},clone:function(e,n){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(n),e):new t.Object(this.toObject(n))},cloneAsImage:function(e){if(t.Image){var n=new o;n.onload=function(){e&amp;&amp;e(new t.Image(n),r),n=n.onload=null};var r={angle:this.getAngle(),flipX:this.getFlipX(),flipY:this.getFlipY()};this.set({angle:0,flipX:!1,flipY:!1}),this.toDataURL(function(e){n.src=e})}return this},toDataURL:function(e){function i(t){t.left=n.width/2,t.top=n.height/2,t.setActive(!1),r.add(t);var i=r.toDataURL();r.dispose(),r=t=null,e&amp;&amp;e(i)}var n=t.util.createCanvasElement();n.width=this.getBoundingRectWidth(),n.height=this.getBoundingRectHeight(),t.util.wrapElement(n,&quot;div&quot;);var r=new t.Canvas(n);r.backgroundColor=&quot;transparent&quot;,r.renderAll(),this.constructor.async?this.clone(i):i(this.clone())},hasStateChanged:function(){return this.stateProperties.some(function(e){return this[e]!==this.originalState[e]},this)},saveState:function(e){return this.stateProperties.forEach(function(e){this.originalState[e]=this.get(e)},this),e&amp;&amp;e.stateProperties&amp;&amp;e.stateProperties.forEach(function(e){this.originalState[e]=this.get(e)},this),this},setupState:function(){this.originalState={},this.saveState()},isType:function(e){return this.type===e},toGrayscale:function(){var e=this.get(&quot;fill&quot;);return e&amp;&amp;this.set(&quot;overlayFill&quot;,(new t.Color(e)).toGrayscale().toRgb()),this},complexity:function(){return 0},toJSON:function(e){return this.toObject(e)},setGradient:function(e,n){n||(n={});var r={colorStops:[]};r.type=n.type||(n.r1||n.r2?&quot;radial&quot;:&quot;linear&quot;),r.coords={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2};if(n.r1||n.r2)r.coords.r1=n.r1,r.coords.r2=n.r2;for(var i in n.colorStops){var s=new t.Color(n.colorStops[i]);r.colorStops.push({offset:i,color:s.toRgb(),opacity:s.getAlpha()})}this.set(e,t.Gradient.forObject(this,r))},setPatternFill:function(e){this.set(&quot;fill&quot;,new t.Pattern(e))},setShadow:function(e){this.set(&quot;shadow&quot;,new t.Shadow(e))},animate:function(){if(arguments[0]&amp;&amp;typeof arguments[0]==&quot;object&quot;)for(var e in arguments[0])this._animate(e,arguments[0][e],arguments[1]);else this._animate.apply(this,arguments);return this},_animate:function(e,n,r){var i=this,s;n=n.toString(),r?r=t.util.object.clone(r):r={},~e.indexOf(&quot;.&quot;)&amp;&amp;(s=e.split(&quot;.&quot;));var o=s?this.get(s[0])[s[1]]:this.get(e);&quot;from&quot;in r||(r.from=o),~n.indexOf(&quot;=&quot;)?n=o+parseFloat(n.replace(&quot;=&quot;,&quot;&quot;)):n=parseFloat(n),t.util.animate({startValue:r.from,endValue:n,byValue:r.by,easing:r.easing,duration:r.duration,onChange:function(t){s?i[s[0]][s[1]]=t:i.set(e,t),r.onChange&amp;&amp;r.onChange()},onComplete:function(){i.setCoords(),r.onComplete&amp;&amp;r.onComplete()}})},centerH:function(){return this.canvas.centerObjectH(this),this},centerV:function(){return this.canvas.centerObjectV(this),this},center:function(){return this.centerH().centerV()},remove:function(){return this.canvas.remove(this)},sendToBack:function(){return this.canvas.sendToBack(this),this},bringToFront:function(){return this.canvas.bringToFront(this),this},sendBackwards:function(){return this.canvas.sendBackwards(this),this},bringForward:function(){return this.canvas.bringForward(this),this}}),t.util.createAccessors(t.Object),t.Object.prototype.rotate=t.Object.prototype.setAngle,n(t.Object.prototype,t.Observable),t.Object.NUM_FRACTION_DIGITS=2,t.Object.__uid=0}(typeof exports!=&quot;undefined&quot;?exports:this),function(){var e=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{translateToCenterPoint:function(t,n,r){var i=t.x,s=t.y;return n===&quot;left&quot;?i=t.x+this.getWidth()/2:n===&quot;right&quot;&amp;&amp;(i=t.x-this.getWidth()/2),r===&quot;top&quot;?s=t.y+this.getHeight()/2:r===&quot;bottom&quot;&amp;&amp;(s=t.y-this.getHeight()/2),fabric.util.rotatePoint(new fabric.Point(i,s),t,e(this.angle))},translateToOriginPoint:function(t,n,r){var i=t.x,s=t.y;return n===&quot;left&quot;?i=t.x-this.getWidth()/2:n===&quot;right&quot;&amp;&amp;(i=t.x+this.getWidth()/2),r===&quot;top&quot;?s=t.y-this.getHeight()/2:r===&quot;bottom&quot;&amp;&amp;(s=t.y+this.getHeight()/2),fabric.util.rotatePoint(new fabric.Point(i,s),t,e(this.angle))},getCenterPoint:function(){return this.translateToCenterPoint(new fabric.Point(this.left,this.top),this.originX,this.originY)},toLocalPoint:function(t,n,r){var i=this.getCenterPoint(),s,o;return n!==undefined&amp;&amp;r!==undefined?(n===&quot;left&quot;?s=i.x-this.getWidth()/2:n===&quot;right&quot;?s=i.x+this.getWidth()/2:s=i.x,r===&quot;top&quot;?o=i.y-this.getHeight()/2:r===&quot;bottom&quot;?o=i.y+this.getHeight()/2:o=i.y):(s=this.left,o=this.top),fabric.util.rotatePoint(new fabric.Point(t.x,t.y),i,-e(this.angle)).subtractEquals(new fabric.Point(s,o))},setPositionByOrigin:function(e,t,n){var r=this.translateToCenterPoint(e,t,n),i=this.translateToOriginPoint(r,this.originX,this.originY);this.set(&quot;left&quot;,i.x),this.set(&quot;top&quot;,i.y)},adjustPosition:function(t){var n=e(this.angle),r=this.getWidth()/2,i=Math.cos(n)*r,s=Math.sin(n)*r,o=this.getWidth(),u=Math.cos(n)*o,a=Math.sin(n)*o;this.originX===&quot;center&quot;&amp;&amp;t===&quot;left&quot;||this.originX===&quot;right&quot;&amp;&amp;t===&quot;center&quot;?(this.left-=i,this.top-=s):this.originX===&quot;left&quot;&amp;&amp;t===&quot;center&quot;||this.originX===&quot;center&quot;&amp;&amp;t===&quot;right&quot;?(this.left+=i,this.top+=s):this.originX===&quot;left&quot;&amp;&amp;t===&quot;right&quot;?(this.left+=u,this.top+=a):this.originX===&quot;right&quot;&amp;&amp;t===&quot;left&quot;&amp;&amp;(this.left-=u,this.top-=a),this.setCoords(),this.originX=t}})}(),function(){var e=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{intersectsWithRect:function(e,t){var n=this.oCoords,r=new fabric.Point(n.tl.x,n.tl.y),i=new fabric.Point(n.tr.x,n.tr.y),s=new fabric.Point(n.bl.x,n.bl.y),o=new fabric.Point(n.br.x,n.br.y),u=fabric.Intersection.intersectPolygonRectangle([r,i,o,s],e,t);return u.status===&quot;Intersection&quot;},intersectsWithObject:function(e){function t(e){return{tl:new fabric.Point(e.tl.x,e.tl.y),tr:new fabric.Point(e.tr.x,e.tr.y),bl:new fabric.Point(e.bl.x,e.bl.y),br:new fabric.Point(e.br.x,e.br.y)}}var n=t(this.oCoords),r=t(e.oCoords),i=fabric.Intersection.intersectPolygonPolygon([n.tl,n.tr,n.br,n.bl],[r.tl,r.tr,r.br,r.bl]);return i.status===&quot;Intersection&quot;},isContainedWithinObject:function(e){return this.isContainedWithinRect(e.oCoords.tl,e.oCoords.br)},isContainedWithinRect:function(e,t){var n=this.oCoords,r=new fabric.Point(n.tl.x,n.tl.y),i=new fabric.Point(n.tr.x,n.tr.y),s=new fabric.Point(n.bl.x,n.bl.y);return r.x&gt;e.x&amp;&amp;i.x&lt;t.x&amp;&amp;r.y&gt;e.y&amp;&amp;s.y&lt;t.y},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(){this.oCoords||this.setCoords();var e=[this.oCoords.tl.x,this.oCoords.tr.x,this.oCoords.br.x,this.oCoords.bl.x],t=fabric.util.array.min(e),n=fabric.util.array.max(e),r=Math.abs(t-n),i=[this.oCoords.tl.y,this.oCoords.tr.y,this.oCoords.br.y,this.oCoords.bl.y],s=fabric.util.array.min(i),o=fabric.util.array.max(i),u=Math.abs(s-o);return{left:t,top:s,width:r,height:u}},getWidth:function(){return this.width*this.scaleX},getHeight:function(){return this.height*this.scaleY},_constrainScale:function(e){return Math.abs(e)&lt;this.minScaleLimit?e&lt;0?-this.minScaleLimit:this.minScaleLimit:e},scale:function(e){return e=this._constrainScale(e),e&lt;0&amp;&amp;(this.flipX=!this.flipX,this.flipY=!this.flipY,e*=-1),this.scaleX=e,this.scaleY=e,this.setCoords(),this},scaleToWidth:function(e){var t=this.getBoundingRectWidth()/this.getWidth();return this.scale(e/this.width/t)},scaleToHeight:function(e){var t=this.getBoundingRectHeight()/this.getHeight();return this.scale(e/this.height/t)},setCoords:function(){var t=this.strokeWidth&gt;1?this.strokeWidth:0,n=this.padding,r=e(this.angle);this.currentWidth=(this.width+t)*this.scaleX+n*2,this.currentHeight=(this.height+t)*this.scaleY+n*2,this.currentWidth&lt;0&amp;&amp;(this.currentWidth=Math.abs(this.currentWidth));var i=Math.sqrt(Math.pow(this.currentWidth/2,2)+Math.pow(this.currentHeight/2,2)),s=Math.atan(this.currentHeight/this.currentWidth),o=Math.cos(s+r)*i,u=Math.sin(s+r)*i,a=Math.sin(r),f=Math.cos(r),l=this.getCenterPoint(),c={x:l.x-o,y:l.y-u},h={x:c.x+this.currentWidth*f,y:c.y+this.currentWidth*a},p={x:h.x-this.currentHeight*a,y:h.y+this.currentHeight*f},d={x:c.x-this.currentHeight*a,y:c.y+this.currentHeight*f},v={x:c.x-this.currentHeight/2*a,y:c.y+this.currentHeight/2*f},m={x:c.x+this.currentWidth/2*f,y:c.y+this.currentWidth/2*a},g={x:h.x-this.currentHeight/2*a,y:h.y+this.currentHeight/2*f},y={x:d.x+this.currentWidth/2*f,y:d.y+this.currentWidth/2*a},b={x:c.x+this.currentWidth/2*f,y:c.y+this.currentWidth/2*a};return this.oCoords={tl:c,tr:h,br:p,bl:d,ml:v,mt:m,mr:g,mb:y,mtr:b},this._setCornerCoords(),this}})}(),function(){var e=fabric.util.getPointer,t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{_findTargetCorner:function(t,n){if(!this.hasControls||!this.active)return!1;var r=e(t,this.canvas.upperCanvasEl),i=r.x-n.left,s=r.y-n.top,o,u;for(var a in this.oCoords){if(a===&quot;mtr&quot;&amp;&amp;!this.hasRotatingPoint)continue;if(!(!this.get(&quot;lockUniScaling&quot;)||a!==&quot;mt&quot;&amp;&amp;a!==&quot;mr&quot;&amp;&amp;a!==&quot;mb&quot;&amp;&amp;a!==&quot;ml&quot;))continue;u=this._getImageLines(this.oCoords[a].corner,a),o=this._findCrossPoints(i,s,u);if(o%2===1&amp;&amp;o!==0)return this.__corner=a,a}return!1},_findCrossPoints:function(e,t,n){var r,i,s,o,u,a,f=0,l;for(var c in n){l=n[c];if(l.o.y&lt;t&amp;&amp;l.d.y&lt;t)continue;if(l.o.y&gt;=t&amp;&amp;l.d.y&gt;=t)continue;l.o.x===l.d.x&amp;&amp;l.o.x&gt;=e?(u=l.o.x,a=t):(r=0,i=(l.d.y-l.o.y)/(l.d.x-l.o.x),s=t-r*e,o=l.o.y-i*l.o.x,u=-(s-o)/(r-i),a=s+r*u),u&gt;=e&amp;&amp;(f+=1);if(f===2)break}return f},_getImageLines:function(e){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_setCornerCoords:function(){var e=this.oCoords,n=t(this.angle),r=t(45-this.angle),i=Math.sqrt(2*Math.pow(this.cornerSize,2))/2,s=i*Math.cos(r),o=i*Math.sin(r),u=Math.sin(n),a=Math.cos(n);e.tl.corner={tl:{x:e.tl.x-o,y:e.tl.y-s},tr:{x:e.tl.x+s,y:e.tl.y-o},bl:{x:e.tl.x-s,y:e.tl.y+o},br:{x:e.tl.x+o,y:e.tl.y+s}},e.tr.corner={tl:{x:e.tr.x-o,y:e.tr.y-s},tr:{x:e.tr.x+s,y:e.tr.y-o},br:{x:e.tr.x+o,y:e.tr.y+s},bl:{x:e.tr.x-s,y:e.tr.y+o}},e.bl.corner={tl:{x:e.bl.x-o,y:e.bl.y-s},bl:{x:e.bl.x-s,y:e.bl.y+o},br:{x:e.bl.x+o,y:e.bl.y+s},tr:{x:e.bl.x+s,y:e.bl.y-o}},e.br.corner={tr:{x:e.br.x+s,y:e.br.y-o},bl:{x:e.br.x-s,y:e.br.y+o},br:{x:e.br.x+o,y:e.br.y+s},tl:{x:e.br.x-o,y:e.br.y-s}},e.ml.corner={tl:{x:e.ml.x-o,y:e.ml.y-s},tr:{x:e.ml.x+s,y:e.ml.y-o},bl:{x:e.ml.x-s,y:e.ml.y+o},br:{x:e.ml.x+o,y:e.ml.y+s}},e.mt.corner={tl:{x:e.mt.x-o,y:e.mt.y-s},tr:{x:e.mt.x+s,y:e.mt.y-o},bl:{x:e.mt.x-s,y:e.mt.y+o},br:{x:e.mt.x+o,y:e.mt.y+s}},e.mr.corner={tl:{x:e.mr.x-o,y:e.mr.y-s},tr:{x:e.mr.x+s,y:e.mr.y-o},bl:{x:e.mr.x-s,y:e.mr.y+o},br:{x:e.mr.x+o,y:e.mr.y+s}},e.mb.corner={tl:{x:e.mb.x-o,y:e.mb.y-s},tr:{x:e.mb.x+s,y:e.mb.y-o},bl:{x:e.mb.x-s,y:e.mb.y+o},br:{x:e.mb.x+o,y:e.mb.y+s}},e.mtr.corner={tl:{x:e.mtr.x-o+u*this.rotatingPointOffset,y:e.mtr.y-s-a*this.rotatingPointOffset},tr:{x:e.mtr.x+s+u*this.rotatingPointOffset,y:e.mtr.y-o-a*this.rotatingPointOffset},bl:{x:e.mtr.x-s+u*this.rotatingPointOffset,y:e.mtr.y+o-a*this.rotatingPointOffset},br:{x:e.mtr.x+o+u*this.rotatingPointOffset,y:e.mtr.y+s-a*this.rotatingPointOffset}}},drawBorders:function(e){if(!this.hasBorders)return;var t=this.padding,n=t*2,r=this.strokeWidth&gt;1?this.strokeWidth:0;e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,e.strokeStyle=this.borderColor;var i=1/this._constrainScale(this.scaleX),s=1/this._constrainScale(this.scaleY);e.lineWidth=1/this.borderScaleFactor,e.scale(i,s);var o=this.getWidth(),u=this.getHeight();e.strokeRect(~~(-(o/2)-t-r/2*this.scaleX)+.5,~~(-(u/2)-t-r/2*this.scaleY)+.5,~~(o+n+r*this.scaleX),~~(u+n+r*this.scaleY));if(this.hasRotatingPoint&amp;&amp;!this.get(&quot;lockRotation&quot;)&amp;&amp;this.hasControls){var a=(this.flipY?u+r*this.scaleY+t*2:-u-r*this.scaleY-t*2)/2;e.beginPath(),e.moveTo(0,a),e.lineTo(0,a+(this.flipY?this.rotatingPointOffset:-this.rotatingPointOffset)),e.closePath(),e.stroke()}return e.restore(),this},drawControls:function(e){if(!this.hasControls)return;var t=this.cornerSize,n=t/2,r=this.strokeWidth/2,i=-(this.width/2),s=-(this.height/2),o,u,a=t/this.scaleX,f=t/this.scaleY,l=this.padding/this.scaleX,c=this.padding/this.scaleY,h=n/this.scaleY,p=n/this.scaleX,d=(n-t)/this.scaleX,v=(n-t)/this.scaleY,m=this.height,g=this.width,y=this.transparentCorners?&quot;strokeRect&quot;:&quot;fillRect&quot;,b=typeof G_vmlCanvasManager!=&quot;undefined&quot;;return e.save(),e.lineWidth=1/Math.max(this.scaleX,this.scaleY),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,e.strokeStyle=e.fillStyle=this.cornerColor,o=i-p-r-l,u=s-h-r-c,b||e.clearRect(o,u,a,f),e[y](o,u,a,f),o=i+g-p+r+l,u=s-h-r-c,b||e.clearRect(o,u,a,f),e[y](o,u,a,f),o=i-p-r-l,u=s+m+v+r+c,b||e.clearRect(o,u,a,f),e[y](o,u,a,f),o=i+g+d+r+l,u=s+m+v+r+c,b||e.clearRect(o,u,a,f),e[y](o,u,a,f),this.get(&quot;lockUniScaling&quot;)||(o=i+g/2-p,u=s-h-r-c,b||e.clearRect(o,u,a,f),e[y](o,u,a,f),o=i+g/2-p,u=s+m+v+r+c,b||e.clearRect(o,u,a,f),e[y](o,u,a,f),o=i+g+d+r+l,u=s+m/2-h,b||e.clearRect(o,u,a,f),e[y](o,u,a,f),o=i-p-r-l,u=s+m/2-h,b||e.clearRect(o,u,a,f),e[y](o,u,a,f)),this.hasRotatingPoint&amp;&amp;(o=i+g/2-p,u=this.flipY?s+m+this.rotatingPointOffset/this.scaleY-f/2+r+c:s-this.rotatingPointOffset/this.scaleY-f/2-r-c,b||e.clearRect(o,u,a,f),e[y](o,u,a,f)),e.restore(),this}})}(),function(e){&quot;use strict&quot;;var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r={x1:1,x2:1,y1:1,y2:1};if(t.Line){t.warn(&quot;fabric.Line is already defined&quot;);return}t.Line=t.util.createClass(t.Object,{type:&quot;line&quot;,initialize:function(e,t){t=t||{},e||(e=[0,0,0,0]),this.callSuper(&quot;initialize&quot;,t),this.set(&quot;x1&quot;,e[0]),this.set(&quot;y1&quot;,e[1]),this.set(&quot;x2&quot;,e[2]),this.set(&quot;y2&quot;,e[3]),this._setWidthHeight(t)},_setWidthHeight:function(e){e||(e={}),this.set(&quot;width&quot;,this.x2-this.x1||1),this.set(&quot;height&quot;,this.y2-this.y1||1),this.set(&quot;left&quot;,&quot;left&quot;in e?e.left:this.x1+this.width/2),this.set(&quot;top&quot;,&quot;top&quot;in e?e.top:this.y1+this.height/2)},_set:function(e,t){return this[e]=t,e in r&amp;&amp;this._setWidthHeight(),this},_render:function(e){e.beginPath(),this.group&amp;&amp;e.translate(-this.group.width/2+this.left,-this.group.height/2+this.top),e.moveTo(this.width===1?0:-this.width/2,this.height===1?0:-this.height/2),e.lineTo(this.width===1?0:this.width/2,this.height===1?0:this.height/2),e.lineWidth=this.strokeWidth;var t=e.strokeStyle;e.strokeStyle=e.fillStyle,e.stroke(),e.strokeStyle=t},complexity:function(){return 1},toObject:function(e){return n(this.callSuper(&quot;toObject&quot;,e),{x1:this.get(&quot;x1&quot;),y1:this.get(&quot;y1&quot;),x2:this.get(&quot;x2&quot;),y2:this.get(&quot;y2&quot;)})},toSVG:function(){var e=[];return this.stroke&amp;&amp;this.stroke.toLive&amp;&amp;e.push(this.stroke.toSVG(this,!0)),e.push(&quot;&lt;line &quot;,&#39;x1=&quot;&#39;,this.get(&quot;x1&quot;),&#39;&quot; y1=&quot;&#39;,this.get(&quot;y1&quot;),&#39;&quot; x2=&quot;&#39;,this.get(&quot;x2&quot;),&#39;&quot; y2=&quot;&#39;,this.get(&quot;y2&quot;),&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot;/&gt;&#39;),e.join(&quot;&quot;)}}),t.Line.ATTRIBUTE_NAMES=&quot;x1 y1 x2 y2 stroke stroke-width transform&quot;.split(&quot; &quot;),t.Line.fromElement=function(e,r){var i=t.parseAttributes(e,t.Line.ATTRIBUTE_NAMES),s=[i.x1||0,i.y1||0,i.x2||0,i.y2||0];return new t.Line(s,n(i,r))},t.Line.fromObject=function(e){var n=[e.x1,e.y1,e.x2,e.y2];return new t.Line(n,e)}}(typeof exports!=&quot;undefined&quot;?exports:this),function(e){&quot;use strict&quot;;function i(e){return&quot;radius&quot;in e&amp;&amp;e.radius&gt;0}var t=e.fabric||(e.fabric={}),n=Math.PI*2,r=t.util.object.extend;if(t.Circle){t.warn(&quot;fabric.Circle is already defined.&quot;);return}t.Circle=t.util.createClass(t.Object,{type:&quot;circle&quot;,initialize:function(e){e=e||{},this.set(&quot;radius&quot;,e.radius||0),this.callSuper(&quot;initialize&quot;,e);var t=this.get(&quot;radius&quot;)*2;this.set(&quot;width&quot;,t).set(&quot;height&quot;,t)},toObject:function(e){return r(this.callSuper(&quot;toObject&quot;,e),{radius:this.get(&quot;radius&quot;)})},toSVG:function(){var e=[];return this.fill&amp;&amp;this.fill.toLive&amp;&amp;e.push(this.fill.toSVG(this,!1)),this.stroke&amp;&amp;this.stroke.toLive&amp;&amp;e.push(this.stroke.toSVG(this,!1)),e.push(&quot;&lt;circle &quot;,&#39;cx=&quot;0&quot; cy=&quot;0&quot; &#39;,&#39;r=&quot;&#39;,this.radius,&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;&#39;,this.getSvgTransform(),&#39;&quot;/&gt;&#39;),e.join(&quot;&quot;)},_render:function(e,t){e.beginPath(),e.globalAlpha=this.group?e.globalAlpha*this.opacity:this.opacity,e.arc(t?this.left:0,t?this.top:0,this.radius,0,n,!1),e.closePath(),this.fill&amp;&amp;e.fill(),this._removeShadow(e),this.stroke&amp;&amp;e.stroke()},getRadiusX:function(){return this.get(&quot;radius&quot;)*this.get(&quot;scaleX&quot;)},getRadiusY:function(){return this.get(&quot;radius&quot;)*this.get(&quot;scaleY&quot;)},setRadius:function(e){this.radius=e,this.set(&quot;width&quot;,e*2).set(&quot;height&quot;,e*2)},complexity:function(){return 1}}),t.Circle.ATTRIBUTE_NAMES=&quot;cx cy r fill fill-opacity opacity stroke stroke-width transform&quot;.split(&quot; &quot;),t.Circle.fromElement=function(e,n){n||(n={});var s=t.parseAttributes(e,t.Circle.ATTRIBUTE_NAMES);if(!i(s))throw new Error(&quot;value of `r` attribute is required and can not be negative&quot;);&quot;left&quot;in s&amp;&amp;(s.left-=n.width/2||0),&quot;top&quot;in s&amp;&amp;(s.top-=n.height/2||0);var o=new t.Circle(r(s,n));return o.cx=parseFloat(e.getAttribute(&quot;cx&quot;))||0,o.cy=parseFloat(e.getAttribute(&quot;cy&quot;))||0,o},t.Circle.fromObject=function(e){return new t.Circle(e)}}(typeof exports!=&quot;undefined&quot;?exports:this),function(e){&quot;use strict&quot;;var t=e.fabric||(e.fabric={});if(t.Triangle){t.warn(&quot;fabric.Triangle is already defined&quot;);return}t.Triangle=t.util.createClass(t.Object,{type:&quot;triangle&quot;,initialize:function(e){e=e||{},this.callSuper(&quot;initialize&quot;,e),this.set(&quot;width&quot;,e.width||100).set(&quot;height&quot;,e.height||100)},_render:function(e){var t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this.fill&amp;&amp;e.fill(),this.stroke&amp;&amp;e.stroke()},complexity:function(){return 1},toSVG:function(){var e=[],t=this.width/2,n=this.height/2,r=[-t+&quot; &quot;+n,&quot;0 &quot;+ -n,t+&quot; &quot;+n].join(&quot;,&quot;);return this.fill&amp;&amp;this.fill.toLive&amp;&amp;e.push(this.fill.toSVG(this,!0)),this.stroke&amp;&amp;this.stroke.toLive&amp;&amp;e.push(this.stroke.toSVG(this,!0)),e.push(&quot;&lt;polygon &quot;,&#39;points=&quot;&#39;,r,&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;&#39;,this.getSvgTransform(),&#39;&quot;/&gt;&#39;),e.join(&quot;&quot;)}}),t.Triangle.fromObject=function(e){return new t.Triangle(e)}}(typeof exports!=&quot;undefined&quot;?exports:this),function(e){&quot;use strict&quot;;var t=e.fabric||(e.fabric={}),n=Math.PI*2,r=t.util.object.extend;if(t.Ellipse){t.warn(&quot;fabric.Ellipse is already defined.&quot;);return}t.Ellipse=t.util.createClass(t.Object,{type:&quot;ellipse&quot;,rx:0,ry:0,initialize:function(e){e=e||{},this.callSuper(&quot;initialize&quot;,e),this.set(&quot;rx&quot;,e.rx||0),this.set(&quot;ry&quot;,e.ry||0),this.set(&quot;width&quot;,this.get(&quot;rx&quot;)*2),this.set(&quot;height&quot;,this.get(&quot;ry&quot;)*2)},toObject:function(e){return r(this.callSuper(&quot;toObject&quot;,e),{rx:this.get(&quot;rx&quot;),ry:this.get(&quot;ry&quot;)})},toSVG:function(){var e=[];return this.fill&amp;&amp;this.fill.toLive&amp;&amp;e.push(this.fill.toSVG(this,!1)),this.stroke&amp;&amp;this.stroke.toLive&amp;&amp;e.push(this.stroke.toSVG(this,!1)),e.push(&quot;&lt;ellipse &quot;,&#39;rx=&quot;&#39;,this.get(&quot;rx&quot;),&#39;&quot; ry=&quot;&#39;,this.get(&quot;ry&quot;),&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;&#39;,this.getSvgTransform(),&#39;&quot;/&gt;&#39;),e.join(&quot;&quot;)},render:function(e,t){if(this.rx===0||this.ry===0)return;return this.callSuper(&quot;render&quot;,e,t)},_render:function(e,t){e.beginPath(),e.save(),e.globalAlpha=this.group?e.globalAlpha*this.opacity:this.opacity,this.transformMatrix&amp;&amp;this.group&amp;&amp;e.translate(this.cx,this.cy),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(t?this.left:0,t?this.top:0,this.rx,0,n,!1),this.stroke&amp;&amp;e.stroke(),this._removeShadow(e),this.fill&amp;&amp;e.fill(),e.restore()},complexity:function(){return 1}}),t.Ellipse.ATTRIBUTE_NAMES=&quot;cx cy rx ry fill fill-opacity opacity stroke stroke-width transform&quot;.split(&quot; &quot;),t.Ellipse.fromElement=function(e,n){n||(n={});var i=t.parseAttributes(e,t.Ellipse.ATTRIBUTE_NAMES),s=i.left,o=i.top;&quot;left&quot;in i&amp;&amp;(i.left-=n.width/2||0),&quot;top&quot;in i&amp;&amp;(i.top-=n.height/2||0);var u=new t.Ellipse(r(i,n));return u.cx=s||0,u.cy=o||0,u},t.Ellipse.fromObject=function(e){return new t.Ellipse(e)}}(typeof exports!=&quot;undefined&quot;?exports:this),function(e){&quot;use strict&quot;;function r(e){return e.left=e.left||0,e.top=e.top||0,e}var t=e.fabric||(e.fabric={}),n=t.util.object.extend;if(t.Rect){console.warn(&quot;fabric.Rect is already defined&quot;);return}t.Rect=t.util.createClass(t.Object,{type:&quot;rect&quot;,rx:0,ry:0,initialize:function(e){e=e||{},this._initStateProperties(),this.callSuper(&quot;initialize&quot;,e),this._initRxRy(),this.x=0,this.y=0},_initStateProperties:function(){this.stateProperties=this.stateProperties.concat([&quot;rx&quot;,&quot;ry&quot;])},_initRxRy:function(){this.rx&amp;&amp;!this.ry?this.ry=this.rx:this.ry&amp;&amp;!this.rx&amp;&amp;(this.rx=this.ry)},_render:function(e){var t=this.rx||0,n=this.ry||0,r=-this.width/2,i=-this.height/2,s=this.width,o=this.height;e.beginPath(),e.globalAlpha=this.group?e.globalAlpha*this.opacity:this.opacity,this.transformMatrix&amp;&amp;this.group&amp;&amp;e.translate(this.width/2+this.x,this.height/2+this.y),!this.transformMatrix&amp;&amp;this.group&amp;&amp;e.translate(-this.group.width/2+this.width/2+this.x,-this.group.height/2+this.height/2+this.y),e.moveTo(r+t,i),e.lineTo(r+s-t,i),e.quadraticCurveTo(r+s,i,r+s,i+n,r+s,i+n),e.lineTo(r+s,i+o-n),e.quadraticCurveTo(r+s,i+o,r+s-t,i+o,r+s-t,i+o),e.lineTo(r+t,i+o),e.quadraticCurveTo(r,i+o,r,i+o-n,r,i+o-n),e.lineTo(r,i+n),e.quadraticCurveTo(r,i,r+t,i,r+t,i),e.closePath(),this.fill&amp;&amp;e.fill(),this._removeShadow(e),this.strokeDashArray?this._renderDashedStroke(e):this.stroke&amp;&amp;e.stroke()},_renderDashedStroke:function(e){function u(u,a){var f=0,l=0,c=(a?i.height:i.width)+s*2;while(f&lt;c){var h=i.strokeDashArray[t++];f+=h,f&gt;c&amp;&amp;(l=f-c),u?n+=h*u-(l*u||0):r+=h*a-(l*a||0),e[1&amp;t?&quot;moveTo&quot;:&quot;lineTo&quot;](n,r),t&gt;=o&amp;&amp;(t=0)}}1&amp;this.strokeDashArray.length&amp;&amp;this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray);var t=0,n=-this.width/2,r=-this.height/2,i=this,s=this.padding,o=this.strokeDashArray.length;e.save(),e.beginPath(),u(1,0),u(0,1),u(-1,0),u(0,-1),e.stroke(),e.closePath(),e.restore()},_normalizeLeftTopProperties:function(e){return e.left&amp;&amp;this.set(&quot;left&quot;,e.left+this.getWidth()/2),this.set(&quot;x&quot;,e.left||0),e.top&amp;&amp;this.set(&quot;top&quot;,e.top+this.getHeight()/2),this.set(&quot;y&quot;,e.top||0),this},complexity:function(){return 1},toObject:function(e){return n(this.callSuper(&quot;toObject&quot;,e),{rx:this.get(&quot;rx&quot;)||0,ry:this.get(&quot;ry&quot;)||0})},toSVG:function(){var e=[];return this.fill&amp;&amp;this.fill.toLive&amp;&amp;e.push(this.fill.toSVG(this,!1)),this.stroke&amp;&amp;this.stroke.toLive&amp;&amp;e.push(this.stroke.toSVG(this,!1)),e.push(&quot;&lt;rect &quot;,&#39;x=&quot;&#39;,-1*this.width/2,&#39;&quot; y=&quot;&#39;,-1*this.height/2,&#39;&quot; rx=&quot;&#39;,this.get(&quot;rx&quot;),&#39;&quot; ry=&quot;&#39;,this.get(&quot;ry&quot;),&#39;&quot; width=&quot;&#39;,this.width,&#39;&quot; height=&quot;&#39;,this.height,&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;&#39;,this.getSvgTransform(),&#39;&quot;/&gt;&#39;),e.join(&quot;&quot;)}}),t.Rect.ATTRIBUTE_NAMES=&quot;x y width height rx ry fill fill-opacity opacity stroke stroke-width transform&quot;.split(&quot; &quot;),t.Rect.fromElement=function(e,i){if(!e)return null;var s=t.parseAttributes(e,t.Rect.ATTRIBUTE_NAMES);s=r(s);var o=new t.Rect(n(i?t.util.object.clone(i):{},s));return o._normalizeLeftTopProperties(s),o},t.Rect.fromObject=function(e){return new t.Rect(e)}}(typeof exports!=&quot;undefined&quot;?exports:this),function(e){&quot;use strict&quot;;var t=e.fabric||(e.fabric={}),n=t.util.toFixed;if(t.Polyline){t.warn(&quot;fabric.Polyline is already defined&quot;);return}t.Polyline=t.util.createClass(t.Object,{type:&quot;polyline&quot;,initialize:function(e,t,n){t=t||{},this.set(&quot;points&quot;,e),this.callSuper(&quot;initialize&quot;,t),this._calcDimensions(n)},_calcDimensions:function(e){return t.Polygon.prototype._calcDimensions.call(this,e)},toObject:function(e){return t.Polygon.prototype.toObject.call(this,e)},toSVG:function(){var e=[],t=[];for(var r=0,i=this.points.length;r&lt;i;r++)e.push(n(this.points[r].x,2),&quot;,&quot;,n(this.points[r].y,2),&quot; &quot;);return this.fill&amp;&amp;this.fill.toLive&amp;&amp;t.push(this.fill.toSVG(this,!1)),this.stroke&amp;&amp;this.stroke.toLive&amp;&amp;t.push(this.stroke.toSVG(this,!1)),t.push(&quot;&lt;polyline &quot;,&#39;points=&quot;&#39;,e.join(&quot;&quot;),&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;&#39;,this.getSvgTransform(),&#39;&quot;/&gt;&#39;),t.join(&quot;&quot;)},_render:function(e){var t;e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y);for(var n=0,r=this.points.length;n&lt;r;n++)t=this.points[n],e.lineTo(t.x,t.y);this.fill&amp;&amp;e.fill(),this._removeShadow(e),this.stroke&amp;&amp;e.stroke()},complexity:function(){return this.get(&quot;points&quot;).length}}),t.Polyline.ATTRIBUTE_NAMES=&quot;fill fill-opacity opacity stroke stroke-width transform&quot;.split(&quot; &quot;),t.Polyline.fromElement=function(e,n){if(!e)return null;n||(n={});var r=t.parsePointsAttribute(e.getAttribute(&quot;points&quot;)),i=t.parseAttributes(e,t.Polyline.ATTRIBUTE_NAMES);for(var s=0,o=r.length;s&lt;o;s++)r[s].x-=n.width/2||0,r[s].y-=n.height/2||0;return new t.Polyline(r,t.util.object.extend(i,n),!0)},t.Polyline.fromObject=function(e){var n=e.points;return new t.Polyline(n,e,!0)}}(typeof exports!=&quot;undefined&quot;?exports:this),function(e){&quot;use strict&quot;;var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.array.min,i=t.util.array.max,s=t.util.toFixed;if(t.Polygon){t.warn(&quot;fabric.Polygon is already defined&quot;);return}t.Polygon=t.util.createClass(t.Object,{type:&quot;polygon&quot;,initialize:function(e,t,n){t=t||{},this.points=e,this.callSuper(&quot;initialize&quot;,t),this._calcDimensions(n)},_calcDimensions:function(e){var t=this.points,n=r(t,&quot;x&quot;),s=r(t,&quot;y&quot;),o=i(t,&quot;x&quot;),u=i(t,&quot;y&quot;);this.width=o-n||1,this.height=u-s||1,this.minX=n,this.minY=s;if(e)return;var a=this.width/2,f=this.height/2;this.points.forEach(function(e){e.x-=a,e.y-=f},this)},toObject:function(e){return n(this.callSuper(&quot;toObject&quot;,e),{points:this.points.concat()})},toSVG:function(){var e=[],t=[];for(var n=0,r=this.points.length;n&lt;r;n++)e.push(s(this.points[n].x,2),&quot;,&quot;,s(this.points[n].y,2),&quot; &quot;);return this.fill&amp;&amp;this.fill.toLive&amp;&amp;t.push(this.fill.toSVG(this,!1)),this.stroke&amp;&amp;this.stroke.toLive&amp;&amp;t.push(this.stroke.toSVG(this,!1)),t.push(&quot;&lt;polygon &quot;,&#39;points=&quot;&#39;,e.join(&quot;&quot;),&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;&#39;,this.getSvgTransform(),&#39;&quot;/&gt;&#39;),t.join(&quot;&quot;)},_render:function(e){var t;e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y);for(var n=0,r=this.points.length;n&lt;r;n++)t=this.points[n],e.lineTo(t.x,t.y);this.fill&amp;&amp;e.fill(),this._removeShadow(e),this.stroke&amp;&amp;(e.closePath(),e.stroke())},complexity:function(){return this.points.length}}),t.Polygon.ATTRIBUTE_NAMES=&quot;fill fill-opacity opacity stroke stroke-width transform&quot;.split(&quot; &quot;),t.Polygon.fromElement=function(e,r){if(!e)return null;r||(r={});var i=t.parsePointsAttribute(e.getAttribute(&quot;points&quot;)),s=t.parseAttributes(e,t.Polygon.ATTRIBUTE_NAMES);for(var o=0,u=i.length;o&lt;u;o++)i[o].x-=r.width/2||0,i[o].y-=r.height/2||0;return new t.Polygon(i,n(s,r),!0)},t.Polygon.fromObject=function(e){return new t.Polygon(e.points,e,!0)}}(typeof exports!=&quot;undefined&quot;?exports:this),function(e){function n(e,t,n,r){var i=r[0],s=r[1],o=r[2],f=r[3],l=r[4],c=r[5],h=r[6],p=u(c,h,i,s,f,l,o,t,n);for(var d=0;d&lt;p.length;d++){var v=a.apply(this,p[d]);e.bezierCurveTo.apply(e,v)}}function u(e,t,n,i,u,a,f,l,c){o=s.call(arguments);if(r[o])return r[o];var h=f*(Math.PI/180),p=Math.sin(h),d=Math.cos(h);n=Math.abs(n),i=Math.abs(i);var v=d*(l-e)*.5+p*(c-t)*.5,m=d*(c-t)*.5-p*(l-e)*.5,g=v*v/(n*n)+m*m/(i*i);g&gt;1&amp;&amp;(g=Math.sqrt(g),n*=g,i*=g);var y=d/n,b=p/n,w=-p/i,E=d/i,S=y*l+b*c,x=w*l+E*c,T=y*e+b*t,N=w*e+E*t,C=(T-S)*(T-S)+(N-x)*(N-x),k=1/C-.25;k&lt;0&amp;&amp;(k=0);var L=Math.sqrt(k);a===u&amp;&amp;(L=-L);var A=.5*(S+T)-L*(N-x),O=.5*(x+N)+L*(T-S),M=Math.atan2(x-O,S-A),_=Math.atan2(N-O,T-A),D=_-M;D&lt;0&amp;&amp;a===1?D+=2*Math.PI:D&gt;0&amp;&amp;a===0&amp;&amp;(D-=2*Math.PI);var P=Math.ceil(Math.abs(D/(Math.PI*.5+.001))),H=[];for(var B=0;B&lt;P;B++){var j=M+B*D/P,F=M+(B+1)*D/P;H[B]=[A,O,j,F,n,i,p,d]}return r[o]=H}function a(e,t,n,r,u,a,f,l){o=s.call(arguments);if(i[o])return i[o];var c=l*u,h=-f*a,p=f*u,d=l*a,v=.5*(r-n),m=8/3*Math.sin(v*.5)*Math.sin(v*.5)/Math.sin(v),g=e+Math.cos(n)-m*Math.sin(n),y=t+Math.sin(n)+m*Math.cos(n),b=e+Math.cos(r),w=t+Math.sin(r),E=b+m*Math.sin(r),S=w-m*Math.cos(r);return i[o]=[c*g+h*y,p*g+d*y,c*E+h*S,p*E+d*S,c*b+h*w,p*b+d*w]}function d(e){return e[0]===&quot;H&quot;?e[1]:e[e.length-2]}function v(e){return e[0]===&quot;V&quot;?e[1]:e[e.length-1]}var t={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},r={},i={},s=Array.prototype.join,o;&quot;use strict&quot;;var f=e.fabric||(e.fabric={}),l=f.util.array.min,c=f.util.array.max,h=f.util.object.extend,p=Object.prototype.toString;if(f.Path){f.warn(&quot;fabric.Path is already defined&quot;);return}f.Path=f.util.createClass(f.Object,{type:&quot;path&quot;,initialize:function(e,t){t=t||{},this.setOptions(t);if(!e)throw new Error(&quot;`path` argument is required&quot;);var n=p.call(e)===&quot;[object Array]&quot;;this.path=n?e:e.match&amp;&amp;e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);if(!this.path)return;n||(this.path=this._parsePath()),this._initializePath(t),t.sourcePath&amp;&amp;this.setSourcePath(t.sourcePath)},_initializePath:function(e){var t=&quot;width&quot;in e,n=&quot;height&quot;in e,r=&quot;left&quot;in e,i=&quot;top&quot;in e;!t||!n?(h(this,this._parseDimensions()),t&amp;&amp;(this.width=e.width),n&amp;&amp;(this.height=e.height)):(i||(this.top=this.height/2),r||(this.left=this.width/2)),this.pathOffset=this._calculatePathOffset(i||r)},_calculatePathOffset:function(e){return{x:e?0:this.left-this.width/2,y:e?0:this.top-this.height/2}},_render:function(e){var t,r=null,i=0,s=0,o=0,u=0,a,f,l,c,h=-(this.width/2+this.pathOffset.x),p=-(this.height/2+this.pathOffset.y);for(var d=0,v=this.path.length;d&lt;v;++d){t=this.path[d];switch(t[0]){case&quot;l&quot;:i+=t[1],s+=t[2],e.lineTo(i+h,s+p);break;case&quot;L&quot;:i=t[1],s=t[2],e.lineTo(i+h,s+p);break;case&quot;h&quot;:i+=t[1],e.lineTo(i+h,s+p);break;case&quot;H&quot;:i=t[1],e.lineTo(i+h,s+p);break;case&quot;v&quot;:s+=t[1],e.lineTo(i+h,s+p);break;case&quot;V&quot;:s=t[1],e.lineTo(i+h,s+p);break;case&quot;m&quot;:i+=t[1],s+=t[2],e[!r||r[0]!==&quot;m&quot;&amp;&amp;r[0]!==&quot;M&quot;?&quot;moveTo&quot;:&quot;lineTo&quot;](i+h,s+p);break;case&quot;M&quot;:i=t[1],s=t[2],e[!r||r[0]!==&quot;m&quot;&amp;&amp;r[0]!==&quot;M&quot;?&quot;moveTo&quot;:&quot;lineTo&quot;](i+h,s+p);break;case&quot;c&quot;:a=i+t[5],f=s+t[6],o=i+t[3],u=s+t[4],e.bezierCurveTo(i+t[1]+h,s+t[2]+p,o+h,u+p,a+h,f+p),i=a,s=f;break;case&quot;C&quot;:i=t[5],s=t[6],o=t[3],u=t[4],e.bezierCurveTo(t[1]+h,t[2]+p,o+h,u+p,i+h,s+p);break;case&quot;s&quot;:a=i+t[3],f=s+t[4],o=o?2*i-o:i,u=u?2*s-u:s,e.bezierCurveTo(o+h,u+p,i+t[1]+h,s+t[2]+p,a+h,f+p),o=i+t[1],u=s+t[2],i=a,s=f;break;case&quot;S&quot;:a=t[3],f=t[4],o=2*i-o,u=2*s-u,e.bezierCurveTo(o+h,u+p,t[1]+h,t[2]+p,a+h,f+p),i=a,s=f,o=t[1],u=t[2];break;case&quot;q&quot;:a=i+t[3</div><div class='line' id='LC5'>],f=s+t[4],o=i+t[1],u=s+t[2],e.quadraticCurveTo(o+h,u+p,a+h,f+p),i=a,s=f;break;case&quot;Q&quot;:a=t[3],f=t[4],e.quadraticCurveTo(t[1]+h,t[2]+p,a+h,f+p),i=a,s=f,o=t[1],u=t[2];break;case&quot;t&quot;:a=i+t[1],f=s+t[2],r[0].match(/[QqTt]/)===null?(o=i,u=s):r[0]===&quot;t&quot;?(o=2*i-l,u=2*s-c):r[0]===&quot;q&quot;&amp;&amp;(o=2*i-o,u=2*s-u),l=o,c=u,e.quadraticCurveTo(o+h,u+p,a+h,f+p),i=a,s=f,o=i+t[1],u=s+t[2];break;case&quot;T&quot;:a=t[1],f=t[2],o=2*i-o,u=2*s-u,e.quadraticCurveTo(o+h,u+p,a+h,f+p),i=a,s=f;break;case&quot;a&quot;:n(e,i+h,s+p,[t[1],t[2],t[3],t[4],t[5],t[6]+i+h,t[7]+s+p]),i+=t[6],s+=t[7];break;case&quot;A&quot;:n(e,i+h,s+p,[t[1],t[2],t[3],t[4],t[5],t[6]+h,t[7]+p]),i=t[6],s=t[7];break;case&quot;z&quot;:case&quot;Z&quot;:e.closePath()}r=t}},render:function(e,t){e.save();var n=this.transformMatrix;n&amp;&amp;e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t||this.transform(e),this.overlayFill?e.fillStyle=this.overlayFill:this.fill&amp;&amp;(e.fillStyle=this.fill.toLive?this.fill.toLive(e):this.fill),this.stroke&amp;&amp;(e.strokeStyle=this.stroke.toLive?this.stroke.toLive(e):this.stroke),this._setShadow(e),this.clipTo&amp;&amp;f.util.clipContext(this,e),e.beginPath(),this._render(e),this.fill&amp;&amp;e.fill(),this.clipTo&amp;&amp;e.restore(),this._removeShadow(e),this.stroke&amp;&amp;(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.lineCap=e.lineJoin=&quot;round&quot;,e.stroke()),!t&amp;&amp;this.active&amp;&amp;(this.drawBorders(e),this.drawControls(e)),e.restore()},toString:function(){return&quot;#&lt;fabric.Path (&quot;+this.complexity()+&#39;): { &quot;top&quot;: &#39;+this.top+&#39;, &quot;left&quot;: &#39;+this.left+&quot; }&gt;&quot;},toObject:function(e){var t=h(this.callSuper(&quot;toObject&quot;,e),{path:this.path});return this.sourcePath&amp;&amp;(t.sourcePath=this.sourcePath),this.transformMatrix&amp;&amp;(t.transformMatrix=this.transformMatrix),t},toDatalessObject:function(e){var t=this.toObject(e);return this.sourcePath&amp;&amp;(t.path=this.sourcePath),delete t.sourcePath,t},toSVG:function(){var e=[],t=[];for(var n=0,r=this.path.length;n&lt;r;n++)e.push(this.path[n].join(&quot; &quot;));var i=e.join(&quot; &quot;);return this.fill&amp;&amp;this.fill.toLive&amp;&amp;t.push(this.fill.toSVG(this,!0)),this.stroke&amp;&amp;this.stroke.toLive&amp;&amp;t.push(this.stroke.toSVG(this,!0)),t.push(&#39;&lt;g transform=&quot;&#39;,this.group?&quot;&quot;:this.getSvgTransform(),&#39;&quot;&gt;&#39;,&quot;&lt;path &quot;,&#39;d=&quot;&#39;,i,&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;translate(&#39;,-this.width/2,&quot; &quot;,-this.height/2,&quot;)&quot;,&#39;&quot; stroke-linecap=&quot;round&quot; &#39;,&quot;/&gt;&quot;,&quot;&lt;/g&gt;&quot;),t.join(&quot;&quot;)},complexity:function(){return this.path.length},_parsePath:function(){var e=[],n,r,i;for(var s=0,o,u=this.path.length;s&lt;u;s++){n=this.path[s],r=n.slice(1).trim().replace(/(\d)-/g,&quot;$1###-&quot;).split(/\s|,|###/),o=[n.charAt(0)];for(var a=0,f=r.length;a&lt;f;a++)i=parseFloat(r[a]),isNaN(i)||o.push(i);var l=o[0].toLowerCase(),c=t[l];if(o.length-1&gt;c)for(var h=1,p=o.length;h&lt;p;h+=c)e.push([o[0]].concat(o.slice(h,h+c)));else e.push(o)}return e},_parseDimensions:function(){var e=[],t=[],n,r,i=!1,s,o;this.path.forEach(function(u,a){u[0]!==&quot;H&quot;&amp;&amp;(n=a===0?d(u):d(this.path[a-1])),u[0]!==&quot;V&quot;&amp;&amp;(r=a===0?v(u):v(this.path[a-1])),u[0]===u[0].toLowerCase()&amp;&amp;(i=!0),s=i?n+d(u):u[0]===&quot;V&quot;?n:d(u),o=i?r+v(u):u[0]===&quot;H&quot;?r:v(u);var f=parseInt(s,10);isNaN(f)||e.push(f),f=parseInt(o,10),isNaN(f)||t.push(f)},this);var u=l(e),a=l(t),f=c(e),h=c(t),p=f-u,m=h-a,g={top:a+m/2,left:u+p/2,bottom:c(t)-m,right:c(e)-p};return g.width=p,g.height=m,g}}),f.Path.fromObject=function(e){return new f.Path(e.path,e)},f.Path.ATTRIBUTE_NAMES=&quot;d fill fill-opacity opacity fill-rule stroke stroke-width transform&quot;.split(&quot; &quot;),f.Path.fromElement=function(e,t){var n=f.parseAttributes(e,f.Path.ATTRIBUTE_NAMES);return new f.Path(n.d,h(n,t))}}(typeof exports!=&quot;undefined&quot;?exports:this),function(e){&quot;use strict&quot;;function u(e){for(var n=0,r=e.length;n&lt;r;n++)if(!(e[n]instanceof t.Object)){var i=s(o(e[n].type));e[n]=t[i].fromObject(e[n])}return e}var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.array.invoke,i=t.Object.prototype.toObject,s=t.util.string.camelize,o=t.util.string.capitalize;if(t.PathGroup){t.warn(&quot;fabric.PathGroup is already defined&quot;);return}t.PathGroup=t.util.createClass(t.Path,{type:&quot;path-group&quot;,fill:&quot;&quot;,initialize:function(e,t){t=t||{},this.paths=e||[];for(var n=this.paths.length;n--;)this.paths[n].group=this;this.setOptions(t),this.setCoords(),t.sourcePath&amp;&amp;this.setSourcePath(t.sourcePath)},render:function(e){if(!this.visible)return;e.save();var n=this.transformMatrix;n&amp;&amp;e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e),this._setShadow(e),this.clipTo&amp;&amp;t.util.clipContext(this,e);for(var r=0,i=this.paths.length;r&lt;i;++r)this.paths[r].render(e,!0);this.clipTo&amp;&amp;e.restore(),this._removeShadow(e),this.active&amp;&amp;(this.drawBorders(e),this.drawControls(e)),e.restore()},_set:function(e,t){if((e===&quot;fill&quot;||e===&quot;overlayFill&quot;)&amp;&amp;t&amp;&amp;this.isSameColor()){var n=this.paths.length;while(n--)this.paths[n]._set(e,t)}return this.callSuper(&quot;_set&quot;,e,t)},toObject:function(e){return n(i.call(this,e),{paths:r(this.getObjects(),&quot;toObject&quot;,e),sourcePath:this.sourcePath})},toDatalessObject:function(e){var t=this.toObject(e);return this.sourcePath&amp;&amp;(t.paths=this.sourcePath),t},toSVG:function(){var e=this.getObjects(),t=[&quot;&lt;g &quot;,&#39;style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; &#39;,&#39;transform=&quot;&#39;,this.getSvgTransform(),&#39;&quot; &#39;,&quot;&gt;&quot;];for(var n=0,r=e.length;n&lt;r;n++)t.push(e[n].toSVG());return t.push(&quot;&lt;/g&gt;&quot;),t.join(&quot;&quot;)},toString:function(){return&quot;#&lt;fabric.PathGroup (&quot;+this.complexity()+&quot;): { top: &quot;+this.top+&quot;, left: &quot;+this.left+&quot; }&gt;&quot;},isSameColor:function(){var e=this.getObjects()[0].get(&quot;fill&quot;);return this.getObjects().every(function(t){return t.get(&quot;fill&quot;)===e})},complexity:function(){return this.paths.reduce(function(e,t){return e+(t&amp;&amp;t.complexity?t.complexity():0)},0)},toGrayscale:function(){var e=this.paths.length;while(e--)this.paths[e].toGrayscale();return this},getObjects:function(){return this.paths}}),t.PathGroup.fromObject=function(e){var n=u(e.paths);return new t.PathGroup(n,e)}}(typeof exports!=&quot;undefined&quot;?exports:this),function(e){&quot;use strict&quot;;var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.array.min,i=t.util.array.max,s=t.util.array.invoke,o=t.util.removeFromArray;if(t.Group)return;var u={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};t.Group=t.util.createClass(t.Object,{type:&quot;group&quot;,initialize:function(e,t){t=t||{},this.objects=e||[],this.originalState={},this.callSuper(&quot;initialize&quot;),this._calcBounds(),this._updateObjectsCoords(),t&amp;&amp;n(this,t),this._setOpacityIfSame(),this.setCoords(!0),this.saveCoords()},_updateObjectsCoords:function(){var e=this.left,t=this.top;this.forEachObject(function(n){var r=n.get(&quot;left&quot;),i=n.get(&quot;top&quot;);n.set(&quot;originalLeft&quot;,r),n.set(&quot;originalTop&quot;,i),n.set(&quot;left&quot;,r-e),n.set(&quot;top&quot;,i-t),n.setCoords(),n.__origHasControls=n.hasControls,n.hasControls=!1},this)},toString:function(){return&quot;#&lt;fabric.Group: (&quot;+this.complexity()+&quot;)&gt;&quot;},getObjects:function(){return this.objects},addWithUpdate:function(e){return this._restoreObjectsState(),this.objects.push(e),this._calcBounds(),this._updateObjectsCoords(),this},removeWithUpdate:function(e){return this._restoreObjectsState(),o(this.objects,e),e.setActive(!1),this._calcBounds(),this._updateObjectsCoords(),this},add:function(e){return this.objects.push(e),this},remove:function(e){return o(this.objects,e),this},size:function(){return this.getObjects().length},delegatedProperties:{fill:!0,opacity:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textShadow:!0,textAlign:!0,backgroundColor:!0},_set:function(e,t){if(e in this.delegatedProperties){var n=this.objects.length;this[e]=t;while(n--)this.objects[n].set(e,t)}else this[e]=t},contains:function(e){return this.objects.indexOf(e)&gt;-1},toObject:function(e){return n(this.callSuper(&quot;toObject&quot;,e),{objects:s(this.objects,&quot;toObject&quot;,e)})},render:function(e,n){e.save(),this.transform(e);var r=Math.max(this.scaleX,this.scaleY);this.clipTo&amp;&amp;t.util.clipContext(this,e);for(var i=this.objects.length;i&gt;0;i--){var s=this.objects[i-1],o=s.borderScaleFactor,u=s.hasRotatingPoint;s.borderScaleFactor=r,s.hasRotatingPoint=!1,s.render(e),s.borderScaleFactor=o,s.hasRotatingPoint=u}this.clipTo&amp;&amp;e.restore(),!n&amp;&amp;this.active&amp;&amp;(this.drawBorders(e),this.drawControls(e)),e.restore(),this.setCoords()},item:function(e){return this.getObjects()[e]},complexity:function(){return this.getObjects().reduce(function(e,t){return e+=typeof t.complexity==&quot;function&quot;?t.complexity():0,e},0)},_restoreObjectsState:function(){return this.objects.forEach(this._restoreObjectState,this),this},_restoreObjectState:function(e){var t=this.get(&quot;left&quot;),n=this.get(&quot;top&quot;),r=this.getAngle()*(Math.PI/180),i=Math.cos(r)*e.get(&quot;top&quot;)+Math.sin(r)*e.get(&quot;left&quot;),s=-Math.sin(r)*e.get(&quot;top&quot;)+Math.cos(r)*e.get(&quot;left&quot;);return e.setAngle(e.getAngle()+this.getAngle()),e.set(&quot;left&quot;,t+s*this.get(&quot;scaleX&quot;)),e.set(&quot;top&quot;,n+i*this.get(&quot;scaleY&quot;)),e.set(&quot;scaleX&quot;,e.get(&quot;scaleX&quot;)*this.get(&quot;scaleX&quot;)),e.set(&quot;scaleY&quot;,e.get(&quot;scaleY&quot;)*this.get(&quot;scaleY&quot;)),e.setCoords(),e.hasControls=e.__origHasControls,delete e.__origHasControls,e.setActive(!1),e.setCoords(),this},destroy:function(){return this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get(&quot;left&quot;),this._originalTop=this.get(&quot;top&quot;),this},hasMoved:function(){return this._originalLeft!==this.get(&quot;left&quot;)||this._originalTop!==this.get(&quot;top&quot;)},setObjectsCoords:function(){return this.forEachObject(function(e){e.setCoords()}),this},activateAllObjects:function(){return this.forEachObject(function(e){e.setActive()}),this},forEachObject:t.StaticCanvas.prototype.forEachObject,_setOpacityIfSame:function(){var e=this.getObjects(),t=e[0]?e[0].get(&quot;opacity&quot;):1,n=e.every(function(e){return e.get(&quot;opacity&quot;)===t});n&amp;&amp;(this.opacity=t)},_calcBounds:function(){var e=[],t=[],n,s,o,u,a,f,l,c=0,h=this.objects.length;for(;c&lt;h;++c){a=this.objects[c],a.setCoords();for(var p in a.oCoords)e.push(a.oCoords[p].x),t.push(a.oCoords[p].y)}n=r(e),o=i(e),s=r(t),u=i(t),f=o-n||0,l=u-s||0,this.width=f,this.height=l,this.left=n+f/2||0,this.top=s+l/2||0},containsPoint:function(e){var t=this.get(&quot;width&quot;)/2,n=this.get(&quot;height&quot;)/2,r=this.get(&quot;left&quot;),i=this.get(&quot;top&quot;);return r-t&lt;e.x&amp;&amp;r+t&gt;e.x&amp;&amp;i-n&lt;e.y&amp;&amp;i+n&gt;e.y},toGrayscale:function(){var e=this.objects.length;while(e--)this.objects[e].toGrayscale();return this},toSVG:function(){var e=[];for(var t=this.objects.length;t--;)e.push(this.objects[t].toSVG());return&#39;&lt;g transform=&quot;&#39;+this.getSvgTransform()+&#39;&quot;&gt;&#39;+e.join(&quot;&quot;)+&quot;&lt;/g&gt;&quot;},get:function(e){if(e in u){if(this[e])return this[e];for(var t=0,n=this.objects.length;t&lt;n;t++)if(this.objects[t][e])return!0;return!1}return e in this.delegatedProperties?this.objects[0]&amp;&amp;this.objects[0].get(e):this[e]}}),t.Group.fromObject=function(e,n){t.util.enlivenObjects(e.objects,function(r){delete e.objects,n&amp;&amp;n(new t.Group(r,e))})},t.Group.async=!0}(typeof exports!=&quot;undefined&quot;?exports:this),function(e){&quot;use strict&quot;;var t=fabric.util.object.extend;e.fabric||(e.fabric={});if(e.fabric.Image){fabric.warn(&quot;fabric.Image is already defined.&quot;);return}fabric.Image=fabric.util.createClass(fabric.Object,{type:&quot;image&quot;,initialize:function(e,t){t||(t={}),this.callSuper(&quot;initialize&quot;,t),this._initElement(e),this._originalImage=this.getElement(),this._initConfig(t),this.filters=[],t.filters&amp;&amp;(this.filters=t.filters,this.applyFilters())},getElement:function(){return this._element},setElement:function(e){return this._element=e,this._initConfig(),this},getOriginalSize:function(){var e=this.getElement();return{width:e.width,height:e.height}},render:function(e,t){e.save();var n=this.transformMatrix;this.group&amp;&amp;e.translate(-this.group.width/2+this.width/2,-this.group.height/2+this.height/2),n&amp;&amp;e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t||this.transform(e),this._setShadow(e),this.clipTo&amp;&amp;fabric.util.clipContext(this,e),this._render(e),this.clipTo&amp;&amp;e.restore(),this._removeShadow(e),this.active&amp;&amp;!t&amp;&amp;(this.drawBorders(e),this.drawControls(e)),e.restore()},toObject:function(e){return t(this.callSuper(&quot;toObject&quot;,e),{src:this._originalImage.src||this._originalImage._src,filters:this.filters.concat()})},toSVG:function(){return&#39;&lt;g transform=&quot;&#39;+this.getSvgTransform()+&#39;&quot;&gt;&#39;+&#39;&lt;image xlink:href=&quot;&#39;+this.getSvgSrc()+&#39;&quot; &#39;+&#39;style=&quot;&#39;+this.getSvgStyles()+&#39;&quot; &#39;+&#39;transform=&quot;translate(&#39;+ -this.width/2+&quot; &quot;+ -this.height/2+&#39;)&quot; &#39;+&#39;width=&quot;&#39;+this.width+&#39;&quot; &#39;+&#39;height=&quot;&#39;+this.height+&#39;&quot;&#39;+&quot;&gt;&lt;/image&gt;&quot;+&quot;&lt;/g&gt;&quot;},getSrc:function(){return this.getElement().src||this.getElement()._src},toString:function(){return&#39;#&lt;fabric.Image: { src: &quot;&#39;+this.getSrc()+&#39;&quot; }&gt;&#39;},clone:function(e,t){this.constructor.fromObject(this.toObject(t),e)},applyFilters:function(e){if(this.filters.length===0){this.setElement(this._originalImage),e&amp;&amp;e();return}var t=typeof Buffer!=&quot;undefined&quot;&amp;&amp;typeof window==&quot;undefined&quot;,n=this._originalImage,r=fabric.util.createCanvasElement(),i=t?new(require(&quot;canvas&quot;).Image):fabric.document.createElement(&quot;img&quot;),s=this;r.width=n.width,r.height=n.height,r.getContext(&quot;2d&quot;).drawImage(n,0,0,n.width,n.height),this.filters.forEach(function(e){e&amp;&amp;e.applyTo(r)}),i.onload=function(){s._element=i,e&amp;&amp;e(),i.onload=r=n=null},i.width=n.width,i.height=n.height;if(t){var o=r.toDataURL(&quot;image/png&quot;).substring(22);i.src=new Buffer(o,&quot;base64&quot;),s._element=i,e&amp;&amp;e()}else i.src=r.toDataURL(&quot;image/png&quot;);return this},_render:function(e){e.drawImage(this._element,-this.width/2,-this.height/2,this.width,this.height)},_resetWidthHeight:function(){var e=this.getElement();this.set(&quot;width&quot;,e.width),this.set(&quot;height&quot;,e.height)},_initElement:function(e){this.setElement(fabric.util.getById(e)),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(e){e||(e={}),this.setOptions(e),this._setWidthHeight(e)},_initFilters:function(e){e.filters&amp;&amp;e.filters.length&amp;&amp;(this.filters=e.filters.map(function(e){return e&amp;&amp;fabric.Image.filters[e.type].fromObject(e)}))},_setWidthHeight:function(e){this.width=&quot;width&quot;in e?e.width:this.getElement().width||0,this.height=&quot;height&quot;in e?e.height:this.getElement().height||0},complexity:function(){return 1}}),fabric.Image.CSS_CANVAS=&quot;canvas-img&quot;,fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(e,t){var n=fabric.document.createElement(&quot;img&quot;),r=e.src;e.width&amp;&amp;(n.width=e.width),e.height&amp;&amp;(n.height=e.height),n.onload=function(){fabric.Image.prototype._initFilters.call(e,e);var r=new fabric.Image(n,e);t&amp;&amp;t(r),n=n.onload=n.onerror=null},n.onerror=function(){fabric.log(&quot;Error loading &quot;+n.src),t&amp;&amp;t(null,!0),n=n.onload=n.onerror=null},n.src=r},fabric.Image.fromURL=function(e,t,n){var r=fabric.document.createElement(&quot;img&quot;);r.onload=function(){t&amp;&amp;t(new fabric.Image(r,n)),r=r.onload=null},r.src=e},fabric.Image.ATTRIBUTE_NAMES=&quot;x y width height fill fill-opacity opacity stroke stroke-width transform xlink:href&quot;.split(&quot; &quot;),fabric.Image.fromElement=function(e,n,r){var i=fabric.parseAttributes(e,fabric.Image.ATTRIBUTE_NAMES);fabric.Image.fromURL(i[&quot;xlink:href&quot;],n,t(r?fabric.util.object.clone(r):{},i))},fabric.Image.async=!0}(typeof exports!=&quot;undefined&quot;?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var e=this.getAngle()%360;return e&gt;0?Math.round((e-1)/90)*90:Math.round(e/90)*90},straighten:function(){return this.setAngle(this._getAngleValueForStraighten()),this},fxStraighten:function(e){e=e||{};var t=function(){},n=e.onComplete||t,r=e.onChange||t,i=this;return fabric.util.animate({startValue:this.get(&quot;angle&quot;),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){i.setAngle(e),r()},onComplete:function(){i.setCoords(),n()},onStart:function(){i.setActive(!1)}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(e){return e.straighten(),this.renderAll(),this},fxStraightenObject:function(e){return e.fxStraighten({onChange:this.renderAll.bind(this)}),this}}),fabric.Image.filters={},fabric.Image.filters.Grayscale=fabric.util.createClass({type:&quot;Grayscale&quot;,applyTo:function(e){var t=e.getContext(&quot;2d&quot;),n=t.getImageData(0,0,e.width,e.height),r=n.data,i=n.width,s=n.height,o,u,a,f;for(a=0;a&lt;i;a++)for(f=0;f&lt;s;f++)o=a*4*s+f*4,u=(r[o]+r[o+1]+r[o+2])/3,r[o]=u,r[o+1]=u,r[o+2]=u;t.putImageData(n,0,0)},toJSON:function(){return{type:this.type}}}),fabric.Image.filters.Grayscale.fromObject=function(){return new fabric.Image.filters.Grayscale},fabric.Image.filters.RemoveWhite=fabric.util.createClass({type:&quot;RemoveWhite&quot;,initialize:function(e){e||(e={}),this.threshold=e.threshold||30,this.distance=e.distance||20},applyTo:function(e){var t=e.getContext(&quot;2d&quot;),n=t.getImageData(0,0,e.width,e.height),r=n.data,i=this.threshold,s=this.distance,o=255-i,u=Math.abs,a,f,l;for(var c=0,h=r.length;c&lt;h;c+=4)a=r[c],f=r[c+1],l=r[c+2],a&gt;o&amp;&amp;f&gt;o&amp;&amp;l&gt;o&amp;&amp;u(a-f)&lt;s&amp;&amp;u(a-l)&lt;s&amp;&amp;u(f-l)&lt;s&amp;&amp;(r[c+3]=1);t.putImageData(n,0,0)},toJSON:function(){return{type:this.type,threshold:this.threshold,distance:this.distance}}}),fabric.Image.filters.RemoveWhite.fromObject=function(e){return new fabric.Image.filters.RemoveWhite(e)},fabric.Image.filters.Invert=fabric.util.createClass({type:&quot;Invert&quot;,applyTo:function(e){var t=e.getContext(&quot;2d&quot;),n=t.getImageData(0,0,e.width,e.height),r=n.data,i=r.length,s;for(s=0;s&lt;i;s+=4)r[s]=255-r[s],r[s+1]=255-r[s+1],r[s+2]=255-r[s+2];t.putImageData(n,0,0)},toJSON:function(){return{type:this.type}}}),fabric.Image.filters.Invert.fromObject=function(){return new fabric.Image.filters.Invert},fabric.Image.filters.Sepia=fabric.util.createClass({type:&quot;Sepia&quot;,applyTo:function(e){var t=e.getContext(&quot;2d&quot;),n=t.getImageData(0,0,e.width,e.height),r=n.data,i=r.length,s,o;for(s=0;s&lt;i;s+=4)o=.3*r[s]+.59*r[s+1]+.11*r[s+2],r[s]=o+100,r[s+1]=o+50,r[s+2]=o+255;t.putImageData(n,0,0)},toJSON:function(){return{type:this.type}}}),fabric.Image.filters.Sepia.fromObject=function(){return new fabric.Image.filters.Sepia},fabric.Image.filters.Sepia2=fabric.util.createClass({type:&quot;Sepia2&quot;,applyTo:function(e){var t=e.getContext(&quot;2d&quot;),n=t.getImageData(0,0,e.width,e.height),r=n.data,i=r.length,s,o,u,a;for(s=0;s&lt;i;s+=4)o=r[s],u=r[s+1],a=r[s+2],r[s]=(o*.393+u*.769+a*.189)/1.351,r[s+1]=(o*.349+u*.686+a*.168)/1.203,r[s+2]=(o*.272+u*.534+a*.131)/2.14;t.putImageData(n,0,0)},toJSON:function(){return{type:this.type}}}),fabric.Image.filters.Sepia2.fromObject=function(){return new fabric.Image.filters.Sepia2},fabric.Image.filters.Brightness=fabric.util.createClass({type:&quot;Brightness&quot;,initialize:function(e){e||(e={}),this.brightness=e.brightness||100},applyTo:function(e){var t=e.getContext(&quot;2d&quot;),n=t.getImageData(0,0,e.width,e.height),r=n.data,i=this.brightness;for(var s=0,o=r.length;s&lt;o;s+=4)r[s]+=i,r[s+1]+=i,r[s+2]+=i;t.putImageData(n,0,0)},toJSON:function(){return{type:this.type,brightness:this.brightness}}}),fabric.Image.filters.Brightness.fromObject=function(e){return new fabric.Image.filters.Brightness(e)},fabric.Image.filters.Noise=fabric.util.createClass({type:&quot;Noise&quot;,initialize:function(e){e||(e={}),this.noise=e.noise||100},applyTo:function(e){var t=e.getContext(&quot;2d&quot;),n=t.getImageData(0,0,e.width,e.height),r=n.data,i=this.noise,s;for(var o=0,u=r.length;o&lt;u;o+=4)s=(.5-Math.random())*i,r[o]+=s,r[o+1]+=s,r[o+2]+=s;t.putImageData(n,0,0)},toJSON:function(){return{type:this.type,noise:this.noise}}}),fabric.Image.filters.Noise.fromObject=function(e){return new fabric.Image.filters.Noise(e)},fabric.Image.filters.GradientTransparency=fabric.util.createClass({type:&quot;GradientTransparency&quot;,initialize:function(e){e||(e={}),this.threshold=e.threshold||100},applyTo:function(e){var t=e.getContext(&quot;2d&quot;),n=t.getImageData(0,0,e.width,e.height),r=n.data,i=this.threshold,s=r.length;for(var o=0,u=r.length;o&lt;u;o+=4)r[o+3]=i+255*(s-o)/s;t.putImageData(n,0,0)},toJSON:function(){return{type:this.type,threshold:this.threshold}}}),fabric.Image.filters.GradientTransparency.fromObject=function(e){return new fabric.Image.filters.GradientTransparency(e)},fabric.Image.filters.Tint=fabric.util.createClass({type:&quot;Tint&quot;,initialize:function(e){e||(e={}),this.color=e.color||0},applyTo:function(e){var t=e.getContext(&quot;2d&quot;),n=t.getImageData(0,0,e.width,e.height),r=n.data,i=r.length,s,o,u=parseInt(this.color,10).toString(16),a=parseInt(&quot;0x&quot;+u.substr(0,2),16),f=parseInt(&quot;0x&quot;+u.substr(2,2),16),l=parseInt(&quot;0x&quot;+u.substr(4,2),16);for(s=0;s&lt;i;s+=4)o=r[s+3],o&gt;0&amp;&amp;(r[s]=a,r[s+1]=f,r[s+2]=l);t.putImageData(n,0,0)},toJSON:function(){return{type:this.type,color:this.color}}}),fabric.Image.filters.Tint.fromObject=function(e){return new fabric.Image.filters.Tint(e)},fabric.Image.filters.Convolute=fabric.util.createClass({type:&quot;Convolute&quot;,initialize:function(e){e||(e={}),this.opaque=e.opaque,this.matrix=e.matrix||[0,0,0,0,1,0,0,0,0];var t=fabric.util.createCanvasElement();this.tmpCtx=t.getContext(&quot;2d&quot;)},_createImageData:function(e,t){return this.tmpCtx.createImageData(e,t)},applyTo:function(e){var t=this.matrix,n=e.getContext(&quot;2d&quot;),r=n.getImageData(0,0,e.width,e.height),i=Math.round(Math.sqrt(t.length)),s=Math.floor(i/2),o=r.data,u=r.width,a=r.height,f=u,l=a,c=this._createImageData(f,l),h=c.data,p=this.opaque?1:0;for(var d=0;d&lt;l;d++)for(var v=0;v&lt;f;v++){var m=d,g=v,y=(d*f+v)*4,b=0,w=0,E=0,S=0;for(var x=0;x&lt;i;x++)for(var T=0;T&lt;i;T++){var N=m+x-s,C=g+T-s;if(N&gt;=0&amp;&amp;N&lt;a&amp;&amp;C&gt;=0&amp;&amp;C&lt;u){var k=(N*u+C)*4,L=t[x*i+T];b+=o[k]*L,w+=o[k+1]*L,E+=o[k+2]*L,S+=o[k+3]*L}}h[y]=b,h[y+1]=w,h[y+2]=E,h[y+3]=S+p*(255-S)}n.putImageData(c,0,0)},toJSON:function(){return{type:this.type,matrix:this.matrix}}}),fabric.Image.filters.Convolute.fromObject=function(e){return new fabric.Image.filters.Convolute(e)},fabric.Image.filters.Pixelate=fabric.util.createClass({type:&quot;Pixelate&quot;,initialize:function(e){e||(e={}),this.blocksize=e.blocksize||4},applyTo:function(e){var t=e.getContext(&quot;2d&quot;),n=t.getImageData(0,0,e.width,e.height),r=n.data,i=n.width,s=n.height,o,u,a,f,l,c,h;for(u=0;u&lt;i;u+=this.blocksize)for(a=0;a&lt;s;a+=this.blocksize){o=u*4*s+a*4,f=r[o],l=r[o+1],c=r[o+2],h=r[o+3];for(var p=u,d=u+this.blocksize;p&lt;d;p++)for(var v=a,m=a+this.blocksize;v&lt;m;v++)o=p*4*s+v*4,r[o]=f,r[o+1]=l,r[o+2]=c,r[o+3]=h}t.putImageData(n,0,0)},toJSON:function(){return{type:this.type,blocksize:this.blocksize}}}),fabric.Image.filters.Pixelate.fromObject=function(e){return new fabric.Image.filters.Pixelate(e)},function(e){&quot;use strict&quot;;var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.object.clone,i=t.util.toFixed;if(t.Text){t.warn(&quot;fabric.Text is already defined&quot;);return}var s={fontSize:!0,fontWeight:!0,fontFamily:!0,textDecoration:!0,fontStyle:!0,lineHeight:!0,strokeStyle:!0,strokeWidth:!0,text:!0},o=t.Object.prototype.stateProperties.concat();o.push(&quot;fontFamily&quot;,&quot;fontWeight&quot;,&quot;fontSize&quot;,&quot;path&quot;,&quot;text&quot;,&quot;textDecoration&quot;,&quot;textShadow&quot;,&quot;textAlign&quot;,&quot;fontStyle&quot;,&quot;lineHeight&quot;,&quot;strokeStyle&quot;,&quot;strokeWidth&quot;,&quot;backgroundColor&quot;,&quot;textBackgroundColor&quot;,&quot;useNative&quot;),t.Text=t.util.createClass(t.Object,{fontSize:40,fontWeight:&quot;normal&quot;,fontFamily:&quot;Times New Roman&quot;,textDecoration:&quot;&quot;,textShadow:&quot;&quot;,textAlign:&quot;left&quot;,fontStyle:&quot;&quot;,lineHeight:1.3,strokeStyle:&quot;&quot;,strokeWidth:1,backgroundColor:&quot;&quot;,textBackgroundColor:&quot;&quot;,path:null,type:&quot;text&quot;,useNative:!0,stateProperties:o,initialize:function(e,t){t=t||{},this.text=e,this.setOptions(t),this._initDimensions(),this.setCoords()},_initDimensions:function(){var e=t.util.createCanvasElement();this._render(e.getContext(&quot;2d&quot;))},toString:function(){return&quot;#&lt;fabric.Text (&quot;+this.complexity()+&#39;): { &quot;text&quot;: &quot;&#39;+this.text+&#39;&quot;, &quot;fontFamily&quot;: &quot;&#39;+this.fontFamily+&#39;&quot; }&gt;&#39;},_render:function(e){typeof Cufon==&quot;undefined&quot;||this.useNative===!0?this._renderViaNative(e):this._renderViaCufon(e)},_renderViaCufon:function(e){var t=Cufon.textOptions||(Cufon.textOptions={});t.left=this.left,t.top=this.top,t.context=e,t.color=this.fill;var n=this._initDummyElementForCufon();this.transform(e),Cufon.replaceElement(n,{engine:&quot;canvas&quot;,separate:&quot;none&quot;,fontFamily:this.fontFamily,fontWeight:this.fontWeight,textDecoration:this.textDecoration,textShadow:this.textShadow,textAlign:this.textAlign,fontStyle:this.fontStyle,lineHeight:this.lineHeight,strokeStyle:this.strokeStyle,strokeWidth:this.strokeWidth,backgroundColor:this.backgroundColor,textBackgroundColor:this.textBackgroundColor}),this.width=t.width,this.height=t.height,this._totalLineHeight=t.totalLineHeight,this._fontAscent=t.fontAscent,this._boundaries=t.boundaries,this._shadowOffsets=t.shadowOffsets,this._shadows=t.shadows||[],n=null,this.setCoords()},_renderViaNative:function(e){this.transform(e),this._setTextStyles(e);var n=this.text.split(/\r?\n/);this.width=this._getTextWidth(e,n),this.height=this._getTextHeight(e,n),this._renderTextBackground(e,n),this.textAlign!==&quot;left&quot;&amp;&amp;this.textAlign!==&quot;justify&quot;&amp;&amp;(e.save(),e.translate(this.textAlign===&quot;center&quot;?this.width/2:this.width,0)),this._setTextShadow(e),this.clipTo&amp;&amp;t.util.clipContext(this,e),this._renderTextFill(e,n),this._renderTextStroke(e,n),this.clipTo&amp;&amp;e.restore(),this.textShadow&amp;&amp;e.restore(),this.textAlign!==&quot;left&quot;&amp;&amp;this.textAlign!==&quot;justify&quot;&amp;&amp;e.restore(),this._renderTextDecoration(e,n),this._setBoundaries(e,n),this._totalLineHeight=0,this.setCoords()},_setBoundaries:function(e,t){this._boundaries=[];for(var n=0,r=t.length;n&lt;r;n++){var i=this._getLineWidth(e,t[n]),s=this._getLineLeftOffset(i);this._boundaries.push({height:this.fontSize*this.lineHeight,width:i,left:s})}},_setTextStyles:function(e){e.fillStyle=this.fill.toLive?this.fill.toLive(e):this.fill,e.strokeStyle=this.strokeStyle,e.lineWidth=this.strokeWidth,e.textBaseline=&quot;alphabetic&quot;,e.textAlign=this.textAlign,e.font=this._getFontDeclaration()},_getTextHeight:function(e,t){return this.fontSize*t.length*this.lineHeight},_getTextWidth:function(e,t){var n=e.measureText(t[0]).width;for(var r=1,i=t.length;r&lt;i;r++){var s=e.measureText(t[r]).width;s&gt;n&amp;&amp;(n=s)}return n},_setTextShadow:function(e){if(this.textShadow){var t=/\s+(-?\d+)(?:px)?\s+(-?\d+)(?:px)?\s+(\d+)(?:px)?\s*/,n=this.textShadow,r=t.exec(this.textShadow),i=n.replace(t,&quot;&quot;);e.save(),e.shadowColor=i,e.shadowOffsetX=parseInt(r[1],10),e.shadowOffsetY=parseInt(r[2],10),e.shadowBlur=parseInt(r[3],10),this._shadows=[{blur:e.shadowBlur,color:e.shadowColor,offX:e.shadowOffsetX,offY:e.shadowOffsetY}],this._shadowOffsets=[[parseInt(e.shadowOffsetX,10),parseInt(e.shadowOffsetY,10)]]}},_drawTextLine:function(e,t,n,r,i){if(this.textAlign!==&quot;justify&quot;){t[e](n,r,i);return}var s=t.measureText(n).width,o=this.width;if(o&gt;s){var u=n.split(/\s+/),a=t.measureText(n.replace(/\s+/g,&quot;&quot;)).width,f=o-a,l=u.length-1,c=f/l,h=0;for(var p=0,d=u.length;p&lt;d;p++)t[e](u[p],r+h,i),h+=t.measureText(u[p]).width+c}else t[e](n,r,i)},_renderTextFill:function(e,t){this._boundaries=[];for(var n=0,r=t.length;n&lt;r;n++)this._drawTextLine(&quot;fillText&quot;,e,t[n],-this.width/2,-this.height/2+n*this.fontSize*this.lineHeight+this.fontSize)},_renderTextStroke:function(e,t){if(this.strokeStyle){e.beginPath();for(var n=0,r=t.length;n&lt;r;n++)this._drawTextLine(&quot;strokeText&quot;,e,t[n],-this.width/2,-this.height/2+n*this.fontSize*this.lineHeight+this.fontSize);e.closePath()}},_renderTextBackground:function(e,t){this._renderTextBoxBackground(e),this._renderTextLinesBackground(e,t)},_renderTextBoxBackground:function(e){this.backgroundColor&amp;&amp;(e.save(),e.fillStyle=this.backgroundColor,e.fillRect(-this.width/2,-this.height/2,this.width,this.height),e.restore())},_renderTextLinesBackground:function(e,t){if(this.textBackgroundColor){e.save(),e.fillStyle=this.textBackgroundColor;for(var n=0,r=t.length;n&lt;r;n++)if(t[n]!==&quot;&quot;){var i=this._getLineWidth(e,t[n]),s=this._getLineLeftOffset(i);e.fillRect(-this.width/2+s,-this.height/2+n*this.fontSize*this.lineHeight,i,this.fontSize*this.lineHeight)}e.restore()}},_getLineLeftOffset:function(e){return this.textAlign===&quot;center&quot;?(this.width-e)/2:this.textAlign===&quot;right&quot;?this.width-e:0},_getLineWidth:function(e,t){return this.textAlign===&quot;justify&quot;?this.width:e.measureText(t).width},_renderTextDecoration:function(e,t){function i(i){for(var s=0,o=t.length;s&lt;o;s++){var u=r._getLineWidth(e,t[s]),a=r._getLineLeftOffset(u);e.fillRect(-r.width/2+a,i+s*r.fontSize*r.lineHeight-n,u,1)}}var n=this._getTextHeight(e,t)/2,r=this;this.textDecoration.indexOf(&quot;underline&quot;)&gt;-1&amp;&amp;i(this.fontSize),this.textDecoration.indexOf(&quot;line-through&quot;)&gt;-1&amp;&amp;i(this.fontSize/2),this.textDecoration.indexOf(&quot;overline&quot;)&gt;-1&amp;&amp;i(0)},_getFontDeclaration:function(){return[t.isLikelyNode?this.fontWeight:this.fontStyle,t.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+&quot;px&quot;,t.isLikelyNode?&#39;&quot;&#39;+this.fontFamily+&#39;&quot;&#39;:this.fontFamily].join(&quot; &quot;)},_initDummyElementForCufon:function(){var e=t.document.createElement(&quot;pre&quot;),n=t.document.createElement(&quot;div&quot;);return n.appendChild(e),typeof G_vmlCanvasManager==&quot;undefined&quot;?e.innerHTML=this.text:e.innerText=this.text.replace(/\r?\n/gi,&quot;\r&quot;),e.style.fontSize=this.fontSize+&quot;px&quot;,e.style.letterSpacing=&quot;normal&quot;,e},render:function(e,t){e.save(),this._render(e),!t&amp;&amp;this.active&amp;&amp;(this.drawBorders(e),this.drawControls(e)),e.restore()},toObject:function(e){return n(this.callSuper(&quot;toObject&quot;,e),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textShadow:this.textShadow,textAlign:this.textAlign,path:this.path,strokeStyle:this.strokeStyle,strokeWidth:this.strokeWidth,backgroundColor:this.backgroundColor,textBackgroundColor:this.textBackgroundColor,useNative:this.useNative})},toSVG:function(){var e=this.text.split(/\r?\n/),t=this.useNative?this.fontSize*this.lineHeight:-this._fontAscent-this._fontAscent/5*this.lineHeight,n=-(this.width/2),r=this.useNative?this.fontSize-1:this.height/2-e.length*this.fontSize-this._totalLineHeight,s=this._getSVGTextAndBg(t,n,e),o=this._getSVGShadows(t,e);return r+=this._fontAscent?this._fontAscent/5*this.lineHeight:0,[&#39;&lt;g transform=&quot;&#39;,this.getSvgTransform(),&#39;&quot;&gt;&#39;,s.textBgRects.join(&quot;&quot;),&quot;&lt;text &quot;,this.fontFamily?&quot;font-family=\&quot;&#39;&quot;+this.fontFamily+&quot;&#39;\&quot; &quot;:&quot;&quot;,this.fontSize?&#39;font-size=&quot;&#39;+this.fontSize+&#39;&quot; &#39;:&quot;&quot;,this.fontStyle?&#39;font-style=&quot;&#39;+this.fontStyle+&#39;&quot; &#39;:&quot;&quot;,this.fontWeight?&#39;font-weight=&quot;&#39;+this.fontWeight+&#39;&quot; &#39;:&quot;&quot;,this.textDecoration?&#39;text-decoration=&quot;&#39;+this.textDecoration+&#39;&quot; &#39;:&quot;&quot;,&#39;style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; &#39;,&#39;transform=&quot;translate(&#39;,i(n,2),&quot; &quot;,i(r,2),&#39;)&quot;&gt;&#39;,o.join(&quot;&quot;),s.textSpans.join(&quot;&quot;),&quot;&lt;/text&gt;&quot;,&quot;&lt;/g&gt;&quot;].join(&quot;&quot;)},_getSVGShadows:function(e,n){var r=[],s,o,u,a,f=1;if(!this._shadows||!this._boundaries)return r;for(s=0,u=this._shadows.length;s&lt;u;s++)for(o=0,a=n.length;o&lt;a;o++)if(n[o]!==&quot;&quot;){var l=this._boundaries&amp;&amp;this._boundaries[o]?this._boundaries[o].left:0;r.push(&#39;&lt;tspan x=&quot;&#39;,i(l+f+this._shadowOffsets[s][0],2),o===0||this.useNative?&#39;&quot; y&#39;:&#39;&quot; dy&#39;,&#39;=&quot;&#39;,i(this.useNative?e*o-this.height/2+this._shadowOffsets[s][1]:e+(o===0?this._shadowOffsets[s][1]:0),2),&#39;&quot; &#39;,this._getFillAttributes(this._shadows[s].color),&quot;&gt;&quot;,t.util.string.escapeXml(n[o]),&quot;&lt;/tspan&gt;&quot;),f=1}else f++;return r},_getSVGTextAndBg:function(e,n,r){var s=[],o=[],u,a,f,l=1;this.backgroundColor&amp;&amp;this._boundaries&amp;&amp;o.push(&quot;&lt;rect &quot;,this._getFillAttributes(this.backgroundColor),&#39; x=&quot;&#39;,i(-this.width/2,2),&#39;&quot; y=&quot;&#39;,i(-this.height/2,2),&#39;&quot; width=&quot;&#39;,i(this.width,2),&#39;&quot; height=&quot;&#39;,i(this.height,2),&#39;&quot;&gt;&lt;/rect&gt;&#39;);for(u=0,f=r.length;u&lt;f;u++){r[u]!==&quot;&quot;?(a=this._boundaries&amp;&amp;this._boundaries[u]?i(this._boundaries[u].left,2):0,s.push(&#39;&lt;tspan x=&quot;&#39;,a,&#39;&quot; &#39;,u===0||this.useNative?&quot;y&quot;:&quot;dy&quot;,&#39;=&quot;&#39;,i(this.useNative?e*u-this.height/2:e*l,2),&#39;&quot; &#39;,this._getFillAttributes(this.fill),&quot;&gt;&quot;,t.util.string.escapeXml(r[u]),&quot;&lt;/tspan&gt;&quot;),l=1):l++;if(!this.textBackgroundColor||!this._boundaries)continue;o.push(&quot;&lt;rect &quot;,this._getFillAttributes(this.textBackgroundColor),&#39; x=&quot;&#39;,i(n+this._boundaries[u].left,2),&#39;&quot; y=&quot;&#39;,i(e*u-this.height/2,2),&#39;&quot; width=&quot;&#39;,i(this._boundaries[u].width,2),&#39;&quot; height=&quot;&#39;,i(this._boundaries[u].height,2),&#39;&quot;&gt;&lt;/rect&gt;&#39;)}return{textSpans:s,textBgRects:o}},_getFillAttributes:function(e){var n=e?new t.Color(e):&quot;&quot;;return!n||!n.getSource()||n.getAlpha()===1?&#39;fill=&quot;&#39;+e+&#39;&quot;&#39;:&#39;opacity=&quot;&#39;+n.getAlpha()+&#39;&quot; fill=&quot;&#39;+n.setAlpha(1).toRgb()+&#39;&quot;&#39;},setColor:function(e){return this.set(&quot;fill&quot;,e),this},getText:function(){return this.text},_set:function(e,t){e===&quot;fontFamily&quot;&amp;&amp;this.path&amp;&amp;(this.path=this.path.replace(/(.*?)([^\/]*)(\.font\.js)/,&quot;$1&quot;+t+&quot;$3&quot;)),this.callSuper(&quot;_set&quot;,e,t),e in s&amp;&amp;(this._initDimensions(),this.setCoords())}}),t.Text.ATTRIBUTE_NAMES=&quot;x y fill fill-opacity opacity stroke stroke-width transform font-family font-style font-weight font-size text-decoration&quot;.split(&quot; &quot;),t.Text.fromObject=function(e){return new t.Text(e.text,r(e))},t.Text.fromElement=function(e,n){if(!e)return null;var r=t.parseAttributes(e,t.Text.ATTRIBUTE_NAMES);n=t.util.object.extend(n?t.util.object.clone(n):{},r);var i=new t.Text(e.textContent,n);return i.set({left:i.getLeft()+i.getWidth()/2,top:i.getTop()-i.getHeight()/2}),i},t.util.createAccessors(t.Text)}(typeof exports!=&quot;undefined&quot;?exports:this),function(){function request(e,t,n){var r=URL.parse(e),i=HTTP.request({hostname:r.hostname,port:r.port,path:r.pathname,method:&quot;GET&quot;},function(e){var r=&quot;&quot;;t&amp;&amp;e.setEncoding(t),e.on(&quot;end&quot;,function(){n(r)}),e.on(&quot;data&quot;,function(t){e.statusCode===200&amp;&amp;(r+=t)})});i.on(&quot;error&quot;,function(e){e.errno===process.ECONNREFUSED?fabric.log(&quot;ECONNREFUSED: connection refused to &quot;+</div><div class='line' id='LC6'>r.hostname+&quot;:&quot;+r.port):fabric.log(e.message)})}function request_fs(e,t){var n=require(&quot;fs&quot;),r=n.createReadStream(e),i=&quot;&quot;;r.on(&quot;data&quot;,function(e){i+=e}),r.on(&quot;end&quot;,function(){t(i)})}if(typeof document!=&quot;undefined&quot;&amp;&amp;typeof window!=&quot;undefined&quot;)return;var DOMParser=(new require(&quot;xmldom&quot;)).DOMParser,URL=require(&quot;url&quot;),HTTP=require(&quot;http&quot;),Canvas=require(&quot;canvas&quot;),Image=require(&quot;canvas&quot;).Image;fabric.util.loadImage=function(e,t,n){var r=function(r){i.src=new Buffer(r,&quot;binary&quot;),i._src=e,t&amp;&amp;t.call(n,i)},i=new Image;e&amp;&amp;e.indexOf(&quot;data&quot;)===0?(i.src=i._src=e,t&amp;&amp;t.call(n,i)):e&amp;&amp;e.indexOf(&quot;http&quot;)!==0?request_fs(e,r):e&amp;&amp;request(e,&quot;binary&quot;,r)},fabric.loadSVGFromURL=function(e,t){e=e.replace(/^\n\s*/,&quot;&quot;).replace(/\?.*$/,&quot;&quot;).trim(),request(e,&quot;&quot;,function(e){fabric.loadSVGFromString(e,t)})},fabric.loadSVGFromString=function(e,t){var n=(new DOMParser).parseFromString(e);fabric.parseSVGDocument(n.documentElement,function(e,n){t(e,n)})},fabric.util.getScript=function(url,callback){request(url,&quot;&quot;,function(body){eval(body),callback&amp;&amp;callback()})},fabric.Image.fromObject=function(e,t){fabric.util.loadImage(e.src,function(n){var r=new fabric.Image(n);r._initConfig(e),r._initFilters(e),t(r)})},fabric.createCanvasForNode=function(e,t){var n=fabric.document.createElement(&quot;canvas&quot;),r=new Canvas(e||600,t||600);n.style={},n.width=r.width,n.height=r.height;var i=fabric.Canvas||fabric.StaticCanvas,s=new i(n);return s.contextContainer=r.getContext(&quot;2d&quot;),s.nodeCanvas=r,s.Font=Canvas.Font,s},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(e){return this.nodeCanvas.createJPEGStream(e)};var origSetWidth=fabric.StaticCanvas.prototype.setWidth;fabric.StaticCanvas.prototype.setWidth=function(e){return origSetWidth.call(this,e),this.nodeCanvas.width=e,this},fabric.Canvas&amp;&amp;(fabric.Canvas.prototype.setWidth=fabric.StaticCanvas.prototype.setWidth);var origSetHeight=fabric.StaticCanvas.prototype.setHeight;fabric.StaticCanvas.prototype.setHeight=function(e){return origSetHeight.call(this,e),this.nodeCanvas.height=e,this},fabric.Canvas&amp;&amp;(fabric.Canvas.prototype.setHeight=fabric.StaticCanvas.prototype.setHeight)}();</div></pre></div>
          </td>
        </tr>
      </table>
  </div>

          </div>
        </div>

        <a href="#jump-to-line" rel="facebox" data-hotkey="l" class="js-jump-to-line" style="display:none">Jump to Line</a>
        <div id="jump-to-line" style="display:none">
          <h2>Jump to Line</h2>
          <form accept-charset="UTF-8" class="js-jump-to-line-form">
            <input class="textfield js-jump-to-line-field" type="text">
            <div class="full-button">
              <button type="submit" class="button">Go</button>
            </div>
          </form>
        </div>

      </div>
    </div>
</div>

<div id="js-frame-loading-template" class="frame frame-loading large-loading-area" style="display:none;">
  <img class="js-frame-loading-spinner" src="https://a248.e.akamai.net/assets.github.com/images/spinners/octocat-spinner-128.gif?1347543528" height="64" width="64">
</div>


        </div>
      </div>
      <div class="context-overlay"></div>
    </div>

      <div id="footer-push"></div><!-- hack for sticky footer -->
    </div><!-- end of wrapper - hack for sticky footer -->

      <!-- footer -->
      <div id="footer">
  <div class="container clearfix">

      <dl class="footer_nav">
        <dt>GitHub</dt>
        <dd><a href="https://github.com/about">About us</a></dd>
        <dd><a href="https://github.com/blog">Blog</a></dd>
        <dd><a href="https://github.com/contact">Contact &amp; support</a></dd>
        <dd><a href="http://enterprise.github.com/">GitHub Enterprise</a></dd>
        <dd><a href="http://status.github.com/">Site status</a></dd>
      </dl>

      <dl class="footer_nav">
        <dt>Applications</dt>
        <dd><a href="http://mac.github.com/">GitHub for Mac</a></dd>
        <dd><a href="http://windows.github.com/">GitHub for Windows</a></dd>
        <dd><a href="http://eclipse.github.com/">GitHub for Eclipse</a></dd>
        <dd><a href="http://mobile.github.com/">GitHub mobile apps</a></dd>
      </dl>

      <dl class="footer_nav">
        <dt>Services</dt>
        <dd><a href="http://get.gaug.es/">Gauges: Web analytics</a></dd>
        <dd><a href="http://speakerdeck.com">Speaker Deck: Presentations</a></dd>
        <dd><a href="https://gist.github.com">Gist: Code snippets</a></dd>
        <dd><a href="http://jobs.github.com/">Job board</a></dd>
      </dl>

      <dl class="footer_nav">
        <dt>Documentation</dt>
        <dd><a href="http://help.github.com/">GitHub Help</a></dd>
        <dd><a href="http://developer.github.com/">Developer API</a></dd>
        <dd><a href="http://github.github.com/github-flavored-markdown/">GitHub Flavored Markdown</a></dd>
        <dd><a href="http://pages.github.com/">GitHub Pages</a></dd>
      </dl>

      <dl class="footer_nav">
        <dt>More</dt>
        <dd><a href="http://training.github.com/">Training</a></dd>
        <dd><a href="https://github.com/edu">Students &amp; teachers</a></dd>
        <dd><a href="http://shop.github.com">The Shop</a></dd>
        <dd><a href="/plans">Plans &amp; pricing</a></dd>
        <dd><a href="http://octodex.github.com/">The Octodex</a></dd>
      </dl>

      <hr class="footer-divider">


    <p class="right">&copy; 2013 <span title="0.10917s from fe1.rs.github.com">GitHub</span>, Inc. All rights reserved.</p>
    <a class="left" href="https://github.com/">
      <span class="mega-icon mega-icon-invertocat"></span>
    </a>
    <ul id="legal">
        <li><a href="https://github.com/site/terms">Terms of Service</a></li>
        <li><a href="https://github.com/site/privacy">Privacy</a></li>
        <li><a href="https://github.com/security">Security</a></li>
    </ul>

  </div><!-- /.container -->

</div><!-- /.#footer -->


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-fullscreen-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="js-fullscreen-contents" placeholder="" data-suggester="fullscreen_suggester"></textarea>
          <div class="suggester-container">
              <div class="suggester fullscreen-suggester js-navigation-container" id="fullscreen_suggester"
                 data-url="/kangax/fabric.js/suggestions/commit">
              </div>
          </div>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped leftwards" title="Exit Zen Mode">
      <span class="mega-icon mega-icon-normalscreen"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped leftwards"
      title="Switch themes">
      <span class="mini-icon mini-icon-brightness"></span>
    </a>
  </div>
</div>



    <div id="ajax-error-message" class="flash flash-error">
      <span class="mini-icon mini-icon-exclamation"></span>
      Something went wrong with that request. Please try again.
      <a href="#" class="mini-icon mini-icon-remove-close ajax-error-dismiss"></a>
    </div>

    
    
    <span id='server_response_time' data-time='0.10971' data-host='fe1'></span>
    
  </body>
</html>

